<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.2.1"><meta name=description content="Splunk IMSplunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.
NodeJS Zero-Config WorkshopA workshop using Zero Configuration Auto-Instrumentation for NodeJS.
GDI (OTel & UF)Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.
Splunk OnCallMake expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Unsupported Field Workshops :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Splunk IMSplunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.
NodeJS Zero-Config WorkshopA workshop using Zero Configuration Auto-Instrumentation for NodeJS.
GDI (OTel & UF)Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.
Splunk OnCallMake expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.92/en/unsupported-field-workshops/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Unsupported Field Workshops :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Splunk IMSplunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.
NodeJS Zero-Config WorkshopA workshop using Zero Configuration Auto-Instrumentation for NodeJS.
GDI (OTel & UF)Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.
Splunk OnCallMake expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Unsupported Field Workshops :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Splunk IMSplunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.
NodeJS Zero-Config WorkshopA workshop using Zero Configuration Auto-Instrumentation for NodeJS.
GDI (OTel & UF)Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.
Splunk OnCallMake expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running."><meta itemprop=dateModified content="2024-09-19T16:47:03+01:00"><meta itemprop=wordCount content="68"><title>Unsupported Field Workshops :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.92/en/unsupported-field-workshops/index.html rel=canonical type=text/html title="Unsupported Field Workshops :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.92/images/favicon.ico?1748466275 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.92/css/fontawesome-all.min.css?1748466275 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.92/css/fontawesome-all.min.css?1748466275 rel=stylesheet></noscript><link href=/observability-workshop/v5.92/css/auto-complete.css?1748466275 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.92/css/auto-complete.css?1748466275 rel=stylesheet></noscript><link href=/observability-workshop/v5.92/css/perfect-scrollbar.min.css?1748466275 rel=stylesheet><link href=/observability-workshop/v5.92/css/theme.min.css?1748466275 rel=stylesheet><link href=/observability-workshop/v5.92/css/format-print.min.css?1748466275 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.92",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"Z8JjZ8iNiF4jSfNHvJIRJg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"us1",rumAccessToken:"Z8JjZ8iNiF4jSfNHvJIRJg"})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.92/en/unsupported-field-workshops/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.92/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Unsupported Field Workshops</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.92/en/unsupported-field-workshops/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.92/en/resources/local-hosting/diab/index.html title="Running Demo-in-a-Box (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/index.html title="Splunk IM (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable unsupported-field-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=unsupported-field-workshops>Unsupported Field Workshops</h1><ul class="children children-li children-sort-"><li><a href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/index.html>Splunk IM</a><p>Splunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.</p></li><li><a href=/observability-workshop/v5.92/en/unsupported-field-workshops/3-nodejs-kubernetes/index.html>NodeJS Zero-Config Workshop</a><p>A workshop using Zero Configuration Auto-Instrumentation for NodeJS.</p></li><li><a href=/observability-workshop/v5.92/en/unsupported-field-workshops/8-gdi/index.html>GDI (OTel & UF)</a><p>Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.</p></li><li><a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/index.html>Splunk OnCall</a><p>Make expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running.</p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Unsupported Field Workshops</h1><article class=default><header class=headline></header><h1 id=splunk-im>Splunk IM</h1><p>During this <em><strong>technical</strong></em> Splunk Observability Cloud Infrastructure Monitoring and APM Workshop, you will build out an environment based on a <a href=https://k3s.io/ rel=external target=_blank>lightweight</a> Kubernetes<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> cluster.</p><p>To simplify the workshop modules, a pre-configured AWS/EC2 instance is provided.</p><p>The instance is pre-configured with all the software required to deploy the Splunk OpenTelemetry Connector<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> in Kubernetes, deploy an NGINX^3 ReplicaSet^4 and finally deploy a microservices-based application which has been instrumented using OpenTelemetry to send metrics, traces, spans and logs<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><p>The workshops also introduce you to dashboards, editing and creating charts, creating detectors to fire alerts, Monitoring as Code and the Service Bureau<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p><p>By the end of these technical workshops, you will have a good understanding of some of the key features and capabilities of the Splunk Observability Cloud.</p><p>Here are the instructions on how to access your pre-configured <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/initial-setup/index.html>AWS</a>/<a href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/initial-setup/index.html>EC2 instance</a></p><p><a href=#R-image-8caab10a473675d94bf3733d927722b6 class=lightbox-link><img alt="Splunk Architecture" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/images/architecture.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8caab10a473675d94bf3733d927722b6><img alt="Splunk Architecture" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/images/architecture.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/ rel=external target=_blank><strong>Kubernetes</strong></a> is a portable, extensible, open-source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://opentelemetry.io/ rel=external target=_blank><strong>OpenTelemetry Collector</strong></a> offers a vendor-agnostic implementation on how to receive, process and export telemetry data. In addition, it removes the need to run, operate and maintain multiple agents/collectors to support open-source telemetry data formats (e.g. Jaeger, Prometheus, etc.) sending to multiple open-source or commercial back-ends.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://www.jaegertracing.io/ rel=external target=_blank><strong>Jaeger</strong></a>, inspired by Dapper and OpenZipkin, is a distributed tracing system released as open source by Uber Technologies. It is used for monitoring and troubleshooting microservices-based distributed systems&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://www.splunk.com/en_us/blog/it/monitoring-observability-enterprise-service.html rel=external target=_blank><strong>Monitoring as Code and Service Bureau</strong></a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk IM</h1><article class=default><header class=headline></header><h1 id=how-to-connect-to-your-workshop-environment>How to connect to your workshop environment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<ol><li>How to retrieve the IP address of the AWS/EC2 instance assigned to you.</li><li>Connect to your instance using SSH, Putty<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> or your web browser.</li><li>Verify your connection to your AWS/EC2 cloud instance.</li><li>Using Putty (Optional)</li><li>Using Multipass (Optional)</li></ol><hr><h2 id=1-awsec2-ip-address>1. AWS/EC2 IP Address</h2><p>In preparation for the workshop, Splunk has prepared an Ubuntu Linux instance in AWS/EC2.</p><p>To get access to the instance that you will be using in the workshop please visit the URL to access the Google Sheet provided by the workshop leader.</p><p>Search for your AWS/EC2 instance by looking for your first and last name, as provided during registration for this workshop.</p><p><a href=#R-image-4b9a2913fcc10ba96bd56b21aea25f23 class=lightbox-link><img alt="attendee spreadsheet" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/spreadsheet-info.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4b9a2913fcc10ba96bd56b21aea25f23><img alt="attendee spreadsheet" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/spreadsheet-info.png></a></p><p>Find your allocated IP address, SSH command (for Mac OS, Linux and the latest Windows versions) and password to enable you to connect to your workshop instance.</p><p>It also has the Browser Access URL that you can use in case you cannot connect via ssh or Putty - see <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/initial-setup/index.html#4-web-browser-all>EC2 access via Web browser</a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>Please use SSH or Putty to gain access to your EC2 instance if possible and
make a note of the IP address as you will need this during the workshop.</p></div></details><h2 id=2-ssh-mac-oslinux>2. SSH (Mac OS/Linux)</h2><p>Most attendees will be able to connect to the workshop by using SSH from their Mac or Linux device, or on Windows 10 and above.</p><p>To use SSH, open a terminal on your system and type <code>ssh splunk@x.x.x.x</code> (replacing x.x.x.x with the IP address found in Step #1).</p><p><a href=#R-image-62aa08c6c75c75e5d01736a8d4cf862b class=lightbox-link><img alt="ssh login" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/ssh-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-62aa08c6c75c75e5d01736a8d4cf862b><img alt="ssh login" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/ssh-1.png></a></p><p>When prompted <strong><code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></strong> please type <strong><code>yes</code></strong>.</p><p><a href=#R-image-36e1f9f90dcc0c324f0a4ca4e23977d2 class=lightbox-link><img alt="ssh password" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/ssh-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-36e1f9f90dcc0c324f0a4ca4e23977d2><img alt="ssh password" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/ssh-2.png></a></p><p>Enter the password provided in the Google Sheet from Step #1.</p><p>Upon successful login, you will be presented with the Splunk logo and the Linux prompt.</p><p><a href=#R-image-a03587b9d805ba470735795b2194243f class=lightbox-link><img alt="ssh connected" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/ssh-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a03587b9d805ba470735795b2194243f><img alt="ssh connected" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/ssh-3.png></a></p><h2 id=3-ssh-windows-10-and-above>3. SSH (Windows 10 and above)</h2><p>The procedure described above is the same on Windows 10, and the commands can be executed either in the Windows Command Prompt or PowerShell.
However, Windows regards its SSH Client as an &ldquo;optional feature&rdquo;, which might need to be enabled.</p><p>You can verify if SSH is enabled by simply executing <code>ssh</code></p><p>If you are shown a help text on how to use the ssh-command (like shown on the screenshot below), you are all set.</p><p><a href=#R-image-64e8f66fb87639328dbbf954961ab636 class=lightbox-link><img alt="Windows SSH enabled" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/windows-ssh-enabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64e8f66fb87639328dbbf954961ab636><img alt="Windows SSH enabled" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/windows-ssh-enabled-feedback.png></a></p><p>If the result of executing the command looks something like the screenshot below, you want to enable the &ldquo;OpenSSH Client&rdquo; feature manually.</p><p><a href=#R-image-cae14953ae1712120867fb584be89b5e class=lightbox-link><img alt="Windows SSH disabled" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/windows-ssh-disabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cae14953ae1712120867fb584be89b5e><img alt="Windows SSH disabled" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/windows-ssh-disabled-feedback.png></a></p><p>To do that, open the &ldquo;Settings&rdquo; menu, and click on &ldquo;Apps&rdquo;. While in the &ldquo;Apps & features&rdquo; section, click on &ldquo;Optional features&rdquo;.</p><p><a href=#R-image-7d37be34d41a4ee187a625b779aba516 class=lightbox-link><img alt="Windows Apps Settings" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/windows-gui-optionalfeatures.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7d37be34d41a4ee187a625b779aba516><img alt="Windows Apps Settings" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/windows-gui-optionalfeatures.png></a></p><p>Here, you are presented with a list of installed features. On the top, you see a button with a plus icon to &ldquo;Add a feature&rdquo;. Click it.
In the search input field, type &ldquo;OpenSSH&rdquo;, and find a feature called &ldquo;OpenSSH Client&rdquo;, or respectively, &ldquo;OpenSSH Client (Beta)&rdquo;, click on it, and click the &ldquo;Install&rdquo;-button.</p><p><a href=#R-image-f63ba1d30dda454045fabe49374fff90 class=lightbox-link><img alt="Windows Enable OpenSSH Client" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/windows-enable-openssh-client.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f63ba1d30dda454045fabe49374fff90><img alt="Windows Enable OpenSSH Client" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/windows-enable-openssh-client.png></a></p><p>Now you are set! In case you are not able to access the provided instance despite enabling the OpenSSH feature, please do not shy away from reaching
out to the course instructor, either via chat or directly.</p><p>At this point you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=4-putty-for-windows-versions-prior-to-windows-10>4. Putty (For Windows Versions prior to Windows 10)</h2><p>If you do not have SSH pre-installed or if you are on a Windows system, the best option is to install putty, you can find <a href=https://www.putty.org/ rel=external target=_blank>here.</a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>If you <strong>cannot</strong> install Putty, please go to <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/1-imt/initial-setup/index.html#4-web-browser-all>Web Browser (All)</a>.</p></div></details><p>Open Putty and enter in the <strong>Host Name (or IP address)</strong> field the IP address provided in the Google Sheet.</p><p>You can optionally save your settings by providing a name and pressing <strong>Save</strong>.</p><p><a href=#R-image-b1a32bfc25cb826a25890f75d33e52e5 class=lightbox-link><img alt=putty-2 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//putty-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b1a32bfc25cb826a25890f75d33e52e5><img alt=putty-2 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//putty-settings.png></a></p><p>To then login to your instance click on the <strong>Open</strong> button as shown above.</p><p>If this is the first time connecting to your AWS/EC2 workshop instance, you will be presented with a security dialogue, please click <strong>Yes</strong>.</p><p><a href=#R-image-f90dd9a0b6bd2fbaa744f7dca97e6206 class=lightbox-link><img alt=putty-3 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//putty-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f90dd9a0b6bd2fbaa744f7dca97e6206><img alt=putty-3 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//putty-security.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-219c622d10c96cc55bc47277034fc5a2 class=lightbox-link><img alt=putty-4 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//putty-loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-219c622d10c96cc55bc47277034fc5a2><img alt=putty-4 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//putty-loggedin.png></a></p><p>At this point, you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=5-web-browser-all>5. Web Browser (All)</h2><p>If you are blocked from using SSH (Port 22) or unable to install Putty you may be able to connect to the workshop instance by using a web browser.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This assumes that access to port 6501 is not restricted by your company&rsquo;s firewall.</p></div></details><p>Open your web browser and type <strong><a href=http://x.x.x.x:6501 rel=external target=_blank>http://x.x.x.x:6501</a></strong> (where X.X.X.X is the IP address from the Google Sheet).</p><p><a href=#R-image-9a17622b42e3c54ec153fec8f627e316 class=lightbox-link><img alt=http-6501 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-url.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9a17622b42e3c54ec153fec8f627e316><img alt=http-6501 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-url.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p><a href=#R-image-82716c9fbc71a156faade9d202a16920 class=lightbox-link><img alt=http-connect class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-82716c9fbc71a156faade9d202a16920><img alt=http-connect class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-connect.png></a></p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-0de0256d2cbc2f25729cb4b3e3a8363e class=lightbox-link><img alt="web login" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0de0256d2cbc2f25729cb4b3e3a8363e><img alt="web login" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-login.png></a></p><p>Unlike when you are using regular SSH, <em>copy and paste</em> does require a few extra steps to complete when using a browser session. This is due to cross browser restrictions.</p><p>When the workshop asks you to copy instructions into your terminal, please do the following:</p><p><em>Copy the instruction as normal, but when ready to paste it in the web terminal, choose <strong>Paste from browser</strong> as show below:</em></p><p><a href=#R-image-1ea6e3ea1289ce885e434cdeeee621ee class=lightbox-link><img alt="web paste 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-paste-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1ea6e3ea1289ce885e434cdeeee621ee><img alt="web paste 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-paste-browser.png></a></p><p>This will open a dialogue box asking for the text to be pasted into the web terminal:</p><p><a href=#R-image-7b4330fc9221c8b197e6cc2da4f27fa7 class=lightbox-link><img alt="web paste 3" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-example-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7b4330fc9221c8b197e6cc2da4f27fa7><img alt="web paste 3" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-example-1.png></a></p><p>Paste the text in the text box as shown, then press <strong>OK</strong> to complete the copy and paste process.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Unlike regular SSH connection, the web browser has a 60-second time out, and you will be disconnected, and a <strong>Connect</strong> button will be shown in the center of the web terminal.</p><p>Simply click the <strong>Connect</strong> button and you will be reconnected and will be able to continue.</p></div></details><p><a href=#R-image-3699236f6a52d3991eebdc7fc44147de class=lightbox-link><img alt="web reconnect" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images//shellinabox-reconnect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3699236f6a52d3991eebdc7fc44147de><img alt="web reconnect" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images//shellinabox-reconnect.png></a></p><p>At this point you are ready to continue and <a href=../gdi/index.html>start the workshop</a>.</p><hr><h2 id=6-multipass-all>6. Multipass (All)</h2><p>If you are unable to access AWS, but want to install software locally, follow the instructions for <a href=https://github.com/splunk/observability-workshop/blob/main/multipass/README.md rel=external target=_blank>using Multipass</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.chiark.greenend.org.uk/~sgtatham/putty/ rel=external target=_blank>Download Putty</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-collector-in-kubernetes>Deploying the OpenTelemetry Collector in Kubernetes</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<ul><li>Use the Splunk Helm chart to install the OpenTelemetry Collector in K3s</li><li>Explore your cluster in the Kubernetes Navigator</li></ul><hr><h2 id=1-installation-using-helm>1. Installation using Helm</h2><p>Install the OpenTelemetry Collector using the Splunk Helm chart. First, add the Splunk Helm chart repository to Helm and update:</p><div class=tab-panel data-tab-group=a718ebb721f64057c73a178611f06d13><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=helm-repo-add class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a718ebb721f64057c73a178611f06d13","helm-repo-add")'>
<span class=tab-nav-text>Helm Repo Add</span>
</button>
<button data-tab-item=helm-repo-add-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("a718ebb721f64057c73a178611f06d13","helm-repo-add-output")'>
<span class=tab-nav-text>Helm Repo Add Output</span></button></div><div class=tab-content-container><div data-tab-item=helm-repo-add class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div></div></div><div data-tab-item=helm-repo-add-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Using ACCESS_TOKEN={REDACTED}
Using REALM=eu0
&ldquo;splunk-otel-collector-chart&rdquo; has been added to your repositories
Using ACCESS_TOKEN={REDACTED}
Using REALM=eu0
Hang tight while we grab the latest from your chart repositories&mldr;
&mldr;Successfully got an update from the &ldquo;splunk-otel-collector-chart&rdquo; chart repository
Update Complete. ⎈Happy Helming!⎈</p></div></div></div></div><p>Install the OpenTelemetry Collector Helm chart with the following commands, do <strong>NOT</strong> edit this:</p><div class=tab-panel data-tab-group=e711931986705bcbe08cbd8727e98bbe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=helm-install class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e711931986705bcbe08cbd8727e98bbe","helm-install")'>
<span class=tab-nav-text>Helm Install</span>
</button>
<button data-tab-item=helm-install-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e711931986705bcbe08cbd8727e98bbe","helm-install-output")'>
<span class=tab-nav-text>Helm Install Output</span></button></div><div class=tab-content-container><div data-tab-item=helm-install class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.120.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;logsEngine=otel&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.profilingEnabled=true&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$INSTANCE</span><span class=s2>-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div></div></div><div data-tab-item=helm-install-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Using ACCESS_TOKEN={REDACTED}
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri May  7 11:19:01 2021
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: 1
</span></span><span class=line><span class=cl>TEST SUITE: None</span></span></code></pre></div></div></div></div></div><p>You can monitor the progress of the deployment by running <code>kubectl get pods</code> which should typically report a new pod is up and running after about 30 seconds.</p><p>Ensure the status is reported as Running before continuing.</p><div class=tab-panel data-tab-group=081ef9d96cbb194939cb1bc6603dcac2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-pods class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("081ef9d96cbb194939cb1bc6603dcac2","kubectl-get-pods")'>
<span class=tab-nav-text>Kubectl Get Pods</span>
</button>
<button data-tab-item=kubectl-get-pods-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("081ef9d96cbb194939cb1bc6603dcac2","kubectl-get-pods-output")'>
<span class=tab-nav-text>Kubectl Get Pods Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-pods class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-pods-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                          READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-2sk6k                             0/1     Running   0          10s
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-6956d4446f-gwnd7   0/1     Running   0          10s</span></span></code></pre></div></div></div></div></div><p>Ensure there are no errors by tailing the logs from the OpenTelemetry Collector pod. The output should look similar to the log output shown in the Output tab below.</p><p>Use the label set by the <code>helm</code> install to tail logs (You will need to press <code>ctrl+c</code> to exit). Or use the installed <code>k9s</code> terminal UI for bonus points!</p><div class=tab-panel data-tab-group=6a5a18de79193bbef959da8de9c473f9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-logs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("6a5a18de79193bbef959da8de9c473f9","kubectl-logs")'>
<span class=tab-nav-text>Kubectl Logs</span>
</button>
<button data-tab-item=kubectl-logs-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("6a5a18de79193bbef959da8de9c473f9","kubectl-logs-output")'>
<span class=tab-nav-text>Kubectl Logs Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-logs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector -f --container otel-collector</span></span></code></pre></div></div></div><div data-tab-item=kubectl-logs-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>2021-03-21T16:11:10.900Z INFO service/service.go:364 Starting receivers&mldr;
2021-03-21T16:11:10.900Z INFO builder/receivers_builder.go:70 Receiver is starting&mldr; {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;prometheus&rdquo;, &ldquo;component_name&rdquo;: &ldquo;prometheus&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:75 Receiver started. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;prometheus&rdquo;, &ldquo;component_name&rdquo;: &ldquo;prometheus&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:70 Receiver is starting&mldr; {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.009Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external target=_blank>k8sclusterreceiver@v0.21.0</a>/watcher.go:195 Configured Kubernetes MetadataExporter {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;exporter_name&rdquo;: &ldquo;signalfx&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:75 Receiver started. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.009Z INFO healthcheck/handler.go:128 Health Check state change {&ldquo;component_kind&rdquo;: &ldquo;extension&rdquo;, &ldquo;component_type&rdquo;: &ldquo;health_check&rdquo;, &ldquo;component_name&rdquo;: &ldquo;health_check&rdquo;, &ldquo;status&rdquo;: &ldquo;ready&rdquo;}
2021-03-21T16:11:11.009Z INFO service/service.go:267 Everything is ready. Begin running and processing data.
2021-03-21T16:11:11.009Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external target=_blank>k8sclusterreceiver@v0.21.0</a>/receiver.go:59 Starting shared informers and wait for initial cache sync. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.281Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external target=_blank>k8sclusterreceiver@v0.21.0</a>/receiver.go:75 Completed syncing shared informer caches. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}</p></div></div></div></div><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Deleting a failed installation</summary><div class=box-content><p>If you make an error installing the OpenTelemetry Collector you can start over by deleting the installation using:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><hr><h2 id=2-validate-metrics-in-the-ui>2. Validate metrics in the UI</h2><p>In the Splunk UI, click the <strong>&#187;</strong> bottom left and click on <strong>Infrastructure</strong>.</p><p><a href=#R-image-8c13d808dd8a49a8c450187f67de887c class=lightbox-link><img alt="Selecting the Kubernetes Navigator Map" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/clustermap-nav.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8c13d808dd8a49a8c450187f67de887c><img alt="Selecting the Kubernetes Navigator Map" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/clustermap-nav.png></a></p><p>Under <strong>Containers</strong> click on <strong>Kubernetes</strong> to open the Kubernetes Navigator Cluster Map to ensure metrics are being sent in.</p><p>Validate that your cluster is discovered and reported by finding your cluster (in the workshop you will see many other clusters). To find your cluster name run the following command and copy the output to your clipboard:</p><div class=tab-panel data-tab-group=fd67fcbc1a398ce36b65572919f99ee0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=echo-cluster-name class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fd67fcbc1a398ce36b65572919f99ee0","echo-cluster-name")'>
<span class=tab-nav-text>Echo Cluster Name</span></button></div><div class=tab-content-container><div data-tab-item=echo-cluster-name class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span>-k3s-cluster</span></span></code></pre></div></div></div></div></div><p>Then in the UI, click on the &ldquo;Cluster: - " menu just below the Splunk Logo, paste the Cluster name you just copied into the search box, click the box to select your cluster, and finally click off the menu into white space to apply the filter.</p><p><a href=#R-image-9a5c0e469b91c867abea17b8679f8f34 class=lightbox-link><img alt="K8S Clusters Filter" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/search-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9a5c0e469b91c867abea17b8679f8f34><img alt="K8S Clusters Filter" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/search-k3s-cluster.png></a></p><p><a href=#R-image-d093e5b6f8bae74e5e71259fc66ebba5 class=lightbox-link><img alt="Select K8S Cluster" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/selecting-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d093e5b6f8bae74e5e71259fc66ebba5><img alt="Select K8S Cluster" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/selecting-k3s-cluster.png></a></p><p><a href=#R-image-2c5fbc9896671a33a561920294e3f31b class=lightbox-link><img alt="Filtered K8S Cluster" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/filtered-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c5fbc9896671a33a561920294e3f31b><img alt="Filtered K8S Cluster" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/filtered-k3s-cluster.png></a></p><p>To examine the health of your node, hover over the pale blue background of your cluster, then click on the blue magnifying glass <a href=#R-image-9e946899f95e12b1e2e4e2c5bf907c64 class=lightbox-link><img alt="Magnifying Glass" class="noborder inline lazy lightbox noshadow figure-image" loading=lazy src="../images/blue-cross.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e946899f95e12b1e2e4e2c5bf907c64><img alt="Magnifying Glass" class="noborder inline lazy lightbox noshadow lightbox-image" loading=lazy src="../images/blue-cross.png?classes=inline&height=25px"></a> that appears in the top left-hand corner.</p><p>This will drill down to the node level. Next, open the Metrics sidebar by clicking on the sidebar button.</p><p>Once it is open, you can use the slider on the side to explore the various charts relevant to your cluster/node: CPU, Memory, Network, Events etc.</p><p><a href=#R-image-581f8846bc38dd4b611d5da4fc2ffc02 class=lightbox-link><img alt="Sidebar metrics" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/explore-metrics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-581f8846bc38dd4b611d5da4fc2ffc02><img alt="Sidebar metrics" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/explore-metrics.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 13, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Get Data In</h1><article class=default><header class=headline></header><h1 id=deploying-nginx-in-k3s>Deploying NGINX in K3s</h1><ul><li>Deploy a NGINX ReplicaSet into your K3s cluster and confirm the discovery of your NGINX deployment.</li><li>Run a load test to create metrics and confirm them streaming into Splunk Observability Cloud!</li></ul><hr><h2 id=1-start-your-nginx>1. Start your NGINX</h2><p>Verify the number of pods running in the Splunk UI by selecting the <strong>WORKLOADS</strong> tab. This should give you an overview of the workloads on your cluster.</p><p><a href=#R-image-c8fa02fc6eac2c4b708c15f22a678628 class=lightbox-link><img alt="Workload Agent" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/k8s-workloads.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8fa02fc6eac2c4b708c15f22a678628><img alt="Workload Agent" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/k8s-workloads.png></a></p><p>Note the single agent container running per node among the default Kubernetes pods. This single container will monitor all the pods and services being deployed on this node!</p><p>Now switch back to the default cluster node view by selecting the <strong>MAP</strong> tab and selecting your cluster again.</p><p>In your AWS/EC2 or Multipass shell session change into the <code>nginx</code> directory:</p><div class=tab-panel data-tab-group=f4a8e29d7844065b0ec98ba379fc2a0b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=change-directory class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f4a8e29d7844065b0ec98ba379fc2a0b","change-directory")'>
<span class=tab-nav-text>Change Directory</span></button></div><div class=tab-content-container><div data-tab-item=change-directory class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/k3s/nginx</span></span></code></pre></div></div></div></div></div><hr><h2 id=2-create-nginx-deployment>2. Create NGINX deployment</h2><p>Create the NGINX ConfigMap<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> using the <code>nginx.conf</code> file:</p><div class=tab-panel data-tab-group=067cbcb1a86232ab7cfdc41f23892d69><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-configmap-create class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("067cbcb1a86232ab7cfdc41f23892d69","kubectl-configmap-create")'>
<span class=tab-nav-text>Kubectl Configmap Create</span>
</button>
<button data-tab-item=kubectl-create-configmap-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("067cbcb1a86232ab7cfdc41f23892d69","kubectl-create-configmap-output")'>
<span class=tab-nav-text>Kubectl Create Configmap Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-configmap-create class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create configmap nginxconfig --from-file<span class=o>=</span>nginx.conf</span></span></code></pre></div></div></div><div data-tab-item=kubectl-create-configmap-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>configmap/nginxconfig created</p></div></div></div></div><p>Then create the deployment:</p><div class=tab-panel data-tab-group=1db578bb1252ec21ea3e916d60c72bdd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-create-deployment class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1db578bb1252ec21ea3e916d60c72bdd","kubectl-create-deployment")'>
<span class=tab-nav-text>Kubectl Create Deployment</span>
</button>
<button data-tab-item=kubectl-create-deployment-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("1db578bb1252ec21ea3e916d60c72bdd","kubectl-create-deployment-output")'>
<span class=tab-nav-text>Kubectl Create Deployment Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-create-deployment class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create -f nginx-deployment.yaml</span></span></code></pre></div></div></div><div data-tab-item=kubectl-create-deployment-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>deployment.apps/nginx created
service/nginx created</p></div></div></div></div><p>Next, we will deploy Locust<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> which is an open-source tool used for creating a load test against NGINX:</p><div class=tab-panel data-tab-group=fe37b1c23cead4280fdb8ab01e2406a9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-create-deployment class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fe37b1c23cead4280fdb8ab01e2406a9","kubectl-create-deployment")'>
<span class=tab-nav-text>Kubectl Create Deployment</span>
</button>
<button data-tab-item=kubectl-create-deployment-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("fe37b1c23cead4280fdb8ab01e2406a9","kubectl-create-deployment-output")'>
<span class=tab-nav-text>Kubectl Create Deployment Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-create-deployment class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create -f locust-deployment.yaml</span></span></code></pre></div></div></div><div data-tab-item=kubectl-create-deployment-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>deployment.apps/nginx-loadgenerator created
service/nginx-loadgenerator created</p></div></div></div></div><p>Validate the deployment has been successful and that the Locust and NGINX pods are running.</p><p>If you have the Splunk UI open you should see new Pods being started and containers being deployed.</p><p>It should only take around 20 seconds for the pods to transition into a Running state. In the Splunk UI you will have a cluster that looks like the screenshot below:</p><p><a href=#R-image-1512c11045cfe06b04c2ebd086df3e5d class=lightbox-link><img alt="back to Cluster" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1512c11045cfe06b04c2ebd086df3e5d><img alt="back to Cluster" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/cluster.png></a></p><p>If you select the <strong>WORKLOADS</strong> tab again you will now see that there is a new ReplicaSet and a deployment added for NGINX:</p><p><a href=#R-image-249982ffcb31762a0c0cc1aeea95a604 class=lightbox-link><img alt="NGINX loaded" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/k8s-workloads-nginx.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-249982ffcb31762a0c0cc1aeea95a604><img alt="NGINX loaded" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/k8s-workloads-nginx.png></a></p><hr><p>Let&rsquo;s validate this in your shell as well:</p><div class=tab-panel data-tab-group=f8550258e7b526130b88451c77210458><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-pods class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f8550258e7b526130b88451c77210458","kubectl-get-pods")'>
<span class=tab-nav-text>Kubectl Get Pods</span>
</button>
<button data-tab-item=kubectl-get-pods-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("f8550258e7b526130b88451c77210458","kubectl-get-pods-output")'>
<span class=tab-nav-text>Kubectl Get Pods Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-pods class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-pods-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>NAME READY STATUS RESTARTS AGE
splunk-otel-collector-k8s-cluster-receiver-77784c659c-ttmpk 1/1 Running 0 9m19s
splunk-otel-collector-agent-249rd 1/1 Running 0 9m19s
svclb-nginx-vtnzg 1/1 Running 0 5m57s
nginx-7b95fb6b6b-7sb9x 1/1 Running 0 5m57s
nginx-7b95fb6b6b-lnzsq 1/1 Running 0 5m57s
nginx-7b95fb6b6b-hlx27 1/1 Running 0 5m57s
nginx-7b95fb6b6b-zwns9 1/1 Running 0 5m57s
svclb-nginx-loadgenerator-nscx4 1/1 Running 0 2m20s
nginx-loadgenerator-755c8f7ff6-x957q 1/1 Running 0 2m20s</p></div></div></div></div><hr><h2 id=3-run-locust-load-test>3. Run Locust load test</h2><p>Locust, an open-source load generator, is available on port 8083 of the EC2 instance&rsquo;s IP address. Open a new tab in your web browser and go to <code>http://{==EC2-IP==}:8083/</code>, you will then be able to see the Locust running.</p><p><a href=#R-image-8792baf3158b09d1aa3cf16e6d369bd2 class=lightbox-link><img alt=Locust class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/nginx-locust.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8792baf3158b09d1aa3cf16e6d369bd2><img alt=Locust class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/nginx-locust.png></a></p><p>Set the <strong>Spawn rate</strong> to 2 and click <strong>Start Swarming</strong>.</p><p><a href=#R-image-737318f0ec58bbc572879eb4085a88c2 class=lightbox-link><img alt="Locust Spawn Rate" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/nginx-locust-spawn-rate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-737318f0ec58bbc572879eb4085a88c2><img alt="Locust Spawn Rate" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/nginx-locust-spawn-rate.png></a></p><p>This will start a gentle continuous load on the application.</p><p><a href=#R-image-c627f93aff869e5e06a81e85ff87e9e8 class=lightbox-link><img alt="Locust Statistics" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/nginx-locust-statistics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c627f93aff869e5e06a81e85ff87e9e8><img alt="Locust Statistics" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/nginx-locust-statistics.png></a></p><p>As you can see from the above screenshot, most of the calls will report a fail, this is expected, as we have not yet deployed the application behind it, however, NGINX is reporting on your attempts and you should be able to see those metrics.</p><p>Validate you are seeing those metrics in the UI by selecting <strong>Dashboards → Built-in Dashboard Groups → NGINX → NGINX Servers</strong>. Using the <strong>Overrides</strong> filter on <code>k8s.cluster.name:</code>, find the name of your cluster as returned by <code>echo $INSTANCE-k3s-cluster</code> in the terminal.</p><p><a href=#R-image-2c8d754f42a3a4488fc603f41c7f3820 class=lightbox-link><img alt="NGINX Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/nginx-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c8d754f42a3a4488fc603f41c7f3820><img alt="NGINX Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/nginx-dashboard.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A ConfigMap is an API object used to store non-confidential data in key-value pairs. Pods can consume ConfigMaps as environment variables, command-line arguments, or configuration files in a volume. A ConfigMap allows you to decouple environment-specific configuration from your container images so that your applications are easily portable.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://locust.io/ rel=external target=_blank>What is Locust?</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=working-with-dashboards>Working with Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<ul><li>Introduction to the Dashboards and Charts</li><li>Editing and creating charts</li><li>Filtering and analytical functions</li><li>Using formulas</li><li>Saving charts in a dashboard</li><li>Introduction to SignalFlow</li></ul><hr><h2 id=1-dashboards>1. Dashboards</h2><p>Dashboards are groupings of charts and visualizations of metrics. Well-designed dashboards can provide useful and actionable insight into your system at a glance. Dashboards can be complex or contain just a few charts that drill down only into the data you want to see.</p><p>During this module, we are going to create the following charts and dashboard and connect them to your Team page.</p><p><a href=#R-image-054a73a7e108c74d8f4edcb0a48eb032 class=lightbox-link><img alt="Example Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/example-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-054a73a7e108c74d8f4edcb0a48eb032><img alt="Example Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/example-dashboard.png></a></p><hr><h2 id=2-your-teams-page>2. Your Teams&rsquo; Page</h2><p>Click on the <a href=#R-image-f9591a762c5d4ad02afca41539844bef class=lightbox-link><img alt="Dashboards button" class="noborder inline lazy lightbox noshadow figure-image" loading=lazy src="../images/dashboards.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9591a762c5d4ad02afca41539844bef><img alt="Dashboards button" class="noborder inline lazy lightbox noshadow lightbox-image" loading=lazy src="../images/dashboards.png?classes=inline&height=25px"></a> from the navbar. As you have already been assigned to a team, you will land on the team dashboard. We use the <em><strong>Example Team</strong></em> as an example here. The one in your workshop will be different!</p><p><a href=#R-image-ae96a986d0d4becf87d0780e1b9c8b0d class=lightbox-link><img alt="Team Dashboard1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae96a986d0d4becf87d0780e1b9c8b0d><img alt="Team Dashboard1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/team-dashboard.png></a></p><p>This page shows the total number of team members, how many active alerts for your team and all dashboards that are assigned to your team. Right now there are no dashboards assigned but as stated before, we will add the new dashboard that you will create to your Teams page later.</p><hr><h2 id=3-sample-charts>3. Sample Charts</h2><p>To continue, click on <strong>All Dashboards</strong> in the top right corner of the screen. This brings you to the view that shows all the available dashboards, including the pre-built ones.</p><p><a href=#R-image-158ef79d01b3f0da6022abe43a940d53 class=lightbox-link><img alt="Sample Data" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/sample-data.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-158ef79d01b3f0da6022abe43a940d53><img alt="Sample Data" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/sample-data.png></a></p><p>If you are already receiving metrics from a Cloud API integration or another service through the Splunk Agent you will see relevant dashboards for these services.</p><hr><h2 id=4-inspecting-the-sample-data>4. Inspecting the Sample Data</h2><p>Among the dashboards, you will see a Dashboard group called <strong>Sample Data</strong>. Expand the <strong>Sample Data</strong> dashboard group by clicking on it, and then click on the <strong>Sample Charts</strong> dashboard.</p><p>In the Sample Charts dashboard, you can see a selection of charts that show a sample of the various styles, colors and formats you can apply to your charts in the dashboards.</p><p>Have a look through all the dashboards in this dashboard group (<strong>PART 1</strong>, <strong>PART 2</strong>, <strong>PART 3</strong> and <strong>INTRO TO SPLUNK OBSERVABILITY CLOUD</strong>)</p><p><a href=#R-image-aa8e57fd9ca237ca38f6410198e08103 class=lightbox-link><img alt="Sample Charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/sample-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aa8e57fd9ca237ca38f6410198e08103><img alt="Sample Charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/sample-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Dashboards</h1><article class=default><header class=headline></header><h1 id=editing-charts>Editing charts</h1><h2 id=1-editing-a-chart>1. Editing a chart</h2><p>Select the <strong>SAMPLE CHARTS</strong> dashboard and then click on the three dots <strong><code>...</code></strong> on the <strong>Latency histogram</strong> chart, then on <strong>Open</strong> (or you can click on the name of the chart which here is <strong>Latency histogram</strong>).</p><p><a href=#R-image-da7f70a950f3508d0b9a8cdf18749da7 class=lightbox-link><img alt="Sample Charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/latency-histogram-open.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-da7f70a950f3508d0b9a8cdf18749da7><img alt="Sample Charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/latency-histogram-open.png></a></p><p>You will see the plot options, current plot and signal (metric) for the <strong>Latency histogram</strong> chart in the chart editor UI.</p><p><a href=#R-image-bcdfc9caa71e50230ecdd22372ae1fb7 class=lightbox-link><img alt="Latency Histogram" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/latency-histogram.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bcdfc9caa71e50230ecdd22372ae1fb7><img alt="Latency Histogram" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/latency-histogram.png></a></p><p>In the <strong>Plot Editor</strong> tab under <strong>Signal</strong> you see the metric <strong><code>demo.trans.latency</code></strong> we are currently plotting.</p><p><a href=#R-image-65c510ccf180dc4c5d4e351e39b0dfc8 class=lightbox-link><img alt="Plot Editor" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-65c510ccf180dc4c5d4e351e39b0dfc8><img alt="Plot Editor" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>You will see a number of <strong>Line</strong> plots. The number <strong><code>18 ts</code></strong> indicates that we are plotting 18 metric time series in the chart.</p><p>Click on the different chart type icons to explore each of the visualizations. Notice their name while you swipe over them. For example, click on the Heat Map icon:</p><p><a href=#R-image-552c0276489ef0a5f34de3af0f2805e3 class=lightbox-link><img alt="Chart Types" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Editing-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-552c0276489ef0a5f34de3af0f2805e3><img alt="Chart Types" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Editing-2.png></a></p><p>See how the chart changes to a heat map.</p><p><a href=#R-image-1c01485a81f15e72ddaffc65362a11fb class=lightbox-link><img alt="Change to Heatmap" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/change-to-heatmap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1c01485a81f15e72ddaffc65362a11fb><img alt="Change to Heatmap" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/change-to-heatmap.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>You can use different charts to visualize your metrics - you choose which chart type fits best for the visualization you want to have.</p><p>For more info on the different chart types see <a href=https://docs.splunk.com/Observability/data-visualization/charts/chart-types.html#chart-types rel=external target=_blank>Choosing a chart type.</a></p></div></details><p>Click on the <strong>Line</strong> chart type and you will see the line plot.</p><p><a href=#R-image-0ceebf3b76e86f832ac3a4a2252f2d3e class=lightbox-link><img alt="Line Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Editing-3b.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ceebf3b76e86f832ac3a4a2252f2d3e><img alt="Line Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Editing-3b.png></a></p><h2 id=2-changing-the-time-window>2. Changing the time window</h2><p>You can also increase the time window of the chart by changing the time to <strong>Past 15 minutes</strong> by selecting from the <strong>Time</strong> dropdown.</p><p><a href=#R-image-16ff7107772e6f41783fc24aadf4a0fb class=lightbox-link><img alt="Line Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/line-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-16ff7107772e6f41783fc24aadf4a0fb><img alt="Line Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/line-chart.png></a></p><h2 id=3-viewing-the-data-table>3. Viewing the Data Table</h2><p>Click on the <strong>Data Table</strong> tab.</p><p><a href=#R-image-7452c9ecf3fb56116e3be7da3c42cc50 class=lightbox-link><img alt="Data Table" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/data-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7452c9ecf3fb56116e3be7da3c42cc50><img alt="Data Table" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/data-table.png></a></p><p>You now see 18 rows, each representing a metric time series with a number of columns. These columns represent the dimensions of the metric. The dimensions for <code>demo.trans.latency</code> are:</p><ul><li><code>demo_datacenter</code></li><li><code>demo_customer</code></li><li><code>demo_host</code></li></ul><p>In the <strong><code>demo_datacenter</code></strong> column you see that there are two data centers, <strong>Paris</strong> and <strong>Tokyo</strong>, for which we are getting metrics.</p><p>If you move your cursor over the lines in the chart horizontally you will see the data table update accordingly. If you click on one of the lines in the chart you will see a pinned value appear in the data table.</p><hr><p>Now click on <strong>Plot editor</strong> again to close the Data Table and let&rsquo;s save this chart into a dashboard for later use!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=saving-charts>Saving charts</h1><h2 id=1-saving-a-chart>1. Saving a chart</h2><p>To start saving your chart, lets give it a name and description. Click the name of the chart <strong>Copy of Latency Histogram</strong> and rename it to <strong>&ldquo;Active Latency&rdquo;</strong>.</p><p>To change the description click on <strong>Spread of latency values across time.</strong> and change this to <strong>Overview of latency values in real-time.</strong></p><p><a href=#R-image-86dc7d74fb72cd79975d782c4bf6337b class=lightbox-link><img alt="Save Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/save-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-86dc7d74fb72cd79975d782c4bf6337b><img alt="Save Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/save-chart.png></a></p><p>Click the <span class="btn cstyle blue"><span><span class=title>Save As</span></span></span> button. Make sure your chart has a name, it will use the name <strong>Active Latency</strong> the you defined in the previous step, but you can edit it here if needed.</p><p>Press the <span class="btn cstyle blue"><span><span class=title>Ok</span></span></span>
button to continue.</p><p><a href=#R-image-f9c04d25e4f6f7073340c24cf7536760 class=lightbox-link><img alt="Name Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/name-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9c04d25e4f6f7073340c24cf7536760><img alt="Name Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/name-chart.png></a></p><h2 id=2-creating-a-dashboard>2. Creating a dashboard</h2><p>In the <strong>Choose dashboard</strong> dialog, we need to create a new dashboard, click on the <span class="btn cstyle blue"><span><span class=title>New Dashboard</span></span></span>
button.</p><p><a href=#R-image-ee147337079b46a20fcbc07255d6bc3e class=lightbox-link><img alt="Create Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/create-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ee147337079b46a20fcbc07255d6bc3e><img alt="Create Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/create-dashboard.png></a></p><p>You will now see the <strong>New Dashboard</strong> Dialog. In here you can give you dashboard a name and description, and set <strong>Read and Write Permissions</strong>.</p><p>Please use your own name in the following format to give your dashboard a name e.g. <strong>YOUR_NAME-Dashboard</strong>.</p><p>Please replace <strong>YOUR_NAME</strong> with your own name, change the dashboard permissions to <em>Restricted Read and Write access</em>, and verify your user can read/write.</p><p><a href=#R-image-f8a1dea0f6e7188cd87eae6d81ecf8cf class=lightbox-link><img alt="Name Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/name-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f8a1dea0f6e7188cd87eae6d81ecf8cf><img alt="Name Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/name-dashboard.png></a></p><p>You should see you own login information displayed, meaning you are now the only one who can edit this dashboard. Of course you have the option to add other users or teams from the drop box below that may edit your dashboard and charts, but for now make sure you change it back to <em>Everyone can Read or Write</em> to remove any restrictions and press the <span class="btn cstyle blue"><span><span class=title>Save</span></span></span>
Button to continue.</p><p>Your new dashboard is now available and selected so you can save your chart in your new dashboard.</p><p><a href=#R-image-c79fa365c1c55f64b07e5c8e0425ee79 class=lightbox-link><img alt="Choose Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/choose-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c79fa365c1c55f64b07e5c8e0425ee79><img alt="Choose Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/choose-dashboard.png></a></p><p>Make sure you have your dashboard selected and press the <span class="btn cstyle blue"><span><span class=title>Ok</span></span></span> button.</p><p>You will now be taken to your dashboard like below. You can see at the top left that your <strong>YOUR_NAME-DASHBOARD</strong> is part of a Dashboard Group <strong>YOUR_NAME-Dashboard</strong>. You can add other dashboards to this dashboard group.</p><p><a href=#R-image-62a87ee29dd38ff52a5b5a40742e35be class=lightbox-link><img alt="New Dashboard Group" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/new-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-62a87ee29dd38ff52a5b5a40742e35be><img alt="New Dashboard Group" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/new-dashboard-group.png></a></p><hr><h2 id=3-add-to-team-page>3. Add to Team page</h2><p>It is common practice to link dashboards that are relevant to a Team to a teams page. So let&rsquo;s add your dashboard to the team page for easy access later. Use the <a href=#R-image-272ab1ddd664e950f429a8f1b6e8b9a2 class=lightbox-link><img alt="dashboards button" class="noborder inline lazy lightbox noshadow figure-image" loading=lazy src="../../images/dashboards.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-272ab1ddd664e950f429a8f1b6e8b9a2><img alt="dashboards button" class="noborder inline lazy lightbox noshadow lightbox-image" loading=lazy src="../../images/dashboards.png?classes=inline&height=25px"></a> from the navbar again.</p><p>This will bring you to your teams dashboard, We use the team <em><strong>Example Team</strong></em> as an example here, the workshop one will be different.</p><p><a href=#R-image-50147ab9de6d72eb346a5fab6a2b7ad5 class=lightbox-link><img alt="Team Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-50147ab9de6d72eb346a5fab6a2b7ad5><img alt="Team Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/team-dashboard.png></a></p><p>Press the <span class="btn cstyle white"><span><span class=title>+</span></span></span> <em>Add Dashboard Group</em> button to add you dashboard to the team page.</p><p>This will bring you to the <strong>Select a dashboard group to link to this team</strong> dialog.
Type your name (that you used above) in the search box to find your Dashboard. Select it so its highlighted and click the <strong>Ok</strong> button to add your dashboard.</p><p><a href=#R-image-6d13a4e0a4ba038bb4d9e2e8f1051e62 class=lightbox-link><img alt="Select Dashboard Group" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/select-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d13a4e0a4ba038bb4d9e2e8f1051e62><img alt="Select Dashboard Group" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/select-dashboard-group.png></a></p><p>Your dashboard group will appear as part of the team page. Please note during the course of the workshop many more will appear here.</p><p><a href=#R-image-ed91439502e7c997b632aab911bd469c class=lightbox-link><img alt="New Team Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/new-team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ed91439502e7c997b632aab911bd469c><img alt="New Team Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/new-team-dashboard.png></a></p><hr><p>Now click on the link for your Dashboard to add more charts!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=33-using-filters--formulas>3.3 Using Filters & Formulas</h1><h2 id=1-creating-a-new-chart>1 Creating a new chart</h2><p>Let&rsquo;s now create a new chart and save it in our dashboard!</p><p>Select the plus icon (top right of the UI) and from the drop down, choose the option <strong>Chart</strong>.
Or click on the <span class="btn cstyle blue"><span><span class=title>+ New Chart</span></span></span> Button to create a new chart.</p><p><a href=#R-image-1819c911a2509e8343eb2270b7250e1b class=lightbox-link><img alt="Create new chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1819c911a2509e8343eb2270b7250e1b><img alt="Create new chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-0.png></a></p><p>You will now see a chart template like the following.</p><p><a href=#R-image-aa8b48edc0a58e2ca29194dbdff0d3aa class=lightbox-link><img alt="Empty Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Editing-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aa8b48edc0a58e2ca29194dbdff0d3aa><img alt="Empty Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Editing-6.png></a></p><p>Let&rsquo;s enter a metric to plot. We are still going to use the metric <strong><code>demo.trans.latency</code></strong>.</p><p>In the <strong>Plot Editor</strong> tab under <strong>Signal</strong> enter <strong><code>demo.trans.latency</code></strong>.</p><p><a href=#R-image-a16fbf5bd1d748b768e7bf77440a022e class=lightbox-link><img alt=Signal class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a16fbf5bd1d748b768e7bf77440a022e><img alt=Signal class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>You should now have a familiar line chart. Please switch the time to 15 mins.</p><p><a href=#R-image-d1416d361960267600232585d5c9ec40 class=lightbox-link><img alt=Signal class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-10.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d1416d361960267600232585d5c9ec40><img alt=Signal class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-10.png></a></p><h2 id=2-filtering-and-analytics>2. Filtering and Analytics</h2><p>Let&rsquo;s now select the <strong>Paris</strong> datacenter to do some analytics - for that we will use a filter.</p><p>Let&rsquo;s go back to the <strong>Plot Editor</strong> tab and click on <span class="btn cstyle blue"><span><span class=title>Add Filter</span></span></span>
, wait until it automatically populates, choose <strong><code>demo_datacenter</code></strong>, and then <strong><code>Paris</code></strong>.</p><p><a href=#R-image-a66f3d356c1966407982b25b382c29d5 class=lightbox-link><img alt=Filter class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a66f3d356c1966407982b25b382c29d5><img alt=Filter class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-1.png></a></p><p>In the <strong>F(x)</strong> column, add the analytic function <strong><code>Percentile:Aggregation</code></strong>, and leave the value to <strong><code>95</code></strong> (click outside to confirm).</p><p><a href=#R-image-4b160e52d517a9caa12b9d830fe1619c class=lightbox-link><img alt=Analytics class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4b160e52d517a9caa12b9d830fe1619c><img alt=Analytics class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-2.png></a></p><p>For info on the <strong>Percentile</strong> function and the other functions see <a href=https://docs.splunk.com/Observability/data-visualization/charts/gain-insights-through-chart-analytics.html#gain-insights-through-chart-analytics rel=external target=_blank>Chart Analytics</a>.</p><hr><h2 id=3-using-timeshift-analytical-function>3. Using Timeshift analytical function</h2><p>Let&rsquo;s now compare with older metrics. Click on <strong><code>...</code></strong> and then on <strong>Clone</strong> in the dropdown to clone Signal <strong>A</strong>.</p><p><a href=#R-image-c7892d98879d73be621d69790ca0fe80 class=lightbox-link><img alt="Clone Signal" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c7892d98879d73be621d69790ca0fe80><img alt="Clone Signal" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-3.png></a></p><p>You will see a new row identical to <strong>A</strong>, called <strong>B</strong>, both visible and plotted.</p><p><a href=#R-image-fe6c3c7751e40be7b9befa5fa0095644 class=lightbox-link><img alt="Plot Editor" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fe6c3c7751e40be7b9befa5fa0095644><img alt="Plot Editor" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-4.png></a></p><p>For Signal <strong>B</strong>, in the <strong>F(x)</strong> column add the analytic function <strong>Timeshift</strong> and enter <strong><code>1w</code></strong> (or 7d for 7 days), and click outside to confirm.</p><p><a href=#R-image-b93ea86bc7b2ceee7ebb165e7722cced class=lightbox-link><img alt=Timeshift class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b93ea86bc7b2ceee7ebb165e7722cced><img alt=Timeshift class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-5.png></a></p><p>Click on the cog on the far right, and choose a <strong>Plot Color</strong> e.g. pink, to change color for the plot of <strong>B</strong>.</p><p><a href=#R-image-8d0c597655711e068e0e4f4c99847aae class=lightbox-link><img alt="Change Plot Colour" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8d0c597655711e068e0e4f4c99847aae><img alt="Change Plot Colour" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-6.png></a></p><p>Click on <strong>Close</strong>.</p><p>We now see plots for Signal <strong>A</strong> (the past 15 minutes) as a blue plot, and the plots from a week ago in pink.</p><p>In order to make this clearer we can click on the <strong>Area chart</strong> icon to change the visualization.</p><p><a href=#R-image-5d6ffd76ec44c3bc79dafbede6c8b314 class=lightbox-link><img alt="Area Chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5d6ffd76ec44c3bc79dafbede6c8b314><img alt="Area Chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-8.png></a></p><p>We now can see when last weeks latency was higher!</p><p>Next, click into the field next to <strong>Time</strong> on the Override bar and choose <strong><code>Past Hour</code></strong> from the dropdown.</p><p><a href=#R-image-f2926e559daaa6c03bc3c55a8ffd396e class=lightbox-link><img alt=Timeframe class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-9.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f2926e559daaa6c03bc3c55a8ffd396e><img alt=Timeframe class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-9.png></a></p><hr><h2 id=4-using-formulas>4. Using Formulas</h2><p>Let&rsquo;s now plot the difference of all metric values for a day with 7 days in between.</p><p>Click on <span class="btn cstyle blue"><span><span class=title>Enter Formula</span></span></span>
then enter <strong><code>A-B</code></strong> (A minus B) and hide (deselect) all Signals using the eye, except <strong>C</strong>.</p><p><a href=#R-image-2e7f276859f1deb975e2f15e5d6cf708 class=lightbox-link><img alt=Formulas class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Filter-11.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e7f276859f1deb975e2f15e5d6cf708><img alt=Formulas class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Filter-11.png></a></p><p>We now see only the difference of all metric values of <strong>A</strong> and <strong>B</strong> being plotted. We see that we have some negative values on the plot because a metric value of <strong>B</strong> has some times larger value than the metric value of <strong>A</strong> at that time.</p><p>Lets look at the Signalflow that drives our Charts and Detectors!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=34-signalflow>3.4 SignalFlow</h1><h2 id=1-introduction>1. Introduction</h2><p>Let&rsquo;s take a look at SignalFlow - the analytics language of Observability Cloud that can be used to setup monitoring as code.</p><p>The heart of Splunk Infrastructure Monitoring is the SignalFlow analytics engine that runs computations written in a Python-like language. SignalFlow programs accept streaming input and produce output in real time. SignalFlow provides built-in analytical functions that take metric time series (MTS) as input, perform computations, and output a resulting MTS.</p><ul><li>Comparisons with historical norms, e.g. on a week-over-week basis</li><li>Population overviews using a distributed percentile chart</li><li>Detecting if the rate of change (or other metric expressed as a ratio, such as a service level objective) has exceeded a critical threshold</li><li>Finding correlated dimensions, e.g. to determine which service is most correlated with alerts for low disk space</li></ul><p>Infrastructure Monitoring creates these computations in the Chart Builder user interface, which lets you specify the input MTS to use and the analytical functions you want to apply to them. You can also run SignalFlow programs directly by using the <a href=https://dev.splunk.com/observability/docs/ rel=external target=_blank>SignalFlow API</a>.</p><p>SignalFlow includes a large library of built-in analytical functions that take a metric time series as an input, performs computations on its datapoints, and outputs time series that are the result of the computation.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>For more information on SignalFlow see <a href=https://docs.splunk.com/Observability/infrastructure/analytics/signalflow.html rel=external target=_blank>Analyze incoming data using SignalFlow</a>.</p></div></details><h2 id=2-view-signalflow>2. View SignalFlow</h2><p>In the chart builder, click on <strong>View SignalFlow</strong>.</p><p><a href=#R-image-20eb081168c0ff7360c68be6abd3ac10 class=lightbox-link><img alt=SignalFlow class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/view-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-20eb081168c0ff7360c68be6abd3ac10><img alt=SignalFlow class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/view-signalflow.png></a></p><p>You will see the SignalFlow code that composes the chart we were working on. You can now edit the SignalFlow directly within the UI. Our documentation has the <a href=https://dev.splunk.com/observability/docs/signalflow/function_method_list rel=external target=_blank>full list</a> of SignalFlow functions and methods.</p><p>Also, you can copy the SignalFlow and use it when interacting with the API or with Terraform to enable Monitoring as Code.</p><p><a href=#R-image-84f0b11bed72485a7fe67c984bcd517c class=lightbox-link><img alt=Code class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/show-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-84f0b11bed72485a7fe67c984bcd517c><img alt=Code class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/show-signalflow.png></a></p><div class=tab-panel data-tab-group=36786d04e06c201c00b801ee57a93464><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=signalflow class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("36786d04e06c201c00b801ee57a93464","signalflow")'>
<span class=tab-nav-text>SignalFlow</span></button></div><div class=tab-content-container><div data-tab-item=signalflow class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>A</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>B</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>timeshift</span><span class=p>(</span><span class=s1>&#39;1w&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>C</span> <span class=o>=</span> <span class=p>(</span><span class=n>A</span><span class=o>-</span><span class=n>B</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;C&#39;</span><span class=p>)</span></span></span></code></pre></div></div></div></div></div><p>Click on <strong>View Builder</strong> to go back to the Chart <strong>Builder</strong> UI.</p><p><a href=#R-image-64915af911b29f3c201a1a760e5d63db class=lightbox-link><img alt="View Builder" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/view-builder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64915af911b29f3c201a1a760e5d63db><img alt="View Builder" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/view-builder.png></a></p><p>Let&rsquo;s save this new chart to our Dashboard!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-charts-to-dashboards>Adding charts to dashboards</h1><h2 id=1-save-to-existing-dashboard>1. Save to existing dashboard</h2><p>Check that you have <strong>YOUR_NAME-Dashboard: YOUR_NAME-Dashboard</strong> in the top left corner. This means you chart will be saved in this Dashboard.</p><p>Name the Chart <strong>Latency History</strong> and add a Chart Description if you wish.</p><p><a href=#R-image-3087d3e8e51fb1842e35055903346006 class=lightbox-link><img alt="Save Chart 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3087d3e8e51fb1842e35055903346006><img alt="Save Chart 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-1.png></a></p><p>Click on <span class="btn cstyle transparent"><span><span class=title>Save And Close</span></span></span>. This returns you to your dashboard that now has two charts!</p><p><a href=#R-image-ae40a0e60e5de3f3c8e898569e695677 class=lightbox-link><img alt="Save Chart 2" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae40a0e60e5de3f3c8e898569e695677><img alt="Save Chart 2" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-2.png></a>
Now let&rsquo;s quickly add another Chart based on the previous one.</p><h2 id=2-copy-and-paste-a-chart>2. Copy and Paste a chart</h2><p>Click on the three dots <strong><code>...</code></strong> on the <strong>Latency History</strong> chart in your dashboard and then on <strong>Copy</strong>.</p><p><a href=#R-image-34c1f8a6ba7fecf12f4c951c2434b72a class=lightbox-link><img alt="Copy chart" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34c1f8a6ba7fecf12f4c951c2434b72a><img alt="Copy chart" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-3.png></a></p><p>You see the chart being copied, and you should now have a red circle with a white 1 next to the <strong>+</strong> on the top left of the page.</p><p>Click on the plus icon the top of the page, and then in the menu on <em>Paste Charts</em> (There should also be a red dot with a 1 visible at the end of the line).</p><p><a href=#R-image-272bc40c094a3545ac78aafcbc083cae class=lightbox-link><img alt="Past charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-272bc40c094a3545ac78aafcbc083cae><img alt="Past charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-5.png></a></p><p>This will place a copy of the previous chart in your dashboard.</p><p><a href=#R-image-e79111f030a3cd0a59f786b42f4d9f7a class=lightbox-link><img alt="Three Dashboard" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e79111f030a3cd0a59f786b42f4d9f7a><img alt="Three Dashboard" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-6.png></a></p><h2 id=3-edit-the-pasted-chart>3. Edit the pasted chart</h2><p>Click on the three dots <strong><code>...</code></strong> on one of the <strong>Latency History</strong> charts in your dashboard and then on <strong>Open</strong> (or you can click on the name of the chart which here is <strong>Latency History</strong>).</p><p>This will bring you to the editor environment again.</p><p>First set the time for the chart to -1 hour in the Time box at the top right of the chart. Then to make this a different chart, click on the eye icon in front of signal &ldquo;<em>A</em>&rdquo; to make it visible again, and then hide signal &ldquo;<em>C</em>&rdquo; via the eye icon and change the name for <em>Latency history</em> to <strong>Latency vs Load</strong>.</p><p><a href=#R-image-b5d2764267aa8aa73ac1df054f2a41c0 class=lightbox-link><img alt="Set Visibility" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5d2764267aa8aa73ac1df054f2a41c0><img alt="Set Visibility" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-7.png></a></p><p>Click on the <span class="btn cstyle blue"><span><span class=title>Add Metric Or Event</span></span></span> button. This will bring up the box for a new signal. Type and select <code>demo.trans.count</code> for Signal <strong>D</strong>.</p><p><a href=#R-image-b4beb046d86090b09f1fa5b23249ae7b class=lightbox-link><img alt="Dashboard Info" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b4beb046d86090b09f1fa5b23249ae7b><img alt="Dashboard Info" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-8.png></a></p><p>This will add a new Signal <strong>D</strong> to your chart, It shows the number of active requests. Add the filter for the <em>demo_datacenter:Paris</em>, then change the Rollup type by clicking on the <strong>Configure Plot</strong> button and changing the roll-up from <strong>Auto (Delta)</strong> to <strong>Rate/sec</strong>. Change the name from <strong>demo.trans.count</strong> to <strong>Latency vs Load</strong>.</p><p><a href=#R-image-2f8c481237c383e6ce1fe57b36a6f151 class=lightbox-link><img alt="rollup change" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-9.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f8c481237c383e6ce1fe57b36a6f151><img alt="rollup change" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-9.png></a></p><p>Finally press the <span class="btn cstyle transparent"><span><span class=title>Save And Close</span></span></span> button. This returns you to your dashboard that now has three different charts!</p><p><a href=#R-image-043d257d9d1ea8483b050a4a5156ad50 class=lightbox-link><img alt="three charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-MoreCharts-10.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-043d257d9d1ea8483b050a4a5156ad50><img alt="three charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-MoreCharts-10.png></a></p><p>Let&rsquo;s add an &ldquo;instruction&rdquo; note and arrange the charts!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-notes-and-dashboard-layout>Adding Notes and Dashboard Layout</h1><h2 id=1-adding-notes>1. Adding Notes</h2><p>Often on dashboards it makes sense to place a short &ldquo;instruction&rdquo; pane that helps users of a dashboard. Lets add one now by clicking on the <span class="btn cstyle white"><span><span class=title>New Text Note</span></span></span>
Button.</p><p><a href=#R-image-c12e5880eba6723f2286c8fb249e4840 class=lightbox-link><img alt="three charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c12e5880eba6723f2286c8fb249e4840><img alt="three charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-0.png></a></p><p>This will open the notes editor.</p><p><a href=#R-image-9c19fdf9366a02de8f3b05472072500e class=lightbox-link><img alt="Notes 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c19fdf9366a02de8f3b05472072500e><img alt="Notes 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-1.png></a></p><p>To allow you to add more then just text to you notes, Splunk is allowing you to use Markdown in these notes/panes.
Markdown is a lightweight markup language for creating formatted text using plain-text often used in Webpages.</p><p>This includes (but not limited to):</p><ul><li>Headers. (in various sizes)</li><li>Emphasis styles.</li><li>Lists and Tables.</li><li>Links. These can be external webpages (for documentation for example) or directly to other Splunk IM Dashboards</li></ul><p>Below is an example of above Markdown options you can use in your note.</p><div class=tab-panel data-tab-group=1e66c735575ef9ade98ab0925e7708ab><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=sample-markdown-text class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1e66c735575ef9ade98ab0925e7708ab","sample-markdown-text")'>
<span class=tab-nav-text>Sample Markdown text</span></button></div><div class=tab-content-container><div data-tab-item=sample-markdown-text class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=gh># h1 Big headings
</span></span></span><span class=line><span class=cl><span class=gh></span>
</span></span><span class=line><span class=cl><span class=gu>###### h6 To small headings
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gu>##### Emphasis
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gs>**This is bold text**</span>, <span class=ge>*This is italic text*</span> , <span class=gd>~~Strikethrough~~</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Lists
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>Unordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>+ Create a list by starting a line with <span class=sb>`+`</span>, <span class=sb>`-`</span>, or <span class=sb>`*`</span>
</span></span><span class=line><span class=cl><span class=k>-</span> Sub-lists are made by indenting 2 spaces:
</span></span><span class=line><span class=cl><span class=k>-</span> Marker character change forces new list start:
</span></span><span class=line><span class=cl>    <span class=k>*</span> Ac tristique libero volutpat at
</span></span><span class=line><span class=cl>    + Facilisis in pretium nisl aliquet
</span></span><span class=line><span class=cl><span class=k>*</span> Very easy!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>1.</span> Lorem ipsum dolor sit amet
</span></span><span class=line><span class=cl><span class=k>2.</span> Consectetur adipiscing elit
</span></span><span class=line><span class=cl><span class=k>3.</span> Integer molestie lorem at massa
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Tables
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>| Option | Description |
</span></span><span class=line><span class=cl>| ------ | ----------- |
</span></span><span class=line><span class=cl>| chart  | path to data files to supply the data that will be passed into templates. |
</span></span><span class=line><span class=cl>| engine | engine to be used for processing templates. Handlebars is the default. |
</span></span><span class=line><span class=cl>| ext    | extension to be used for dest files. |
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>#### Links
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>[<span class=nt>link to webpage</span>](<span class=na>https://www.splunk.com</span>)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[<span class=nt>link to dashboard with title</span>](<span class=na>https://app.eu0.signalfx.com/#/dashboard/EaJHrbPAEAA?groupId=EaJHgrsAIAA&amp;configId=EaJHsHzAEAA &#34;Link to the Sample chart Dashboard!&#34;</span>)</span></span></code></pre></div></div></div></div></div><p>Copy the above by using the copy button and paste it in the <em>Edit</em> box.
the preview will show you how it will look.</p><hr><h2 id=2-saving-our-chart>2. Saving our chart</h2><p>Give the Note chart a name, in our example we used <em>Example text chart</em>, then press the <span class="btn cstyle transparent"><span><span class=title>Save And Close</span></span></span> Button.</p><p><a href=#R-image-2b6f4647fce41a1c438f83b48d85f989 class=lightbox-link><img alt="saving note" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2b6f4647fce41a1c438f83b48d85f989><img alt="saving note" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-2.png></a></p><p>This will bring you back to you Dashboard, that now includes the note.</p><p><a href=#R-image-3a0272902dfb1bbf613fa3624be9f3d3 class=lightbox-link><img alt="three charts and note" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3a0272902dfb1bbf613fa3624be9f3d3><img alt="three charts and note" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-3.png></a></p><hr><h2 id=3-ordering--sizing-of-charts>3. Ordering & sizing of charts</h2><p>If you do not like the default order and sizes of your charts you can simply use window dragging technique to move and size them to the desired location.</p><p>Grab the <strong>top</strong> border of a chart and you should see the mouse pointer change to a drag icon (see picture below).</p><p><a href=#R-image-8b3bfb7f8a389f425fba8a41e4b2b53d class=lightbox-link><img alt="dragging charts" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b3bfb7f8a389f425fba8a41e4b2b53d><img alt="dragging charts" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-4.png></a></p><p>Now drag the <strong>Latency vs Load</strong> chart to sit between the <strong>Latency History</strong> Chart and the <strong>Example text chart</strong>.</p><p><a href=#R-image-b8ebb6da37f0c7de98bf5efb200a3b43 class=lightbox-link><img alt=sizing class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b8ebb6da37f0c7de98bf5efb200a3b43><img alt=sizing class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-5.png></a></p><p>You can also resize windows by dragging from the left, right and bottom edges.</p><p>As a last exercise reduce the width of the note chart to about a third of the other charts. The chart will automatically snap to one of the sizes it supports. Widen the 3 other charts to about a third of the Dashboard. Drag the notes to the right of the others and resize it to match it to the 3 others. Set the <strong>Time</strong> to <strong>-1h</strong> and you should have the following dashboard!</p><p><a href=#R-image-87a62dd9c8ac30efe2045320896fef2a class=lightbox-link><img alt=TaDA! class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/M-Notes-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-87a62dd9c8ac30efe2045320896fef2a><img alt=TaDA! class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/M-Notes-6.png></a></p><p>On to Detectors!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=working-with-detectors>Working with Detectors</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>Create a Detector from one of your charts</li><li>Setting Alert conditions</li><li>Running a pre-flight check</li><li>Working with muting rules</li></ul><hr><h2 id=1-introduction>1. Introduction</h2><p>Splunk Observability Cloud uses detectors, events, alerts, and notifications to keep you informed when certain criteria are met. For example, you might want a message sent to a Slack channel or an email address for the Ops team when CPU Utilization has reached 95%, or when the number of concurrent users is approaching a limit that might require you to spin up an additional AWS instance.</p><p>These conditions are expressed as one or more rules that trigger an alert when the conditions in the rules are met. Individual rules in a detector are labeled according to criticality: Info, Warning, Minor, Major, and Critical.</p><h2 id=2-creating-a-detector>2. Creating a Detector</h2><p>In <strong>Dashboards</strong> click on your <strong>Custom Dashboard Group</strong> (that you created in the previous module) and then click on the dashboard name.</p><p><a href=#R-image-1601efb0e0ab2a686291f02c59f38726 class=lightbox-link><img alt="Custom Dashboard Group" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/custom-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1601efb0e0ab2a686291f02c59f38726><img alt="Custom Dashboard Group" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/custom-dashboard-group.png></a></p><p>We are now going to create a new detector from a chart on this dashboard. Click on the bell icon on the <strong>Latency vs Load</strong> chart, and then click <strong>New Detector From Chart</strong>.</p><p><a href=#R-image-bd630efb78aa4f093a0ea0d86d1dfc27 class=lightbox-link><img alt="New Detector" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/new-detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bd630efb78aa4f093a0ea0d86d1dfc27><img alt="New Detector" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/new-detector.png></a></p><p>In the text field next to <strong>Detector Name</strong>, <strong>ADD YOUR INITIALS</strong> before the proposed detector name.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Naming the detector</summary><div class=box-content><p>It&rsquo;s important that you add your initials in front of the proposed detector name.</p><p>It should be something like this: <strong>XYZ&rsquo;s Latency Chart Detector</strong>.</p></div></details><p>Click on <span class="btn cstyle blue"><span><span class=title>Create Alert Rule</span></span></span></p><p><a href=#R-image-ddee04eef416e670be12bd5b8a064693 class=lightbox-link><img alt="Create Alert Rule" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/create-alert-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ddee04eef416e670be12bd5b8a064693><img alt="Create Alert Rule" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/create-alert-rule.png></a></p><p>In the Detector window, inside <strong>Alert signal</strong>, the Signal we will alert on is marked with a (blue) bell in the <strong>Alert on</strong> column. The bell indicates which Signal is being used to generate the alert.</p><p>Click on <span class="btn cstyle blue"><span><span class=title>Proceed to Alert Condition</span></span></span></p><p><a href=#R-image-cdd6b190614aa579ec4d9b99789f6399 class=lightbox-link><img alt="Alert Signal" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/alert-signal.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cdd6b190614aa579ec4d9b99789f6399><img alt="Alert Signal" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/alert-signal.png></a></p><h2 id=3-setting-alert-condition>3. Setting Alert condition</h2><p>In <strong>Alert condition</strong>, click on <strong>Static Threshold</strong> and then on <span class="btn cstyle blue"><span><span class=title>Proceed to Alert Settings</span></span></span></p><p><a href=#R-image-4cde4afabd81b445244b265210b1ec39 class=lightbox-link><img alt="Alert Condition" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/alert-condition.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4cde4afabd81b445244b265210b1ec39><img alt="Alert Condition" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/alert-condition.png></a></p><p>In <strong>Alert Settings</strong>, enter the value <strong><code>290</code></strong> in the <strong>Threshold</strong> field. In the same window change <strong>Time</strong> on top right to past day (<strong>-1d</strong>).</p><hr><h2 id=4-alert-pre-flight-check>4. Alert pre-flight check</h2><p>A pre-flight check will take place after 5 seconds. See the <strong>Estimated alert count</strong>. Based on the current alert settings, the amount of alerts we would have received in 1 day would have been <strong>3</strong>.</p><p><a href=#R-image-30f0c46b74b402bb1ab9c180333cc34c class=lightbox-link><img alt="Alert Threshold" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/alert-threshold.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-30f0c46b74b402bb1ab9c180333cc34c><img alt="Alert Threshold" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/alert-threshold.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
About pre-flight checks</summary><div class=box-content><p>Once you set an alert condition, the UI estimates how many alerts you might get based on the current settings, and in the timeframe set on the upper right corner - in this case, the past day.</p><p>Immediately, the platform will start analyzing the signals with the current settings, and perform something we call a Pre-flight Check. This enables you to test the alert conditions using the historical data in the platform, to ensure the settings are logical and will not inadvertently generate an alert storm, removing the guesswork from configuring alerts in a simple but very powerful way, only available using the Splunk Observability Cloud.</p><p>To read more about detector previewing, please visit this link
<a href=https://docs.splunk.com/Observability/alerts-detectors-notifications/preview-detector-alerts.html#nav-Preview-detector-alerts rel=external target=_blank>Preview detector alerts.</a></p></div></details><p>Click on <span class="btn cstyle blue"><span><span class=title>Proceed to Alert Message</span></span></span></p><hr><h2 id=5-alert-message>5. Alert message</h2><p>In <strong>Alert message</strong>, under <strong>Severity</strong> choose <strong>Major</strong>.</p><p><a href=#R-image-f599534af07b7bb1956fd42e396c1d6d class=lightbox-link><img alt="Alert Message" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/alert-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f599534af07b7bb1956fd42e396c1d6d><img alt="Alert Message" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/alert-message.png></a></p><p>Click on <span class="btn cstyle blue"><span><span class=title>Proceed to Alert Recipients</span></span></span></p><p>Click on <strong>Add Recipient</strong> and then on your email address displayed as the first option.</p><p><a href=#R-image-f744a04f2a3d7664623e06ea05c7d63c class=lightbox-link><img alt="Add Recipient" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/add-recipient.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f744a04f2a3d7664623e06ea05c7d63c><img alt="Add Recipient" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/add-recipient.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Notification Services</summary><div class=box-content><p>That&rsquo;s the same as entering that email address OR you can enter another email address by clicking on <strong>E-mail&mldr;</strong>.</p><p>This is just one example of the many <strong>Notification Services</strong> the platform has available. You can check this out by going to the <strong>Integrations</strong> tab of the top menu, and see <strong>Notification Services</strong>.</p></div></details><hr><h2 id=6-alert-activation>6. Alert Activation</h2><p>Click on <span class="btn cstyle blue"><span><span class=title>Proceed to Alert Activation</span></span></span></p><p>In <strong>Activate&mldr;</strong> click on <span class="btn cstyle blue"><span><span class=title>Activate Alert Rule</span></span></span></p><p><a href=#R-image-4916571bb1244808dedb8b35876bde69 class=lightbox-link><img alt="Activate Alert" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/activate-alert.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4916571bb1244808dedb8b35876bde69><img alt="Activate Alert" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/activate-alert.png></a></p><p>If you want to get alerts quicker you edit the rule and lower the value from <strong><code>290</code></strong> to say <strong><code>280</code></strong>.</p><p>If you change the <strong>Time</strong> to <strong>-1h</strong> you can see how many alerts you might get with the threshold you have chosen based on the metrics from the last 1 hour.</p><p>Click on the <a href=#R-image-2fc5b366ee0badbcbcb29cecac4db76f class=lightbox-link><img alt="alerts and detectors button" class="noborder inline lazy lightbox noshadow figure-image" loading=lazy src="../images/alerts-and-detectors.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2fc5b366ee0badbcbcb29cecac4db76f><img alt="alerts and detectors button" class="noborder inline lazy lightbox noshadow lightbox-image" loading=lazy src="../images/alerts-and-detectors.png?classes=inline&height=25px"></a> in the navbar and then click on <strong>Detectors</strong>. You can optionally filter for your initials. You will see you detector listed here. If you don&rsquo;t then please refresh your browser.</p><p><a href=#R-image-293ddc853031554b42c7cf35b7ac47d5 class=lightbox-link><img alt="Detector List" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-293ddc853031554b42c7cf35b7ac47d5><img alt="Detector List" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/detectors.png></a></p><p><strong>Congratulations</strong>! You have created your first detector and activated it!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Detectors</h1><article class=default><header class=headline></header><h1 id=working-with-muting-rules>Working with Muting Rules</h1><ul><li>Learn how to configure Muting Rules</li><li>Learn how to resume notifications</li></ul><hr><h2 id=1-configuring-muting-rules>1. Configuring Muting Rules</h2><p>There will be times when you might want to mute certain notifications. For example, if you want to schedule downtime for maintenance on a server or set of servers, or if you are testing new code or settings etc. For that you can use muting rules in Splunk Observability Cloud. Let&rsquo;s create one!</p><p>Click on <strong>Alerts & Detectors</strong> in the sidebar and then click <strong>Detectors</strong> to see the list of active detectors.</p><p><a href=#R-image-463a8de2a110dd8d531eac3a1f414090 class=lightbox-link><img alt="detectors list" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-463a8de2a110dd8d531eac3a1f414090><img alt="detectors list" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/detectors.png></a></p><p>If you created a detector in <strong>Creating a Detector</strong> you can click on the three dots <strong><code>...</code></strong> on the far right for that detector; if not, do that for another detector.</p><p>From the drop-down click on <strong>Create Muting Rule&mldr;</strong></p><p><a href=#R-image-81650b6a51a4aeee65afdfc94592d590 class=lightbox-link><img alt="Create Muting Rule" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/create-muting-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-81650b6a51a4aeee65afdfc94592d590><img alt="Create Muting Rule" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/create-muting-rule.png></a></p><p>In the <strong>Muting Rule</strong> window check <strong>Mute Indefinitely</strong> and enter a reason.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>This will mute the notifications permanently until you come back here and un-check this box or resume notifications for this detector.</p></div></details><p><a href=#R-image-29214adf6d7306136672502e84969a48 class=lightbox-link><img alt="Mute Indefinitely" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/mute-indefinitely.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-29214adf6d7306136672502e84969a48><img alt="Mute Indefinitely" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/mute-indefinitely.png></a></p><p>Click <strong>Next</strong> and in the new modal window confirm the muting rule setup.</p><p><a href=#R-image-5bdd63293fed08915e29af4ad471cacb class=lightbox-link><img alt="Confirm Rule" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/confirm-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5bdd63293fed08915e29af4ad471cacb><img alt="Confirm Rule" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/confirm-rule.png></a></p><p>Click on <span class="btn cstyle blue"><span><span class=title>Mute Indefinitely</span></span></span> to confirm.</p><p><a href=#R-image-9733da1e54f4305d9ca35a996118adca class=lightbox-link><img alt="List muted rule" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/alert-muted.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9733da1e54f4305d9ca35a996118adca><img alt="List muted rule" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/alert-muted.png></a></p><p>You won&rsquo;t be receiving any email notifications from your detector until you resume notifications again. Let&rsquo;s now see how to do that!</p><hr><h2 id=2-resuming-notifications>2. Resuming notifications</h2><p>To Resume notifications, click on <strong>Muting Rules</strong>, you will see the name of the detector you muted notifications for under <strong>Detector</strong> heading.</p><p>Click on the thee dots <strong><code>...</code></strong> on the far right, and click on <strong>Resume Notifications</strong>.</p><p><a href=#R-image-182b4e03d6a9b90af16ad91c5997e921 class=lightbox-link><img alt=Resume class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/muting-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-182b4e03d6a9b90af16ad91c5997e921><img alt=Resume class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/muting-list.png></a></p><p>Click on <span class="btn cstyle blue"><span><span class=title>Resume</span></span></span> to confirm and resume notifications for this detector.</p><p><a href=#R-image-2e04573591fda92abbaa55c7338a7aeb class=lightbox-link><img alt=Resume class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/resume.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e04573591fda92abbaa55c7338a7aeb><img alt=Resume class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/resume.png></a></p><p><strong>Congratulations!</strong> You have now resumed your alert notifications!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=monitoring-as-code>Monitoring as Code</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>Use Terraform<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to manage Observability Cloud Dashboards and Detectors</li><li>Initialize the Terraform Splunk Provider<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</li><li>Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider.</li><li>See how Terraform can also delete detectors and dashboards.</li></ul><hr><h2 id=1-initial-setup>1. Initial setup</h2><p>Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.</p><p>You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused.</p><p>Full documentation for the Splunk Terraform Provider is available <a href=https://registry.terraform.io/providers/splunk-terraform/signalfx/latest/docs rel=external target=_blank><strong>here</strong></a>.</p><p>Remaining in your AWS/EC2 instance, change into the <code>o11y-cloud-jumpstart</code> directory</p><div class=tab-panel data-tab-group=c50ee8d4b3a60fc938547070067b49f4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=change-directory class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c50ee8d4b3a60fc938547070067b49f4","change-directory")'>
<span class=tab-nav-text>Change directory</span></button></div><div class=tab-content-container><div data-tab-item=change-directory class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/observability-content-contrib/integration-examples/terraform-jumpstart</span></span></code></pre></div></div></div></div></div><p>Initialize Terraform and upgrade to the latest version of the Splunk Terraform Provider.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note: Upgrading the SignalFx Terraform Provider</summary><div class=box-content><p>You will need to run the command below each time a new version of the Splunk Terraform Provider is released. You can track the releases on <a href=https://github.com/splunk-terraform/terraform-provider-signalfx/releases rel=external target=_blank>GitHub.</a></p></div></details><div class=tab-panel data-tab-group=36f15a1c2405faecc864bb8fe8cab9ad><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=initialise-terraform class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("36f15a1c2405faecc864bb8fe8cab9ad","initialise-terraform")'>
<span class=tab-nav-text>Initialise Terraform</span>
</button>
<button data-tab-item=initialise-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("36f15a1c2405faecc864bb8fe8cab9ad","initialise-output")'>
<span class=tab-nav-text>Initialise Output</span></button></div><div class=tab-content-container><div data-tab-item=initialise-terraform class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init -upgrade</span></span></code></pre></div></div></div><div data-tab-item=initialise-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    Upgrading modules...
</span></span><span class=line><span class=cl>    - aws in modules/aws
</span></span><span class=line><span class=cl>    - azure in modules/azure
</span></span><span class=line><span class=cl>    - docker in modules/docker
</span></span><span class=line><span class=cl>    - gcp in modules/gcp
</span></span><span class=line><span class=cl>    - host in modules/host
</span></span><span class=line><span class=cl>    - kafka in modules/kafka
</span></span><span class=line><span class=cl>    - kubernetes in modules/kubernetes
</span></span><span class=line><span class=cl>    - parent_child_dashboard in modules/dashboards/parent
</span></span><span class=line><span class=cl>    - pivotal in modules/pivotal
</span></span><span class=line><span class=cl>    - rum_and_synthetics_dashboard in modules/dashboards/rum_and_synthetics
</span></span><span class=line><span class=cl>    - usage_dashboard in modules/dashboards/usage
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing the backend...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing provider plugins...
</span></span><span class=line><span class=cl>    - Finding latest version of splunk-terraform/signalfx...
</span></span><span class=line><span class=cl>    - Installing splunk-terraform/signalfx v6.20.0...
</span></span><span class=line><span class=cl>    - Installed splunk-terraform/signalfx v6.20.0 (self-signed, key ID CE97B6074989F138)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Partner and community providers are signed by their developers.
</span></span><span class=line><span class=cl>    If you&#39;d like to know more about provider signing, you can read about it here:
</span></span><span class=line><span class=cl>    https://www.terraform.io/docs/cli/plugins/signing.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has created a lock file .terraform.lock.hcl to record the provider
</span></span><span class=line><span class=cl>    selections it made above. Include this file in your version control repository
</span></span><span class=line><span class=cl>    so that Terraform can guarantee to make the same selections by default when
</span></span><span class=line><span class=cl>    you run &#34;terraform init&#34; in the future.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has been successfully initialized!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    You may now begin working with Terraform. Try running &#34;terraform plan&#34; to see
</span></span><span class=line><span class=cl>    any changes that are required for your infrastructure. All Terraform commands
</span></span><span class=line><span class=cl>    should now work.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    If you ever set or change modules or backend configuration for Terraform,
</span></span><span class=line><span class=cl>    rerun this command to reinitialize your working directory. If you forget, other
</span></span><span class=line><span class=cl>    commands will detect it and remind you to do so if necessary.</span></span></code></pre></div></div></div></div></div><h2 id=2-create-execution-plan>2. Create execution plan</h2><p>The <code>terraform plan</code> command creates an execution plan. By default, creating a plan consists of:</p><ul><li>Reading the current state of any already-existing remote objects to make sure that the Terraform state is up-to-date.</li><li>Comparing the current configuration to the prior state and noting any differences.</li><li>Proposing a set of change actions that should, if applied, make the remote objects match the configuration.</li></ul><p>The plan command alone will not actually carry out the proposed changes, and so you can use this command to check whether the proposed changes match what you expected before you apply the changes</p><div class=tab-panel data-tab-group=e7a8064cfc6639d2985f8e89355a41b8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=execution-plan class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e7a8064cfc6639d2985f8e89355a41b8","execution-plan")'>
<span class=tab-nav-text>Execution Plan</span>
</button>
<button data-tab-item=execution-plan-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e7a8064cfc6639d2985f8e89355a41b8","execution-plan-output")'>
<span class=tab-nav-text>Execution Plan Output</span></button></div><div class=tab-content-container><div data-tab-item=execution-plan class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform plan -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=execution-plan-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Plan: 146 to add, 0 to change, 0 to destroy.</span></span></code></pre></div></div></div></div></div><p>If the plan executes successfully, we can go ahead and apply:</p><hr><h2 id=3-apply-execution-plan>3. Apply execution plan</h2><p>The <code>terraform apply</code> command executes the actions proposed in the Terraform plan above.</p><p>The most straightforward way to use <code>terraform apply</code> is to run it without any arguments at all, in which case it will automatically create a new execution plan (as if you had run terraform plan) and then prompt you to provide the API Token, Realm (the prefix defaults to <code>Splunk</code>) and approve the plan, before taking the indicated actions.</p><p>Due to this being a workshop it is required that the prefix is to be unique so you need to run the <code>terraform apply</code> below.</p><div class=tab-panel data-tab-group=980456e749d694bed08672914d38c9dc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=apply-plan class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("980456e749d694bed08672914d38c9dc","apply-plan")'>
<span class=tab-nav-text>Apply Plan</span>
</button>
<button data-tab-item=apply-plan-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("980456e749d694bed08672914d38c9dc","apply-plan-output")'>
<span class=tab-nav-text>Apply Plan Output</span></button></div><div class=tab-content-container><div data-tab-item=apply-plan class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=apply-plan-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Apply complete! Resources: 146 added, 0 changed, 0 destroyed.</span></span></code></pre></div></div></div></div></div><p>Once the apply has been completed, validate that the detectors were created, under the <strong>Alerts & Detectors</strong> and click on the <strong>Detectors</strong> tab. They will be prefixed by the instance name. To check the prefix value run:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span></span></span></code></pre></div><p>You will see a list of the new detectors and you can search for the prefix that was output from above.</p><p><a href=#R-image-c2015cf3da4673e70ad8278417bcf131 class=lightbox-link><img alt=Detectors class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c2015cf3da4673e70ad8278417bcf131><img alt=Detectors class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/detectors.png></a></p><h2 id=3-destroy-all-your-hard-work>3. Destroy all your hard work</h2><p>The <code>terraform destroy</code> command is a convenient way to destroy all remote objects managed by your Terraform configuration.</p><p>While you will typically not want to destroy long-lived objects in a production environment, Terraform is sometimes used to manage ephemeral infrastructure for development purposes, in which case you can use <code>terraform destroy</code> to conveniently clean up all of those temporary objects once you are finished with your work.</p><p>Now go and destroy all the Detectors and Dashboards that were previously applied!</p><div class=tab-panel data-tab-group=e96b0e3ff480417cf7347391e544a7c7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=destroy class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e96b0e3ff480417cf7347391e544a7c7","destroy")'>
<span class=tab-nav-text>Destroy</span>
</button>
<button data-tab-item=destroy-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e96b0e3ff480417cf7347391e544a7c7","destroy-output")'>
<span class=tab-nav-text>Destroy Output</span></button></div><div class=tab-content-container><div data-tab-item=destroy class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=destroy-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Destroy complete! Resources: 146 destroyed.</span></span></code></pre></div></div></div></div></div><p>Validate all the detectors have been removed by navigating to <em><strong>Alerts → Detectors</strong></em></p><p><a href=#R-image-2f93ad6145ef3915de8a8e594843ccce class=lightbox-link><img alt=Destroyed class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/destroy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f93ad6145ef3915de8a8e594843ccce><img alt=Destroyed class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/destroy.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Terraform is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>A provider is responsible for understanding API interactions and exposing resources. Providers generally are an IaaS (e.g. Alibaba Cloud, AWS, GCP, Microsoft Azure, OpenStack), PaaS (e.g. Heroku), or SaaS services (e.g. Splunk, Terraform Cloud, DNSimple, Cloudflare).&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=service-bureau>Service Bureau</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>How to keep track of the usage of Observability Cloud in your organization</li><li>Learn how to keep track of spend by exploring the Subscription Usage interface</li><li>Creating Teams</li><li>Adding notification rules to Teams</li><li>Controlling usage</li></ul><hr><h2 id=1-understanding-engagement>1. Understanding engagement</h2><p>To fully understand Observability Cloud engagement inside your organization, click on the <strong>&#187;</strong> bottom left and select the <strong>Settings → Organization Overview</strong>, this will provide you with the following dashboards that show you how your Observability Cloud organization is being used:</p><p><a href=#R-image-a472f42dcd1a116413a844a8a98ec29c class=lightbox-link><img alt="Organization Overview" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/engagement.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a472f42dcd1a116413a844a8a98ec29c><img alt="Organization Overview" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/engagement.png></a></p><p>You will see various dashboards such as Throttling, System Limits, Entitlements & Engagement. The workshop organization you&rsquo;re using now may have less data to work with as this is cleared down after each workshop.</p><p>Take a minute to explore the various dashboards and charts in the Organization Overview of this workshop instance.</p><h2 id=2-subscription-usage>2. Subscription Usage</h2><p>If you want to see what your usage is against your subscription you can select <strong>Subscription Usage</strong>.</p><p><a href=#R-image-995cfa37828e5ab583ba98096b8c72f3 class=lightbox-link><img alt="Left pane" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/billing-and-usage-menu.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-995cfa37828e5ab583ba98096b8c72f3><img alt="Left pane" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/billing-and-usage-menu.png></a></p><p>This screen may take a few seconds to load whilst it calculates and pulls in the usage.</p><h2 id=3-understanding-usage>3. Understanding usage</h2><p>You will see a screen similar to the one below that will give you an overview of the current usage, the average usage and your entitlement per category: Hosts, Containers, Custom Metrics and High Resolution Metrics.</p><p>For more information about these categories please refer to <a href=https://docs.splunk.com/Observability/admin/monitor-imm-billing-usage.html rel=external target=_blank>Monitor Splunk Infrastructure Monitoring subscription usage</a>.</p><p><a href=#R-image-553656f5c72b34f1e085f6445a32a226 class=lightbox-link><img alt="Billing and Usage" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/usage-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-553656f5c72b34f1e085f6445a32a226><img alt="Billing and Usage" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/usage-charts.png></a></p><hr><h2 id=4-examine-usage-in-detail>4. Examine usage in detail</h2><p>The top chart shows you the current subscription levels per category (shown by the red arrows at the top in the screenshot below).</p><p>Also, your current usage of the four categories is displayed (shown in the red lines at the bottom of the chart).</p><p>In this example, you can see that there are 25 Hosts, 0 Containers, 100 Custom Metrics and 0 High Resolution Metrics.</p><p><a href=#R-image-abb4b15ada1b7e04160435f5d0c2b61a class=lightbox-link><img alt="Billing and Usage-top" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/usage-detail.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-abb4b15ada1b7e04160435f5d0c2b61a><img alt="Billing and Usage-top" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/usage-detail.png></a></p><p>In the bottom chart, you can see the usage per category for the current period (shown in the drop-down box on the top right of the chart).</p><p>The blue line marked <strong>Average Usage</strong> indicates what Observability Cloud will use to calculate your average usage for the current Subscription Usage Period.</p><p><a href=#R-image-6a53ef3b15641300a56ef7340e8b4a82 class=lightbox-link><img alt="Billing and Usage-Bottom" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/usage-trends.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6a53ef3b15641300a56ef7340e8b4a82><img alt="Billing and Usage-Bottom" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/usage-trends.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>As you can see from the screenshot, Observability Cloud does not use High Watermark or P95% for cost calculation but the actual average hourly usage, allowing you to do performance testing or Blue/Green style deployments etc. without the risk of overage charges.</p></div></details><p>To get a feel for the options you can change the metric displayed by selecting the different options from the <strong>Usage Metric</strong> drop-down on the left, or change the <strong>Subscription Usage Period</strong> with the drop-down on the right.</p><p>Please take a minute to explore the different time periods & categories and their views.</p><p>Finally, the pane on the right shows you information about your Subscription.</p><p><a href=#R-image-070433aa32501f5f90b6b32a64d96bd6 class=lightbox-link><img alt="Billing and Usage-Pane" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/subscription.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-070433aa32501f5f90b6b32a64d96bd6><img alt="Billing and Usage-Pane" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/subscription.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Service Bureau</h1><article class=default><header class=headline></header><h1 id=teams>Teams</h1><ul><li>Introduction to Teams</li><li>Create a Team and add members to the Team</li></ul><hr><h2 id=1-introduction-to-teams>1. Introduction to Teams</h2><p>To make sure that users see the dashboards and alerts that are relevant to them when using Observability Cloud, most organizations will use Observability Cloud&rsquo;s Teams feature to assign a member to one or more Teams.</p><p>Ideally, this matches work-related roles, for example, members of a Dev-Ops or Product Management group would be assigned to the corresponding Teams in Observability Cloud.</p><p>When a user logs into Observability Cloud, they can choose which Team Dashboard will be their home page and they will typically select the page for their primary role.</p><p>In the example below, the user is a member of the Development, Operations and Product Management Teams, and is currently viewing the Dashboard for the Operations Team.</p><p>This Dashboard has specific Dashboard Groups for Usage, SaaS and APM Business Workflows assigned but any Dashboard Group can be linked to a Teams Dashboard.</p><p>They can use the menu along the top left to quickly navigate between their allocated teams, or they can use the <strong>ALL TEAMS</strong> dropdown on the right to select specific Team Dashboards, as well as quickly access <strong>ALL Dashboards</strong>** using the adjacent link.</p><p><a href=#R-image-d68a7446944485980d5373a6c7871249 class=lightbox-link><img alt=Teams class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/teams-homepage.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d68a7446944485980d5373a6c7871249><img alt=Teams class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/teams-homepage.png></a></p><p>Alerts can be linked to specific Teams so the Team can monitor only the Alerts they are interested in, and in the above example, they currently have 1 active Critical Alert.</p><p>The Description for the Team Dashboard can be customized and can include links to team-specific resources (using Markdown).</p><hr><h2 id=2-creating-a-new-team>2. Creating a new Team</h2><p>To work with Splunk&rsquo;s Team UI click on the hamburger icon top left and select the <strong>Organizations Settings → Teams</strong>.</p><p>When the <strong>Team</strong> UI is selected you will be presented with the list of current Teams.</p><p>To add a new <strong>Team</strong> click on the <span class="btn cstyle blue"><span><span class=title>Create New Team</span></span></span> button. This will present you with the <strong>Create New Team</strong> dialog.</p><p><a href=#R-image-6d4a383d1241ff2062f7dd44b70dfbdf class=lightbox-link><img alt="Add Team" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/create-new-team.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d4a383d1241ff2062f7dd44b70dfbdf><img alt="Add Team" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/create-new-team.png></a></p><p>Create your own team by naming it <code>[YOUR-INITIALS]-Team and</code> add yourself by searching for your name and selecting the <strong>Add</strong> link next to your name. This should result in a dialog similar to the one below:</p><p><a href=#R-image-24cedbe98daa079f2ceb41fbb9672e5b class=lightbox-link><img alt="Add Team complete" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/add-to-team.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-24cedbe98daa079f2ceb41fbb9672e5b><img alt="Add Team complete" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/add-to-team.png></a></p><p>You can remove selected users by pressing <strong>Remove</strong> or the small <strong>x</strong>.</p><p>Make sure you have your group created with your initials and with yourself added as a member, then click <span class="btn cstyle blue"><span><span class=title>Done</span></span></span></p><p>This will bring you back to the <strong>Teams</strong> list that will now show your Team and the ones created by others.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>The Teams(s) you are a member of have a grey <strong>Member</strong> icon in front of it.</p></div></details><p>If no members are assigned to your Team, you should see a blue <strong>Add Members</strong> link instead of the member count, clicking on that link will get you to the <strong>Edit Team</strong> dialog where you can add yourself.</p><p>This is the same dialog you get when pressing the 3 dots <strong>&mldr;</strong> at the end of the line with your Team and selecting <strong>Edit Team</strong></p><p>The <strong>&mldr;</strong> menu gives you the option to Edit, Join, Leave or Delete a Team (leave and join will depend on if you are currently a member).</p><hr><h2 id=3-adding-notification-rules>3. Adding Notification Rules</h2><p>You can set up specific Notification rules per team, by clicking on the <strong>Notification Policy</strong> tab, this will open the notification edit menu.</p><p><a href=#R-image-984254aad06d868d46c474b971346f17 class=lightbox-link><img alt="Base notification menu" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/notification-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-984254aad06d868d46c474b971346f17><img alt="Base notification menu" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/notification-policy.png></a></p><p>By default, the system offers you the ability to set up a general notification rule for your team.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>The <strong>Email all team members</strong> option means all members of this Team will receive an email with the Alert information, regardless of the alert type.</p></div></details><h3 id=31-adding-recipients>3.1 Adding recipients</h3><p>You can add other recipients, by clicking <span class="btn cstyle blue"><span><span class=title>Add Recipient</span></span></span>. These recipients do not need to be Observability Cloud users.</p><p>However, if you click on the link <strong>Configure separate notification tiers for different severity alerts</strong> you can configure every alert level independently.</p><p><a href=#R-image-584308b39be8d1d8cb2161e772fa7448 class=lightbox-link><img alt="Multiple Notifications" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/single-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-584308b39be8d1d8cb2161e772fa7448><img alt="Multiple Notifications" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/single-policy.png></a></p><p>Different alert rules for the different alert levels can be configured, as shown in the above image.</p><p>Critical and Major are using <a href=https://www.splunk.com/en_us/observability/on-call.html rel=external target=_blank>Splunk's On-Call</a> Incident Management solution. For the Minor alerts, we send it to the Teams Slack channel and for Warning and Info we send an email.</p><h3 id=32-notification-integrations>3.2 Notification Integrations</h3><p>In addition to sending alert notifications via email, you can configure Observability Cloud to send alert notifications to the services shown below.</p><p><a href=#R-image-1fa39627ef83ba524692741a02a7d044 class=lightbox-link><img alt="Notifications options" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/integrations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1fa39627ef83ba524692741a02a7d044><img alt="Notifications options" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/integrations.png></a></p><p>Take a moment to create some notification rules for your Team.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=controlling-usage>Controlling Usage</h1><ul><li>Discover how you can restrict usage by creating separate Access Tokens and setting limits.</li></ul><h2 id=1-access-tokens>1. Access Tokens</h2><p>If you wish to control the consumption of Hosts, Containers, Custom Metrics and High Resolution Metrics, you can create multiple Access Tokens and allocate them to different parts of your organization.</p><p>In the UI click on the <strong>&#187;</strong> bottom left and select the <strong>Settings → Access Tokens</strong> under <strong>General Settings</strong>.</p><p>The <strong>Access Tokens</strong> Interface provides an overview of your allotments in the form of a list of Access Tokens that have been generated. Every Organization will have a <strong>Default</strong> token generated when they are first set up, but there will typically be multiple Tokens configured.</p><p>Each Token is unique and can be assigned limits for the number of Hosts, Containers, Custom Metrics and High Resolution Metrics it can consume.</p><p>The <strong>Usage Status</strong> Column quickly shows if a token is above or below its assigned limits.</p><p><a href=#R-image-65d81146effe2690586f5152a6fe2411 class=lightbox-link><img alt="New token" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/access-tokens.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-65d81146effe2690586f5152a6fe2411><img alt="New token" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/access-tokens.png></a></p><h2 id=2-creating-a-new-token>2. Creating a new token</h2><p>Let create a new token by clicking on the <span class="btn cstyle blue"><span><span class=title>New Token</span></span></span> button. This will provide you with the <strong>Name Your Access Token</strong> dialog.</p><p>Enter the new name of the new Token by using your Initials e.g. RWC-Token and make sure to tick both <strong>Ingest Token</strong> and <strong>API Token</strong> checkboxes!</p><p><a href=#R-image-73367fa39f889ad4e46a21242c55d33f class=lightbox-link><img alt="Name Your token" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/new-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-73367fa39f889ad4e46a21242c55d33f><img alt="Name Your token" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/new-access-token.png></a></p><p>After you press <span class="btn cstyle blue"><span><span class=title>OK</span></span></span> you will be taken back to the <strong>Access Token</strong> UI. Here your new token should be present, among the ones created by others.</p><p><a href=#R-image-231918cbd63ffd5e97d419e0b221ffa7 class=lightbox-link><img alt="full tokenlist" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/access-token-created.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-231918cbd63ffd5e97d419e0b221ffa7><img alt="full tokenlist" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/access-token-created.png></a></p><p>If you have made an error in your naming, want to disable/enable a token or set a Token limit, click on the ellipsis (<strong>&mldr;</strong>) menu button behind a token limit to open the manage token menu.</p><p><a href=#R-image-3f3a9581d222cc3a3c6e8fac7f7bbafe class=lightbox-link><img alt="Show Menu" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/manage-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3f3a9581d222cc3a3c6e8fac7f7bbafe><img alt="Show Menu" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/manage-access-token.png></a></p><p>If you made a typo you can use the <strong>Rename Token</strong> option to correct the name of your token.</p><h2 id=3-disabling-a-token>3. Disabling a token</h2><p>If you need to make sure a token cannot be used to send Metrics in you can disable a token.</p><p>Click on <strong>Disable</strong> to disable the token, this means the token cannot be used for sending in data to Splunk Observability Cloud.</p><p>The line with your token should have become greyed out to indicate that it has been disabled as you can see in the screenshot below.</p><p><a href=#R-image-7c83d4038943d3ae547295ccf310a080 class=lightbox-link><img alt="Token disabled" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/disable-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7c83d4038943d3ae547295ccf310a080><img alt="Token disabled" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/disable-access-token.png></a></p><p>Go ahead and click on the ellipsis (<strong>&mldr;</strong>) menu button to Disable and Enable your token.</p><h2 id=4-manage-token-usage-limits>4. Manage token usage limits</h2><p>Now, let&rsquo;s start limiting usage by clicking on Manage Token Limit in the 3 <strong>&mldr;</strong> menu.</p><p>This will show the Manage Token Limit Dialog:</p><p><a href=#R-image-fddf86286469cf941160d71d96db182a class=lightbox-link><img alt="Set Limits on token" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/manage-token-limit.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fddf86286469cf941160d71d96db182a><img alt="Set Limits on token" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/manage-token-limit.png></a></p><p>In this dialog, you can set the limits per category.</p><p>Please go ahead and specify the limits as follows for each usage metric:</p><table><thead><tr><th>Limit</th><th>Value</th></tr></thead><tbody><tr><td>Host Limit</td><td>5</td></tr><tr><td>Container Limit</td><td>15</td></tr><tr><td>Custom Metric Limit</td><td>20</td></tr><tr><td>High Resolution Metric Limit</td><td>0</td></tr></tbody></table><p>For our lab use your email address, and double check that you have the correct numbers in your dialog box as shown in the table above.</p><p>Token limits are used to trigger an alert that notifies one or more recipients when the usage has been above 90% of the limit for 5 minutes.</p><p>To specify the recipients, click <span class="btn cstyle blue"><span><span class=title>Add Recipient</span></span></span>, then select the recipient or notification method you want to use (specifying recipients is optional but highly recommended).</p><p>The severity of token alerts is always Critical.</p><p>Click on <span class="btn cstyle blue"><span><span class=title>Update</span></span></span> to save your Access Tokens limits and The Alert Settings.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note: Going above token limit</summary><div class=box-content><p>When a token is at or above its limit in a usage category, new metrics for that usage category will not be stored and processed by Observability Cloud. This will make sure there will be no unexpected cost due to a team sending in data without restriction.</p></div></details><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note: Advanced alerting</summary><div class=box-content><p>If you wish to get alerts before you hit 90%, you can create additional detectors using whatever values you want. These detectors could target the Teams consuming the specific Access Tokens so they can take action before the admins need to get involved.</p></div></details><p>In your company you would distribute these new Access Tokens to various teams, controlling how much information/data they can send to Observability Cloud.</p><p>This will allow you to fine-tune the way you consume your Observability Cloud allotment and prevent overages from happening.</p><p><strong>Congratulations!</strong> You have now completed the Service Bureau module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=nodejs-zero-config-workshop>NodeJS Zero-Config Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>The goal is to walk through the basic steps to configure the following components of the <strong>Splunk Observability Cloud</strong> platform:</p><ul><li>Splunk Infrastructure Monitoring (IM)</li><li>Splunk Zero Configuration Auto Instrumentation for NodeJS (APM)<ul><li>AlwaysOn Profiling</li></ul></li><li>Splunk Log Observer (LO)</li></ul><p>We will deploy the OpenTelemetry Astronomy Shop application in Kubernetes, which contains two NodeJS services (<strong>Frontend</strong> & <strong>Payment Service</strong>). Once the application and the OpenTelemetry Connector are up and running, we will start seeing metrics, traces and logs via the <strong>Zero Configuration Auto Instrumentation</strong> for NodeJS that will be used by the <strong>Splunk Observability Cloud</strong> platform to provide insights into the application.</p><details open class="box cstyle notices primary"><summary class=box-label><i class="fa-fw fas fa-info"></i>
Prerequisites</summary><div class=box-content><ul><li>Outbound SSH access to port <code>2222</code>.</li><li>Outbound HTTP access to port <code>8083</code>.</li><li>Familiarity with the <code>bash</code> shell and <code>vi/vim</code> editor.</li></ul></div></details><p>Next, we will deploy the <strong>OpenTelemetry Demo</strong>.</p><pre class="mermaid align-center">
graph TD
subgraph Service Diagram
accountingservice(Accounting Service):::golang
adservice(Ad Service):::java
cache[(Cache)]
cartservice(Cart Service):::dotnet
checkoutservice(Checkout Service):::golang
currencyservice(Currency Service):::cpp
emailservice(Email Service):::ruby
frauddetectionservice(Fraud Detection Service):::kotlin
frontend(Frontend):::typescript
frontendproxy(Frontend Proxy):::cpp
loadgenerator([Load Generator]):::python
paymentservice(Payment Service):::javascript
productcatalogservice(Product Catalog Service):::golang
quoteservice(Quote Service):::php
recommendationservice(Recommendation Service):::python
shippingservice(Shipping Service):::rust
featureflagservice(Feature Flag Service):::erlang
featureflagstore[(Feature Flag Store)]
queue[(queue)]
Internet --&gt;|HTTP| frontendproxy
frontendproxy --&gt;|HTTP| frontend
frontendproxy --&gt;|HTTP| featureflagservice
loadgenerator --&gt;|HTTP| frontendproxy
accountingservice --&gt;|TCP| queue
cartservice ---&gt;|gRPC| featureflagservice
checkoutservice ---&gt;|gRPC| cartservice --&gt; cache
checkoutservice ---&gt;|gRPC| productcatalogservice
checkoutservice ---&gt;|gRPC| currencyservice
checkoutservice ---&gt;|HTTP| emailservice
checkoutservice ---&gt;|gRPC| paymentservice
checkoutservice --&gt;|gRPC| shippingservice
checkoutservice ---&gt;|TCP| queue
frontend --&gt;|gRPC| adservice
frontend --&gt;|gRPC| cartservice
frontend --&gt;|gRPC| productcatalogservice
frontend --&gt;|gRPC| checkoutservice
frontend --&gt;|gRPC| currencyservice
frontend --&gt;|gRPC| recommendationservice --&gt;|gRPC| productcatalogservice
frontend --&gt;|gRPC| shippingservice --&gt;|HTTP| quoteservice
frauddetectionservice --&gt;|TCP| queue
adservice ---&gt;|gRPC| featureflagservice
productcatalogservice --&gt;|gRPC| featureflagservice
recommendationservice --&gt;|gRPC| featureflagservice
shippingservice --&gt;|gRPC| featureflagservice
featureflagservice --&gt; featureflagstore
end

classDef dotnet fill:#178600,color:white;
classDef cpp fill:#f34b7d,color:white;
classDef erlang fill:#b83998,color:white;
classDef golang fill:#00add8,color:black;
classDef java fill:#b07219,color:white;
classDef javascript fill:#f1e05a,color:black;
classDef kotlin fill:#560ba1,color:white;
classDef php fill:#4f5d95,color:white;
classDef python fill:#3572A5,color:white;
classDef ruby fill:#701516,color:white;
classDef rust fill:#dea584,color:black;
classDef typescript fill:#e98516,color:black;
</pre><pre class="mermaid align-center">
graph TD
subgraph Service Legend
  dotnetsvc(.NET):::dotnet
  cppsvc(C++):::cpp
  erlangsvc(Erlang/Elixir):::erlang
  golangsvc(Go):::golang
  javasvc(Java):::java
  javascriptsvc(JavaScript):::javascript
  kotlinsvc(Kotlin):::kotlin
  phpsvc(PHP):::php
  pythonsvc(Python):::python
  rubysvc(Ruby):::ruby
  rustsvc(Rust):::rust
  typescriptsvc(TypeScript):::typescript
end

classDef dotnet fill:#178600,color:white;
classDef cpp fill:#f34b7d,color:white;
classDef erlang fill:#b83998,color:white;
classDef golang fill:#00add8,color:black;
classDef java fill:#b07219,color:white;
classDef javascript fill:#f1e05a,color:black;
classDef kotlin fill:#560ba1,color:white;
classDef php fill:#4f5d95,color:white;
classDef python fill:#3572A5,color:white;
classDef ruby fill:#701516,color:white;
classDef rust fill:#dea584,color:black;
classDef typescript fill:#e98516,color:black;
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of NodeJS Zero-Config Workshop</h1><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-demo>Deploying the OpenTelemetry Demo</h1><h2 id=1-create-a-namespace>1. Create a namespace</h2><p>To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called <code>otel-demo</code>. To create the namespace, run the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace otel-demo</span></span></code></pre></div><h2 id=2-deploy-the-opentelemetry-demo>2. Deploy the OpenTelemetry Demo</h2><p>Next, change to the directory containing the OpenTelemetry Demo application:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm</span></span></code></pre></div><p>Deploy the OpenTelemetry Demo application:</p><div class=tab-panel data-tab-group=3cb92e7873735d168c17c39511730d32><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3cb92e7873735d168c17c39511730d32","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("3cb92e7873735d168c17c39511730d32","output")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -n otel-demo -f otel-demo.yaml</span></span></code></pre></div></div></div><div data-tab-item=output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>serviceaccount/opentelemetry-demo created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-shippingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-accountingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frauddetectionservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-shippingservice created</span></span></code></pre></div></div></div></div></div><p>Once the application is deployed, we need to wait for the pods to be in a <code>Running</code> state. To check the status of the pods, run the following command:</p><div class=tab-panel data-tab-group=c8ccaa1aae905f98a7ed38256f012667><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c8ccaa1aae905f98a7ed38256f012667","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("c8ccaa1aae905f98a7ed38256f012667","output")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n otel-demo</span></span></code></pre></div></div></div><div data-tab-item=output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                        READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>opentelemetry-demo-emailservice-847d6fb577-bxll6            1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-ffspostgres-55f65465dd-2gsj4             1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-adservice-5b7c68859d-5hx5f               1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-currencyservice-c4cb78446-qsd68          1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frontend-5d7cdb8786-5dl76                1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-kafka-79868d56d8-62wsd                   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-paymentservice-5cb4ccc47c-65hxl          1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-productcatalogservice-59d955f9d6-xtnjr   1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-loadgenerator-755d6cd5b-r5lqs            1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-quoteservice-5fbfb97778-vm62m            1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-redis-57c49b7b5b-b2klr                   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-shippingservice-6667f69f78-cwj8q         1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-recommendationservice-749f55f9b6-5k4lc   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-featureflagservice-67677647c-85xtm       1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-checkoutservice-5474bf74b8-2nmns         1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frauddetectionservice-77fd69d967-lnjcg   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-accountingservice-96d44cfbc-vmtzb        1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-cartservice-7c4f59bdd5-rfkf4             1/1     Running   0          40s</span></span></code></pre></div></div></div></div></div><h2 id=3-validate-the-application-is-running>3. Validate the application is running</h2><p>To validate the application is running, we will port-forward the frontend service. To do this, run the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl port-forward svc/opentelemetry-demo-frontend 8083:8080 -n otel-demo --address<span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span></span></span></code></pre></div><p>Obtain the <strong>public IP address</strong> of the instance you are running on. You can do this by running the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl ifconfig.me</span></span></code></pre></div><p>Once the port-forward is running, you can access the application by opening a browser and navigating to <code>http://&lt;public IP address>:8083</code>. You should see the following:</p><p><a href=#R-image-6eeb28b7be9faa3dea6bc1f3d26dafef class=lightbox-link><img alt="OpenTelemetry Demo" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/otel-demo.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6eeb28b7be9faa3dea6bc1f3d26dafef><img alt="OpenTelemetry Demo" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/otel-demo.png></a></p><p>Once you have confirmed the application is running, you can close the port-forward by pressing <code>ctrl + c</code>.</p><p>Next, we will deploy the <strong>OpenTelemetry Collector</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=installing-the-opentelemetry-collector>Installing the OpenTelemetry Collector</h1><h2 id=1-introduction>1. Introduction</h2><details open class="box cstyle notices warning"><summary class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i>
Delete any existing OpenTelemetry Collectors</summary><div class=box-content><p>If you have completed any other Observability workshops, please ensure you delete the collector running in Kubernetes before continuing. This can be done by running the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><h2 id=2-confirm-environment-variables>2. Confirm environment variables</h2><p>To ensure your instance is configured correctly, we need to confirm that the required environment variables for this workshop are set correctly. In your terminal run the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>env</span></span></code></pre></div><p>In the output check the following environment variables are present and have values set:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ACCESS_TOKEN
</span></span><span class=line><span class=cl>REALM
</span></span><span class=line><span class=cl>RUM_TOKEN
</span></span><span class=line><span class=cl>HEC_TOKEN
</span></span><span class=line><span class=cl>HEC_URL</span></span></code></pre></div><p>For this workshop, <strong>all</strong> of the above are required. If any are missing, please contact your instructor.</p><h2 id=3-install-the-opentelemetry-collector>3. Install the OpenTelemetry Collector</h2><p>We can then go ahead and install the Collector. Some additional parameters are passed to the <code>helm install</code> command, they are:</p><ul><li><code>--set="operator.enabled=true"</code> - Enabled the Splunk OpenTelemetry Collector Operator for Kubernetes.</li><li><code>--set="splunkObservability.profilingEnabled=true"</code> - Enables CPU/Memory profiling for supported languages.</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.120.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operatorcrds.install=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operator.enabled=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;logsEngine=otel&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.profilingEnabled=true&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$INSTANCE</span><span class=s2>-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div><p>Once the installation is completed, you can navigate to the <strong>Kubernetes Navigator</strong> to see the data from your host.</p><p>Click on <strong>Add filters</strong> select <code>k8s.cluster.name</code> and select the cluster of your workshop instance.
You can determine your instance name from the command prompt in your terminal session:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span></span></span></code></pre></div><p>Once you see data flowing for your host, we are then ready to get started with the APM component.</p><p><a href=#R-image-cd1ca8b23e50c9928edb233727fb10bd class=lightbox-link><img alt="Kubernetes Navigator" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/k8s-navigator.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd1ca8b23e50c9928edb233727fb10bd><img alt="Kubernetes Navigator" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/k8s-navigator.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 5, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=zero-configuration---frontend-service>Zero Configuration - Frontend Service</h1><h2 id=1-patching-the-frontend-service>1. Patching the Frontend service</h2><p>First, confirm that you can see your environment in <strong>APM</strong>. There should be a service called <code>loadgenerator</code> displayed in the Service map.</p><p><a href=#R-image-b1aafde4343647fb5f5783b2e0062916 class=lightbox-link><img alt="APM Service Map" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/apm-servicemap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b1aafde4343647fb5f5783b2e0062916><img alt="APM Service Map" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/apm-servicemap.png></a></p><p>Next, we will patch the <code>frontend</code> deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the <code>frontend</code> service in <strong>APM</strong>. Note, that at this point we have not edited any code.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl patch deployment opentelemetry-demo-frontend -n otel-demo -p <span class=s1>&#39;{&#34;spec&#34;: {&#34;template&#34;:{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;instrumentation.opentelemetry.io/inject-nodejs&#34;:&#34;default/splunk-otel-collector&#34;}}}} }&#39;</span></span></span></code></pre></div><ul><li>This will cause the <code>opentelemetry-demo-frontend</code> pod to restart.</li><li>The annotation value <code>default/splunk-otel-collector</code> refers to the instrumentation configuration named <code>splunk-otel-collector</code> in the <code>default</code> namespace.</li><li>If the chart is not installed in the <code>default</code> namespace, modify the annotation value to be <code>{chart_namespace}/splunk-otel-collector</code>.</li></ul><p>After a few minutes, you should see the <code>frontend</code> service in <strong>APM</strong>.</p><p><a href=#R-image-3d6263d3b2d3b6b878e62b9735835a09 class=lightbox-link><img alt=Frontend class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/apm-frontend.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3d6263d3b2d3b6b878e62b9735835a09><img alt=Frontend class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/apm-frontend.png></a></p><p>With the <code>frontend</code> service highlighted, click on the <strong>Traces</strong> tab to see the traces for the service. Select one of the traces and confirm that the trace contains metadata confirming that the Splunk Zero-Configuration Auto-Instrumentation for NodeJS is being used.</p><p><a href=#R-image-0f9fa9216be05f084daa7cd1e8369895 class=lightbox-link><img alt="Zero Configuration" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/apm-frontend-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0f9fa9216be05f084daa7cd1e8369895><img alt="Zero Configuration" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/apm-frontend-trace.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=zero-configuration---payment-service>Zero Configuration - Payment Service</h1><h2 id=1-patching-the-payment-service>1. Patching the Payment Service</h2><p>Finally, we will patch the <code>paymentservice</code> deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the <code>paymentservice</code> service in <strong>APM</strong>.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p <span class=s1>&#39;{&#34;spec&#34;: {&#34;template&#34;:{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;instrumentation.opentelemetry.io/inject-nodejs&#34;:&#34;default/splunk-otel-collector&#34;}}}} }&#39;</span></span></span></code></pre></div><p>This will cause the <code>opentelemetry-demo-paymentservice</code> pod to restart and after a few minutes, you should see the <code>paymentservice</code> service in <strong>APM</strong>.</p><p><a href=#R-image-545c51d6a44831571da2b25d2b5dd1ae class=lightbox-link><img alt=Paymentservice class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/apm-paymentservice.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-545c51d6a44831571da2b25d2b5dd1ae><img alt=Paymentservice class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/apm-paymentservice.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=code-profiling---payment-service>Code Profiling - Payment Service</h1><h2 id=1-alwayson-profiling-for-the-payment-service>1. AlwaysOn Profiling for the Payment Service</h2><p><strong>AlwaysOn Profiling</strong> is a feature of the Splunk Distribution of OpenTelemetry Collector that allows you to collect CPU and Memory profiling data for your services without having to modify your code. This is useful for troubleshooting performance issues in your services. Here are some of the benefits of AlwaysOn Profiling:</p><ul><li>Perform continuous profiling of your applications. The profiler is always on once you activate it.</li><li>Collect code performance context and link it to trace data.</li><li>Explore memory usage and garbage collection of your application.</li><li>Analyze code bottlenecks that impact service performance.</li><li>Identify inefficiencies that increase the need for scaling up cloud resources.</li></ul><p>With the <code>opentelemetry-demo-paymentservice</code> selected, click on <strong>AlwaysOn Profiling</strong> to view the code profiling data for the service.</p><p><a href=#R-image-41bf47edaf225974eef7cd7e7ef2372d class=lightbox-link><img alt="AlwaysOn Profiling" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/alwayson-profiling.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-41bf47edaf225974eef7cd7e7ef2372d><img alt="AlwaysOn Profiling" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/alwayson-profiling.png></a></p><p>Here you can see the CPU and Memory profiling data for the <code>paymentservice</code> service. You can also see the CPU and Memory profiling data for the <code>frontend</code> service by selecting the <code>opentelemetry-demofrontend</code> service from the <strong>Service</strong> dropdown.</p><p><a href=#R-image-2d19ce8b7425fb845b88d62e59618752 class=lightbox-link><img alt="Profiling Service" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/profiling-service.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2d19ce8b7425fb845b88d62e59618752><img alt="Profiling Service" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/profiling-service.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=logs---payment-service>Logs - Payment Service</h1><h2 id=1-viewing-the-logs-for-the-payment-service>1. Viewing the logs for the Payment Service</h2><p>Navigate back to APM from the main menu and under <strong>Services</strong> click on <code>opentelemetry-demo-paymentservice</code>. This will open up the Service map for the <code>paymentservice</code> service only.</p><p>At the bottom of the page, click on the <strong>Logs(1)</strong> tab to view the logs for the <code>paymentservice</code> service.</p><p><a href=#R-image-b25d52c4be4ab901ff7e809c8ac5e28f class=lightbox-link><img alt="Related Logs" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/related-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b25d52c4be4ab901ff7e809c8ac5e28f><img alt="Related Logs" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/related-logs.png></a></p><p>Once in <strong>Log Observer</strong> select one of the log entries to view the metadata for the log entry.</p><p><a href=#R-image-91fff1c9c81adb87e6f598aeac60283d class=lightbox-link><img alt="Log Entry" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/log-entry.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-91fff1c9c81adb87e6f598aeac60283d><img alt="Log Entry" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/log-entry.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=getting-data-in-gdi-with-otel-and-uf>Getting Data In (GDI) with OTel and UF</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;<p>During this technical workshop, you will learn how to:</p><ul><li>Efficiently deploy complex environments</li><li>Capture metrics from these environments to Splunk Observability Cloud</li><li>Auto-instrument a Python application</li><li>Enable OS logging to Splunk Enterprise via Universal Forwarder</li></ul><p>To simplify the workshop modules, a pre-configured AWS EC2 instance is provided.</p><p>By the end of this technical workshop, you will have an approach to demonstrating metrics collection for complex environments and services.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of GDI (OTel & UF)</h1><article class=default><header class=headline></header><h1 id=getting-started-with-o11y-gdi---real-time-enrichment-workshop>Getting Started with O11y GDI - Real Time Enrichment Workshop</h1><p>Please note to begin the following lab, you must have completed the prework:</p><ul><li>Obtain a Splunk Observability Cloud access key</li><li>Understand cli commands</li></ul><p>Follow these steps if using O11y Workshop EC2 instances</p><h2 id=1-verify-yelp-data-files-are-present>1. Verify yelp data files are present</h2><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ll /var/appdata/yelp*</span></span></code></pre></div><h2 id=2-export-the-following-variables>2. Export the following variables</h2><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ACCESS_TOKEN</span><span class=o>=</span>&lt;your-access-token&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>REALM</span><span class=o>=</span>&lt;your-o11y-cloud-realm&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>clusterName</span><span class=o>=</span>&lt;your-k8s-cluster&gt;</span></span></code></pre></div><h2 id=3-clone-the-following-repo>3. Clone the following repo</h2><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk 
</span></span><span class=line><span class=cl>git clone https://github.com/leungsteve/realtime_enrichment.git 
</span></span><span class=line><span class=cl><span class=nb>cd</span> realtime_enrichment/workshop 
</span></span><span class=line><span class=cl>python3 -m venv rtapp-workshop 
</span></span><span class=line><span class=cl><span class=nb>source</span> rtapp-workshop/bin/activate</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-complex-environments-and-capture-metrics>Deploy Complex Environments and Capture Metrics</h1><p><strong>Objective:</strong> Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations</p><p><strong>Duration</strong>: 15 Minutes</p><h2 id=scenario>Scenario</h2><p>A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?</p><h3 id=1-where-can-i-find-helm-charts>1. Where can I find helm charts?</h3><ul><li>Google “myservice helm chart”</li><li><code>https://artifacthub.io/</code> (<strong>Note:</strong> Look for charts from trusted organizations, with high star count and frequent updates)</li></ul><h3 id=2-review-apache-kafka-packaged-by-bitnami>2. Review <a href=https://github.com/bitnami/charts/tree/main/bitnami/kafka/#installing-the-chart rel=external target=_blank>Apache Kafka packaged by Bitnami</a></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>replicaCount=3</code></li><li><code>metrics.jmx.enabled=true</code></li><li><code>metrics.kafka.enabled=true</code></li><li><code>deleteTopicEnable=true</code></li></ul><h3 id=3-review-mongodbr-packaged-by-bitnami>3. Review <a href=https://github.com/bitnami/charts/tree/master/bitnami/mongodb/#installing-the-chart rel=external target=_blank>MongoDB(R) packaged by Bitnami</a></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>version 12.1.31</code></li><li><code>metrics.enabled=true</code></li><li><code>global.namespaceOverride=default</code></li><li><code>auth.rootUser=root</code></li><li><code>auth.rootPassword=splunk</code></li><li><code>auth.enabled=false</code></li></ul><h3 id=4-install-kafka-and-mongodb-with-helm-charts>4. Install Kafka and MongoDB with helm charts</h3><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add bitnami https://charts.bitnami.com/bitnami</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install kafka --set <span class=nv>replicaCount</span><span class=o>=</span><span class=m>3</span> --set metrics.jmx.enabled<span class=o>=</span><span class=nb>true</span> --set metrics.kafka.enabled<span class=o>=</span><span class=nb>true</span>  --set <span class=nv>deleteTopicEnable</span><span class=o>=</span><span class=nb>true</span> bitnami/kafka</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install mongodb --set metrics.enabled<span class=o>=</span><span class=nb>true</span> bitnami/mongodb --set global.namespaceOverride<span class=o>=</span>default --set auth.rootUser<span class=o>=</span>root --set auth.rootPassword<span class=o>=</span>splunk --set auth.enabled<span class=o>=</span><span class=nb>false</span> --version 12.1.31</span></span></code></pre></div><p>Verify the helm chart installation</p><div class=tab-panel data-tab-group=62ed2c8a1b5ffae1fd7cfbdcc0eae4bb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=helm-list class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("62ed2c8a1b5ffae1fd7cfbdcc0eae4bb","helm-list")'>
<span class=tab-nav-text>helm list</span>
</button>
<button data-tab-item=helm-list-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("62ed2c8a1b5ffae1fd7cfbdcc0eae4bb","helm-list-output")'>
<span class=tab-nav-text>helm list output</span></button></div><div class=tab-content-container><div data-tab-item=helm-list class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm list</span></span></code></pre></div></div></div><div data-tab-item=helm-list-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME    NAMESPACE   REVISION    UPDATED                                 STATUS      CHART           APP VERSION
</span></span><span class=line><span class=cl>kafka   default     1           2022-11-14 11:21:36.328956822 -0800 PST deployed    kafka-19.1.3    3.3.1
</span></span><span class=line><span class=cl>mongodb default     1           2022-11-14 11:19:36.507690487 -0800 PST deployed    mongodb-12.1.31 5.0.10</span></span></code></pre></div></div></div></div></div><p>Verify the helm chart installation</p><div class=tab-panel data-tab-group=bf5135cab8cfc792d0b23a4bedb63f00><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-pods class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("bf5135cab8cfc792d0b23a4bedb63f00","kubectl-get-pods")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button data-tab-item=kubectl-get-pods-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("bf5135cab8cfc792d0b23a4bedb63f00","kubectl-get-pods-output")'>
<span class=tab-nav-text>kubectl get pods Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-pods class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-pods-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                              READY   STATUS              RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-exporter-595778d7b4-99ztt   0/1     ContainerCreating   0          17s
</span></span><span class=line><span class=cl>mongodb-b7c968dbd-jxvsj           0/2     Pending             0          6s
</span></span><span class=line><span class=cl>kafka-1                           0/2     ContainerCreating   0          16s
</span></span><span class=line><span class=cl>kafka-2                           0/2     ContainerCreating   0          16s
</span></span><span class=line><span class=cl>kafka-zookeeper-0                 0/1     Pending             0          17s
</span></span><span class=line><span class=cl>kafka-0                           0/2     Pending             0          17s</span></span></code></pre></div></div></div></div></div><p>Use information for each Helm chart and Splunk O11y Data Setup to generate values.yaml for capturing metrics from Kafka and MongoDB.</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p><code>values.yaml</code> for the different services will be passed to the Splunk Helm Chart at installation time. These will configure the OTEL collector to capture metrics from these services.</p></div></details><ul><li>References:<ul><li><a href=https://github.com/bitnami/charts/tree/master/bitnami/spark/#installing-the-chart rel=external target=_blank>Apache Kafka packaged by Bitnami</a></li><li><a href=https://docs.splunk.com/Observability/gdi/kafka/kafka.html rel=external target=_blank>Configure application receivers for databases » Apache Kafka</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver rel=external target=_blank>Kafkametricsreceiver</a></li></ul></li></ul><h4 id=41-example-kafkavaluesyaml>4.1 Example kafka.values.yaml</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>smartagent/kafka</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=c>#endpoint: &#39;`endpoint`:5555&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>5555</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>clusterName</span><span class=p>:</span><span class=w> </span><span class=l>sl-kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>otelK8sClusterReceiver</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>k8sEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kafkametrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>brokers</span><span class=p>:</span><span class=w> </span><span class=l>kafka:9092</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>protocol_version</span><span class=p>:</span><span class=w> </span><span class=m>2.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>brokers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>topics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>consumers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c>#- prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>k8s_cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>kafkametrics</span></span></span></code></pre></div><h4 id=42-example-mongodbvaluesyaml>4.2 Example mongodb.values.yaml</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>smartagent/mongodb</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;mongo&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>mongodb.default.svc.cluster.local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>27017</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>databases</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;admin&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;O11y&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;local&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;config&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>sendCollectionMetrics</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>sendCollectionTopMetrics</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><h4 id=43-example-zookeepervaluesyaml>4.3 Example zookeeper.values.yaml</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>smartagent/zookeeper</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka-zookeeper&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>kafka-zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>2181</span></span></span></code></pre></div><h3 id=5-install-the-splunk-otel-helm-chart>5. Install the Splunk OTEL helm chart</h3><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/otel_yamls/ 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install --set <span class=nv>provider</span><span class=o>=</span><span class=s1>&#39; &#39;</span> --set <span class=nv>distro</span><span class=o>=</span><span class=s1>&#39; &#39;</span> --set splunkObservability.accessToken<span class=o>=</span><span class=nv>$ACCESS_TOKEN</span> --set <span class=nv>clusterName</span><span class=o>=</span><span class=nv>$clusterName</span> --set splunkObservability.realm<span class=o>=</span><span class=nv>$REALM</span> --set otelCollector.enabled<span class=o>=</span><span class=s1>&#39;false&#39;</span> --set splunkObservability.logsEnabled<span class=o>=</span><span class=s1>&#39;true&#39;</span> --set gateway.enabled<span class=o>=</span><span class=s1>&#39;false&#39;</span> --values kafka.values.yaml --values mongodb.values.yaml --values zookeeper.values.yaml --values alwayson.values.yaml --values k3slogs.yaml --generate-name splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><h3 id=6-verify-installation>6. Verify installation</h3><p>Verify that the Kafka, MongoDB and Splunk OTEL Collector helm charts are installed, note that names may differ.</p><div class=tab-panel data-tab-group=d05e0f80a8bfbf7b9b6a1b32d40933ea><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=helm-list class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d05e0f80a8bfbf7b9b6a1b32d40933ea","helm-list")'>
<span class=tab-nav-text>helm list</span>
</button>
<button data-tab-item=helm-list-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("d05e0f80a8bfbf7b9b6a1b32d40933ea","helm-list-output")'>
<span class=tab-nav-text>helm list Output</span></button></div><div class=tab-content-container><div data-tab-item=helm-list class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm list</span></span></code></pre></div></div></div><div data-tab-item=helm-list-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                NAMESPACE   REVISION    UPDATED                                 STATUS      CHART                           APP VERSION
</span></span><span class=line><span class=cl>kafka                               default     1           2021-12-07 12:48:47.066421971 -0800 PST deployed    kafka-14.4.1                    2.8.1
</span></span><span class=line><span class=cl>mongodb                             default     1           2021-12-07 12:49:06.132771625 -0800 PST deployed    mongodb-10.29.2                 4.4.10
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184    default     1           2021-12-07 12:49:45.694013749 -0800 PST deployed    splunk-otel-collector-0.37.1    0.37.1</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=eba8b3b0f0c2b6453f6a6a8dcf6e367c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-pods class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("eba8b3b0f0c2b6453f6a6a8dcf6e367c","kubectl-get-pods")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button data-tab-item=kubectl-get-pods-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("eba8b3b0f0c2b6453f6a6a8dcf6e367c","kubectl-get-pods-output")'>
<span class=tab-nav-text>kubectl get pods Output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-pods class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-pods-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running   0          18m
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>mongodb-79cf87987f-gsms8                                          2/2     Running   0          18m
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>kafka-exporter-7c65fcd646-dvmtv                                   1/1     Running   3          18m
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184-agent-27s5c                      2/2     Running   0          17m
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184-k8s-cluster-receiver-8587qmh9l   1/1     Running   0          17m</span></span></code></pre></div></div></div></div></div><h3 id=7-verify-dashboards>7. Verify dashboards</h3><p>Verify that out of the box dashboards for Kafka, MongoDB and Zookeeper are populated in the Infrastructure Monitor landing page. Drill down into each component to view granular details for each service.</p><p>Tip: You can use the filter <code>k8s.cluster.name</code> with your cluster name to find your instance.</p><ul><li>Infrastructure Monitoring Landing page:</li></ul><p><a href=#R-image-a705d2f2099b2b5e4963ae32f4cb8dd6 class=lightbox-link><img alt=IM-landing-page class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/inframon.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a705d2f2099b2b5e4963ae32f4cb8dd6><img alt=IM-landing-page class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/inframon.jpg></a></p><ul><li>K8 Navigator:</li></ul><p><a href=#R-image-2e112ad48a1262f2e746deea401b2c97 class=lightbox-link><img alt=k8-navigator class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/k8navigator.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e112ad48a1262f2e746deea401b2c97><img alt=k8-navigator class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/k8navigator.jpg></a></p><ul><li>MongoDB Dashboard:</li></ul><p><a href=#R-image-8f488c4cbbe5d73d8aec67c4a6eff88b class=lightbox-link><img alt=mongodb-dash class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/mongoDB.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f488c4cbbe5d73d8aec67c4a6eff88b><img alt=mongodb-dash class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/mongoDB.jpg></a></p><ul><li>Kafka Dashboard:</li></ul><p><a href=#R-image-ec255536cfb0065cef61e416cf372777 class=lightbox-link><img alt=kafka-dash class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/kafka.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec255536cfb0065cef61e416cf372777><img alt=kafka-dash class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/kafka.jpg></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=code-to-kubernetes---python>Code to Kubernetes - Python</h1><h2 id=code-to-kubernetes---python>Code to Kubernetes - Python</h2><p><strong>Objective:</strong> Understand activities to instrument a python application and run it on Kubernetes.</p><ul><li>Verify the code</li><li>Containerize the app</li><li>Deploy the container in Kubernetes</li></ul><p><strong>Note:</strong> these steps do not involve Splunk</p><p><strong>Duration:</strong> 15 Minutes</p><h2 id=1-verify-the-code---review-service>1. Verify the code - Review service</h2><p>Navigate to the review directory</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/flask_apps/review/</span></span></code></pre></div><p>Inspect review.py (realtime_enrichment/flask_apps/review)</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat review.py</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>review</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>num_reviews</span> <span class=o>=</span> <span class=mi>8635403</span>
</span></span><span class=line><span class=cl><span class=n>num_reviews</span> <span class=o>=</span> <span class=mi>100000</span>
</span></span><span class=line><span class=cl><span class=n>reviews_file</span> <span class=o>=</span> <span class=s1>&#39;/var/appdata/yelp_academic_dataset_review.json&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@review.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello_world</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>message</span><span class=o>=</span><span class=s1>&#39;Hello, you want to hit /get_review. We have &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>num_reviews</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39; reviews!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@review.route</span><span class=p>(</span><span class=s1>&#39;/get_review&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_review</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>random_review_int</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=n>num_reviews</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>line_num</span> <span class=o>=</span> <span class=n>random_review_int</span> <span class=o>+</span> <span class=s1>&#39;q;d&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>command</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;sed&#34;</span><span class=p>,</span> <span class=n>line_num</span><span class=p>,</span> <span class=n>reviews_file</span><span class=p>]</span> <span class=c1># sed &#34;7997242q;d&#34; &lt;file&gt;</span>
</span></span><span class=line><span class=cl>    <span class=n>random_review</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>command</span><span class=p>,</span> <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>random_review</span><span class=o>.</span><span class=n>stdout</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>review</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span> <span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=mi>5000</span><span class=p>,</span> <span class=n>debug</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span></span></span></code></pre></div><p>Inspect requirements.txt</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Flask==2.0.2</span></span></code></pre></div><p>Create a virtual environment and Install the necessary python packages</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/workshop/flask_apps_start/review/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pip freeze <span class=c1>#note output</span>
</span></span><span class=line><span class=cl>pip install -r requirements.txt
</span></span><span class=line><span class=cl>pip freeze <span class=c1>#note output</span></span></span></code></pre></div><p>Start the REVIEW service. <strong>Note:</strong> You can stop the app with control+C</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 review.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> * Serving Flask app <span class=s1>&#39;review&#39;</span> <span class=o>(</span>lazy loading<span class=o>)</span>
</span></span><span class=line><span class=cl> * Environment: production
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl> * Running on http://10.160.145.246:5000/ <span class=o>(</span>Press CTRL+C to quit<span class=o>)</span>
</span></span><span class=line><span class=cl> * Restarting with stat
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:46:38<span class=o>]</span> <span class=s2>&#34;GET / HTTP/1.1&#34;</span> <span class=m>200</span> -
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:47:02<span class=o>]</span> <span class=s2>&#34;GET /get_review HTTP/1.1&#34;</span> <span class=m>200</span> -
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:47:58<span class=o>]</span> <span class=s2>&#34;GET /get_review HTTP/1.1&#34;</span> <span class=m>200</span> -</span></span></code></pre></div><p>Verify that the service is working</p><ul><li>Open a new terminal and ssh into your ec2 instance. Then use the curl command in your terminal.</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:5000</span></span></code></pre></div><ul><li>Or hit the URL <code>http://{Your_EC2_IP_address}:5000</code> and <code>http://{Your_EC2_IP_address}:5000/get_review</code> with a browser</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:5000
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Hello, you want to hit /get_review. We have 100000 reviews!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl localhost:5000/get_review
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;review_id&#34;</span>:<span class=s2>&#34;NjbiESXotcEdsyTc4EM3fg&#34;</span>,<span class=s2>&#34;user_id&#34;</span>:<span class=s2>&#34;PR9LAM19rCM_HQiEm5OP5w&#34;</span>,<span class=s2>&#34;business_id&#34;</span>:<span class=s2>&#34;UAtX7xmIfdd1W2Pebf6NWg&#34;</span>,<span class=s2>&#34;stars&#34;</span>:3.0,<span class=s2>&#34;useful&#34;</span>:0,<span class=s2>&#34;funny&#34;</span>:0,<span class=s2>&#34;cool&#34;</span>:0,<span class=s2>&#34;text&#34;</span>:<span class=s2>&#34;-If you&#39;re into cheap beer (pitcher of bud-light for </span><span class=nv>$7</span><span class=s2>) decent wings and a good time, this is the place for you. Its generally very packed after work hours and weekends. Don&#39;t expect cocktails. \n\n-You run into a lot of sketchy characters here sometimes but for the most part if you&#39;re chilling with friends its not that bad. \n\n-Friendly bouncer and bartenders.&#34;</span>,<span class=s2>&#34;date&#34;</span>:<span class=s2>&#34;2016-04-12 20:23:24&#34;</span><span class=o>}</span></span></span></code></pre></div><details open class="box cstyle notices tip"><summary class=box-label><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><ul><li>What does this application do?</li><li>Do you see the yelp dataset being used?</li><li>Why did the output of pip freeze differ each time you ran it?</li><li>Which port is the REVIEW app listening on? Can other python apps use this same port?</li></ul></div></details><h2 id=2-create-a-review-container>2. Create a REVIEW container</h2><p>To create a container image, you need to create a Dockerfile, run docker build to build the image referencing the Docker file and push it up to a remote repository so it can be pulled by other sources.</p><ul><li><a href=https://docs.docker.com/get-started/02_our_app/ rel=external target=_blank>Create a Dockerfile</a></li><li>Creating a Dockerfile typically requires you to consider the following:<ul><li>Identify an appropriate container image<ul><li>ubuntu vs. python vs. alpine/slim</li><li>ubuntu - overkill, large image size, wasted resources when running in K8</li><li>this is a python app, so pick an image that is optimized for it</li><li><a href=https://lih-verma.medium.com/alpine-makes-python-docker-builds-way-too-50-slower-and-images-double-2-larger-61d1d43cbc79 rel=external target=_blank>avoid alpine for python</a></li></ul></li><li>Order matters<ul><li>you&rsquo;re building layers.</li><li>re-use the layers as much as possible</li><li>have items that change often towards the end</li></ul></li><li><a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/ rel=external target=_blank>Other Best practices for writing Dockerfiles</a></li></ul></li></ul><p>Dockerfile for review</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.10-slim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> requirements.txt /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install -r requirements.txt<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./review.py /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 5000</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span> <span class=s2>&#34;python&#34;</span><span class=p>,</span> <span class=s2>&#34;review.py&#34;</span> <span class=p>]</span></span></span></code></pre></div><p>Create a container image (locally)
Run ‘docker build’ to build a local container image referencing the Dockerfile</p><div class=tab-panel data-tab-group=87c44105b2486d03e9be0f70761c872e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=docker-build class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("87c44105b2486d03e9be0f70761c872e","docker-build")'>
<span class=tab-nav-text>docker build</span>
</button>
<button data-tab-item=docker-build-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("87c44105b2486d03e9be0f70761c872e","docker-build-output")'>
<span class=tab-nav-text>docker build Output</span></button></div><div class=tab-content-container><div data-tab-item=docker-build class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -f Dockerfile -t localhost:8000/review:0.01 .</span></span></code></pre></div></div></div><div data-tab-item=docker-build-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[+] Building 35.5s (11/11) FINISHED
</span></span><span class=line><span class=cl> =&gt; [internal] load build definition from Dockerfile                              0.0s
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl> =&gt; [3/5] COPY requirements.txt /app                                              0.0s
</span></span><span class=line><span class=cl> =&gt; [4/5] RUN pip install -r requirements.txt                                     4.6s
</span></span><span class=line><span class=cl> =&gt; [5/5] COPY ./review.py /app                                                   0.0s
</span></span><span class=line><span class=cl> =&gt; exporting to image                                                            0.2s
</span></span><span class=line><span class=cl> =&gt; =&gt; exporting layers                                                           0.2s
</span></span><span class=line><span class=cl> =&gt; =&gt; writing image sha256:61da27081372723363d0425e0ceb34bbad6e483e698c6fe439c5  0.0s
</span></span><span class=line><span class=cl> =&gt; =&gt; naming to docker.io/localhost:8000/review:0.1                                   0.0</span></span></code></pre></div></div></div></div></div><p>Push the container image into a container repository
Run ‘docker push’ to place a copy of the REVIEW container to a remote location</p><div class=tab-panel data-tab-group=4bd1364d0d6237386598aa2e5924a9c0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=docker-push class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4bd1364d0d6237386598aa2e5924a9c0","docker-push")'>
<span class=tab-nav-text>docker push</span>
</button>
<button data-tab-item=docker-push-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("4bd1364d0d6237386598aa2e5924a9c0","docker-push-output")'>
<span class=tab-nav-text>docker push Output</span></button></div><div class=tab-content-container><div data-tab-item=docker-push class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker push localhost:8000/review:0.01</span></span></code></pre></div></div></div><div data-tab-item=docker-push-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>The push refers to repository [docker.io/localhost:8000/review]
</span></span><span class=line><span class=cl>02c36dfb4867: Pushed
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl>fd95118eade9: Pushed
</span></span><span class=line><span class=cl>0.1: digest: sha256:3651f740abe5635af95d07acd6bcf814e4d025fcc1d9e4af9dee023a9b286f38 size: 2202</span></span></code></pre></div></div></div></div></div><p>Verify that the image is in Docker Hub. The same info can be found in Docker Desktop</p><div class=tab-panel data-tab-group=637ac38dbd42b272daafa0e0797bd704><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=get-catalog class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("637ac38dbd42b272daafa0e0797bd704","get-catalog")'>
<span class=tab-nav-text>get catalog</span>
</button>
<button data-tab-item=get-catalog-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("637ac38dbd42b272daafa0e0797bd704","get-catalog-output")'>
<span class=tab-nav-text>get catalog Output</span></button></div><div class=tab-content-container><div data-tab-item=get-catalog class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -s http://localhost:8000/v2/_catalog</span></span></code></pre></div></div></div><div data-tab-item=get-catalog-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;repositories&#34;:[&#34;review&#34;]}</span></span></code></pre></div></div></div></div></div><h2 id=3-run-review-in-kubernetes>3. Run REVIEW in Kubernetes</h2><p>Create K8 deployment yaml file for the REVIEW app</p><p>Reference: <a href=https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#creating-a-deployment rel=external target=_blank>Creating a Deployment</a></p><p>review.deployment.yaml</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>regcred</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8000/review:0.01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span></span></span></code></pre></div><p>Notes regarding review.deployment.yaml:</p><ul><li>labels - K8 uses labels and selectors to tag and identify resources<ul><li>In the next step, we&rsquo;ll create a service and associate it to this deployment using the label</li></ul></li><li>replicas = 1<ul><li>K8 allows you to scale your deployments horizontally</li><li>We&rsquo;ll leverage this later to add load and increase our ingestion rate</li></ul></li><li>regcred provides this deployment with the ability to access your dockerhub credentials which is necessary to pull the container image.</li><li>The volume definition and volumemount make the yelp dataset visible to the container</li></ul><p>Create a K8 service yaml file for the review app.</p><p>Reference: <a href=https://kubernetes.io/docs/concepts/services-networking/service/#defining-a-service rel=external target=_blank>Creating a service:</a></p><p>review.service.yaml</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>NodePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>5000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>5000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nodePort</span><span class=p>:</span><span class=w> </span><span class=m>30000</span></span></span></code></pre></div><p>Notes about review.service.yaml:</p><ul><li>the selector associates this service to pods with the label app with the value being review</li><li>the review service exposes the review pods as a network service<ul><li>other pods can now ping &lsquo;review&rsquo; and they will hit a review pod.</li><li>a pod would get a review if it ran <code>curl http://review:5000</code></li></ul></li><li>NodePort service<ul><li>the service is accessible to the K8 host by the nodePort, 30000</li><li>Another machine that has this can get a review if it ran <code>curl http://&lt;k8 host ip>:30000</code></li></ul></li></ul><p>Apply the review deployment and service</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f review.service.yaml -f review.deployment.yaml</span></span></code></pre></div><p>Verify that the deployment and services are running:</p><div class=tab-panel data-tab-group=cbaa279a365e40156a87fb05976f5d54><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-deployments class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("cbaa279a365e40156a87fb05976f5d54","kubectl-get-deployments")'>
<span class=tab-nav-text>kubectl get deployments</span>
</button>
<button data-tab-item=kubectl-get-deployments-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("cbaa279a365e40156a87fb05976f5d54","kubectl-get-deployments-output")'>
<span class=tab-nav-text>kubectl get deployments output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-deployments class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get deployments</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-deployments-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                    READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>review                                                  1/1     1            1           19h</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=276b3bfb387dc25b059a9b6f840fb662><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=kubectl-get-services class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("276b3bfb387dc25b059a9b6f840fb662","kubectl-get-services")'>
<span class=tab-nav-text>kubectl get services</span>
</button>
<button data-tab-item=kubectl-get-services-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("276b3bfb387dc25b059a9b6f840fb662","kubectl-get-services-output")'>
<span class=tab-nav-text>kubectl get services output</span></button></div><div class=tab-content-container><div data-tab-item=kubectl-get-services class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get services</span></span></code></pre></div></div></div><div data-tab-item=kubectl-get-services-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                         AGE
</span></span><span class=line><span class=cl>review                     NodePort    10.43.175.21    &lt;none&gt;        5000:30000/TCP                  154d</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=a5395d1594069012965f2f8a9aea5824><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=curl-localhost class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a5395d1594069012965f2f8a9aea5824","curl-localhost")'>
<span class=tab-nav-text>curl localhost</span>
</button>
<button data-tab-item=curl-localhost-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("a5395d1594069012965f2f8a9aea5824","curl-localhost-output")'>
<span class=tab-nav-text>curl localhost Output</span></button></div><div class=tab-content-container><div data-tab-item=curl-localhost class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:30000</span></span></code></pre></div></div></div><div data-tab-item=curl-localhost-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;message&#34;: &#34;Hello, you want to hit /get_review. We have 100000 reviews!&#34;
</span></span><span class=line><span class=cl>}</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=5113e32ca8177ad89344966609107b35><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=get-review class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("5113e32ca8177ad89344966609107b35","get-review")'>
<span class=tab-nav-text>get review</span>
</button>
<button data-tab-item=get-review-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("5113e32ca8177ad89344966609107b35","get-review-output")'>
<span class=tab-nav-text>get review Output</span></button></div><div class=tab-content-container><div data-tab-item=get-review class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:30000/get_review</span></span></code></pre></div></div></div><div data-tab-item=get-review-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;review_id&#34;:&#34;Vv9rHtfBrFc-1M1DHRKN9Q&#34;,&#34;user_id&#34;:&#34;EaNqIwKkM7p1bkraKotqrg&#34;,&#34;business_id&#34;:&#34;TA1KUSCu8GkWP9w0rmElxw&#34;,&#34;stars&#34;:3.0,&#34;useful&#34;:1,&#34;funny&#34;:0,&#34;cool&#34;:0,&#34;text&#34;:&#34;This is the first time I&#39;ve actually written a review for Flip, but I&#39;ve probably been here about 10 times.  \n\nThis used to be where I would take out of town guests who wanted a good, casual, and relatively inexpensive meal.  \n\nI hadn&#39;t been for a while, so after a long day in midtown, we decided to head to Flip.  \n\nWe had the fried pickles, onion rings, the gyro burger, their special burger, and split a nutella milkshake.  I have tasted all of the items we ordered previously (with the exception of the special) and have been blown away with how good they were.  My guy had the special which was definitely good, so no complaints there.  The onion rings and the fried pickles were greasier than expected.  Though I&#39;ve thought they were delicious in the past, I probably wouldn&#39;t order either again.  The gyro burger was good, but I could have used a little more sauce.  It almost tasted like all of the ingredients didn&#39;t entirely fit together.  Something was definitely off. It was a friday night and they weren&#39;t insanely busy, so I&#39;m not sure I would attribute it to the staff not being on their A game...\n\nDon&#39;t get me wrong.  Flip is still good.  The wait staff is still amazingly good looking.  They still make delicious milk shakes.  It&#39;s just not as amazing as it once was, which really is a little sad.&#34;,&#34;date&#34;:&#34;2010-10-11 18:18:35&#34;}</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices tip"><summary class=box-label><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What changes are required if you need to make an update to your Dockerfile now?</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=instrument-reviews-for-tracing>Instrument REVIEWS for Tracing</h1><h2 id=1-use-data-setup-to-instrument-a-python-application>1. Use Data Setup to instrument a Python application</h2><p>Within the O11y Cloud UI:</p><p>Data Management -> Add Integration -> Monitor Applications -> Python (traces) -> Add Integration</p><p>Provide the following to the Configure Integration Wizard:</p><ul><li><p>Service: review</p></li><li><p>Django: no</p></li><li><p>collector endpoint: <code>http://localhost:4317</code></p></li><li><p>Environment: rtapp-workshop-[YOURNAME]</p></li><li><p>Kubernetes: yes</p></li><li><p>Legacy Agent: no</p></li></ul><p><a href=#R-image-fc725c6149becc12da1b4af31df457c1 class=lightbox-link><img alt=o11y_cloud_ui class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/configureintegration.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fc725c6149becc12da1b4af31df457c1><img alt=o11y_cloud_ui class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/configureintegration.png></a></p><p>We are instructed to:</p><ul><li>Install the instrumentation packages for your Python environment.</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pip install splunk-opentelemetry[all]
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>splunk-py-trace-bootstrap</span></span></code></pre></div><ul><li><p>Configure the Downward API to expose environment variables to Kubernetes resources.</p><p>For example, update a Deployment to inject environment variables by adding <code>.spec.template.spec.containers.env</code> like:</p></li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>your-application</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myapp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_OTEL_AGENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;review&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=rtapp-workshop-stevel&#34;</span></span></span></code></pre></div><ul><li><p>Enable the Splunk OTel Python agent by editing your Python service command.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>splunk-py-trace python3 main.py --port=8000</span></span></code></pre></div></li><li><p>The actions we must perform include:</p><ul><li>Update the Dockerfile to install the splunk-opentelemetry packages</li><li>Update the deployment.yaml for each service to include these environment variables which will be used by the pod and container.</li><li>Update our Dockerfile for REVIEW so that our program is bootstrapped with splunk-py-trace</li></ul></li></ul><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>We will accomplish this by:</p><ol><li>generating a new requirements.txt file</li><li>generating a new container image with an updated Dockerfile for REVIEW and then</li><li>update the review.deployment.yaml to capture all of these changes.</li></ol></div></details><h2 id=2-update-the-review-container>2. Update the REVIEW container</h2><ul><li><p>Generate a new container image</p></li><li><p>Update the Dockerfile for REVIEW (<code>/workshop/flask_apps_finish/review</code>)</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.10-slim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> requirements.txt /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install -r requirements.txt<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install splunk-opentelemetry<span class=o>[</span>all<span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> splk-py-trace-bootstrap<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./review.py /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 5000</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span> <span class=s2>&#34;splunk-py-trace&#34;</span> <span class=p>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span> <span class=s2>&#34;python&#34;</span><span class=p>,</span> <span class=s2>&#34;review.py&#34;</span> <span class=p>]</span></span></span></code></pre></div></li></ul><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Note that the only lines, in bold, added to the Dockerfile</p></div></details><ul><li>Generate a new container image with docker build in the ‘finished’ directory</li><li>Notice that I have changed the repository name from <code>localhost:8000/review:0.01</code> to <code>localhost:8000/review-splkotel:0.01</code></li></ul><p>Ensure you are in the correct directory.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>pwd</span>
</span></span><span class=line><span class=cl>./workshop/flask_apps_finish/review</span></span></code></pre></div><div class=tab-panel data-tab-group=b338f68ebf8722e69600e4d3162ed3f1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=docker-build class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b338f68ebf8722e69600e4d3162ed3f1","docker-build")'>
<span class=tab-nav-text>docker build</span>
</button>
<button data-tab-item=docker-build-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("b338f68ebf8722e69600e4d3162ed3f1","docker-build-output")'>
<span class=tab-nav-text>docker build Output</span></button></div><div class=tab-content-container><div data-tab-item=docker-build class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -f Dockerfile.review -t localhost:8000/review-splkotel:0.01 .</span></span></code></pre></div></div></div><div data-tab-item=docker-build-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[+] Building 27.1s (12/12) FINISHED
</span></span><span class=line><span class=cl>=&gt; [internal] load build definition from Dockerfile                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring dockerfile: 364B                                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load .dockerignore                                                                           0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring context: 2B                                                                             0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load metadata for docker.io/library/python:3.10-slim                                         1.6s
</span></span><span class=line><span class=cl>=&gt; [auth] library/python:pull token for registry-1.docker.io                                               0.0s
</span></span><span class=line><span class=cl>=&gt; [1/6] FROM docker.io/library/python:3.10-slim@sha256:54956d6c929405ff651516d5ebbc204203a6415c9d2757aad  0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load build context                                                                           0.3s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring context: 1.91kB                                                                         0.3s
</span></span><span class=line><span class=cl>=&gt; CACHED [2/6] WORKDIR /app                                                                               0.0s
</span></span><span class=line><span class=cl>=&gt; [3/6] COPY requirements.txt /app                                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; [4/6] RUN pip install -r requirements.txt                                                              15.3s
</span></span><span class=line><span class=cl>=&gt; [5/6] RUN splk-py-trace-bootstrap                                                                       9.0s
</span></span><span class=line><span class=cl>=&gt; [6/6] COPY ./review.py /app                                                                             0.0s
</span></span><span class=line><span class=cl>=&gt; exporting to image                                                                                      0.6s
</span></span><span class=line><span class=cl>=&gt; =&gt; exporting layers                                                                                     0.6s
</span></span><span class=line><span class=cl>=&gt; =&gt; writing image sha256:164977dd860a17743b8d68bcc50c691082bd3bfb352d1025dc3a54b15d5f4c4d                0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; naming to docker.io/localhost:8000/review-splkotel:0.01                                              0.0s</span></span></code></pre></div></div></div></div></div><ul><li>Push the image to Docker Hub with docker push command</li></ul><div class=tab-panel data-tab-group=0c106a8153954b88724ddd2ad4de1576><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=docker-push class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0c106a8153954b88724ddd2ad4de1576","docker-push")'>
<span class=tab-nav-text>docker push</span>
</button>
<button data-tab-item=docker-push-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("0c106a8153954b88724ddd2ad4de1576","docker-push-output")'>
<span class=tab-nav-text>docker push Output</span></button></div><div class=tab-content-container><div data-tab-item=docker-push class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker push localhost:8000/review-splkotel:0.01</span></span></code></pre></div></div></div><div data-tab-item=docker-push-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>The push refers to repository [docker.io/localhost:8000/review-splkotel]
</span></span><span class=line><span class=cl>682f0e550f2c: Pushed
</span></span><span class=line><span class=cl>dd7dfa312442: Pushed
</span></span><span class=line><span class=cl>917fd8334695: Pushed
</span></span><span class=line><span class=cl>e6782d51030d: Pushed
</span></span><span class=line><span class=cl>c6b19a64e528: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>8f52e3bfc0ab: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>f90b85785215: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>d5c0beb90ce6: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>3759be374189: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>fd95118eade9: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>0.01: digest: sha256:3b251059724dbb510ea81424fc25ed03554221e09e90ef965438da33af718a45 size: 2412</span></span></code></pre></div></div></div></div></div><h2 id=3-update-the-review-deployment-in-kubernetes>3. Update the REVIEW deployment in Kubernetes</h2><ul><li><p>review.deployment.yaml must be updated with the following changes:</p><ul><li>Load the new container image on Docker Hub</li><li>Add environment variables so traces can be emitted to the OTEL collector</li></ul></li><li><p>The deployment must be replaced using the updated review.deployment.yaml</p><ul><li><p>Update review.deployment.yaml (updates highlighted in bold)</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>regcred</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8000/review-splkotel:0.01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_OTEL_AGENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;review&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_METRICS_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):9943&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;deployment.environment=rtapp-workshop-stevel&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span></span></span></code></pre></div></li></ul></li><li><p>Apply review.deployment.yaml. Kubernetes will automatically pick up the changes to the deployment and redeploy new pods with these updates</p><ul><li>Notice that the review-* pod has been restarted</li></ul></li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f review.deployment.yaml</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                              READY   STATUS        RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-client                                                      0/1     Unknown       0          155d
</span></span><span class=line><span class=cl>curl                                                              0/1     Unknown       0          155d
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running       0          26h
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running       0          26h
</span></span><span class=line><span class=cl>kafka-exporter-647bddcbfc-h9gp5                                   1/1     Running       2          26h
</span></span><span class=line><span class=cl>mongodb-6f6c78c76-kl4vv                                           2/2     Running       0          26h
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running       1          26h
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running       1          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-n4dfn                      2/2     Running       0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-k8s-cluster-receiver-5f48v296j   1/1     Running       0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-jqxhh                      2/2     Running       0          26h
</span></span><span class=line><span class=cl>review-6686859bd7-4pf5d                                           1/1     Running       0          11s
</span></span><span class=line><span class=cl>review-5dd8cfd77b-52jbd                                           0/1     Terminating   0          2d10h
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>kubectl get pods
</span></span><span class=line><span class=cl>NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-client                                                      0/1     Unknown   0          155d
</span></span><span class=line><span class=cl>curl                                                              0/1     Unknown   0          155d
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running   0          26h
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running   0          26h
</span></span><span class=line><span class=cl>kafka-exporter-647bddcbfc-h9gp5                                   1/1     Running   2          26h
</span></span><span class=line><span class=cl>mongodb-6f6c78c76-kl4vv                                           2/2     Running   0          26h
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running   1          26h
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running   1          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-n4dfn                      2/2     Running   0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-k8s-cluster-receiver-5f48v296j   1/1     Running   0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-jqxhh                      2/2     Running   0          26h
</span></span><span class=line><span class=cl>review-6686859bd7-4pf5d                                           1/1     Running   0          15s</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-system-logs-with-splunk-universal-forwarder>Monitor System Logs with Splunk Universal Forwarder</h1><p><strong>Objective:</strong> Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise</p><p><strong>Duration</strong>: 10 Minutes</p><h2 id=scenario>Scenario</h2><p>You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.</p><h3 id=1-ensure-youre-in-the-correct-directory>1. Ensure You&rsquo;re in the Correct Directory</h3><ul><li>we will need to be in /home/splunk/session-2</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/session-2</span></span></code></pre></div><h3 id=2-review-the-universal-forwarder-install-script>2. Review the Universal Forwarder Install Script</h3><ul><li>Let&rsquo;s take a look at the script that will install the Universal Forwarder and Linux TA automatically for you.<ul><li>This script is primarily used for remote instances.</li><li>Note we are not using a deployment server in this lab, however it is recommended in production we do that.</li><li>What user are we installing Splunk as?</li></ul></li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh  
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># This EXAMPLE script shows how to deploy the Splunk universal forwarder</span>
</span></span><span class=line><span class=cl><span class=c1># to many remote hosts via ssh and common Unix commands.</span>
</span></span><span class=line><span class=cl><span class=c1># For &#34;real&#34; use, this script needs ERROR DETECTION AND LOGGING!!</span>
</span></span><span class=line><span class=cl><span class=c1># --Variables that you must set -----</span>
</span></span><span class=line><span class=cl><span class=c1># Set username using by splunkd to run.</span>
</span></span><span class=line><span class=cl>  <span class=nv>SPLUNK_RUN_USER</span><span class=o>=</span><span class=s2>&#34;ubuntu&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Populate this file with a list of hosts that this script should install to,</span>
</span></span><span class=line><span class=cl><span class=c1># with one host per line. This must be specified in the form that should</span>
</span></span><span class=line><span class=cl><span class=c1># be used for the ssh login, ie. username@host</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Example file contents:</span>
</span></span><span class=line><span class=cl><span class=c1># splunkuser@10.20.13.4</span>
</span></span><span class=line><span class=cl><span class=c1># splunkker@10.20.13.5</span>
</span></span><span class=line><span class=cl>  <span class=nv>HOSTS_FILE</span><span class=o>=</span><span class=s2>&#34;myhost.txt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># This should be a WGET command that was *carefully* copied from splunk.com!!</span>
</span></span><span class=line><span class=cl><span class=c1># Sign into splunk.com and go to the download page, then look for the wget</span>
</span></span><span class=line><span class=cl><span class=c1># link near the top of the page (once you have selected your platform)</span>
</span></span><span class=line><span class=cl><span class=c1># copy and paste your wget command between the &#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>WGET_CMD</span><span class=o>=</span><span class=s2>&#34;wget -O splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz &#39;https://download.splunk.com/products/universalforwarder/releases/9.0.3/linux/splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#39;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Set the install file name to the name of the file that wget downloads</span>
</span></span><span class=line><span class=cl><span class=c1># (the second argument to wget)</span>
</span></span><span class=line><span class=cl>  <span class=nv>INSTALL_FILE</span><span class=o>=</span><span class=s2>&#34;splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># After installation, the forwarder will become a deployment client of this</span>
</span></span><span class=line><span class=cl><span class=c1># host.  Specify the host and management (not web) port of the deployment server</span>
</span></span><span class=line><span class=cl><span class=c1># that will be managing these forwarder instances.</span>
</span></span><span class=line><span class=cl><span class=c1># Example 1.2.3.4:8089</span>
</span></span><span class=line><span class=cl><span class=c1>#  DEPLOY_SERVER=&#34;x.x.x.x:8089&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># After installation, the forwarder can have additional TA&#39;s added to the </span>
</span></span><span class=line><span class=cl><span class=c1># /app directory please provide the local where TA&#39;s will be. </span>
</span></span><span class=line><span class=cl>  <span class=nv>TA_INSTALL_DIRECTORY</span><span class=o>=</span><span class=s2>&#34;/home/splunk/session-2&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set the seed app folder name for deploymentclien.conf</span>
</span></span><span class=line><span class=cl><span class=c1>#  DEPLOY_APP_FOLDER_NAME=&#34;seed_all_deploymentclient&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Set the new Splunk admin password</span>
</span></span><span class=line><span class=cl>  <span class=nv>PASSWORD</span><span class=o>=</span><span class=s2>&#34;buttercup&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>REMOTE_SCRIPT_DEPLOY</span><span class=o>=</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>  cd /opt
</span></span></span><span class=line><span class=cl><span class=s2>  sudo </span><span class=nv>$WGET_CMD</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo tar xvzf </span><span class=nv>$INSTALL_FILE</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo rm </span><span class=nv>$INSTALL_FILE</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo useradd </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo find </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2> -name &#39;*.tgz&#39; -exec tar xzvf {} --directory /opt/splunkforwarder/etc/apps \;
</span></span></span><span class=line><span class=cl><span class=s2>  sudo chown -R </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>:</span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2> /opt/splunkforwarder
</span></span></span><span class=line><span class=cl><span class=s2>  echo \&#34;[user_info] 
</span></span></span><span class=line><span class=cl><span class=s2>  USERNAME = admin
</span></span></span><span class=line><span class=cl><span class=s2>  PASSWORD = </span><span class=nv>$PASSWORD</span><span class=s2>\&#34; &gt; /opt/splunkforwarder/etc/system/local/user-seed.conf   
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo cp </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2>/*.tgz /opt/splunkforwader/etc/apps/
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo find /opt/splunkforwarder/etc/apps/ -name &#39;*.tgz&#39; -exec tar xzvf {} \;
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo -u splunk /opt/splunkforwarder/bin/splunk start --accept-license --answer-yes --auto-ports --no-prompt
</span></span></span><span class=line><span class=cl><span class=s2>  /opt/splunkforwarder/bin/splunk start --accept-license --answer-yes --auto-ports --no-prompt
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo /opt/splunkforwarder/bin/splunk enable boot-start -user </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  /opt/splunkforwarder/bin/splunk enable boot-start -user </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo cp </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2>/*.tgz /opt/splunkforwarder/etc/apps/
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  exit
</span></span></span><span class=line><span class=cl><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span> <span class=nb>cd</span> <span class=s2>&#34;</span><span class=k>$(</span> dirname <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BASH_SOURCE</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span> <span class=k>)</span><span class=s2>&#34;</span> &gt;/dev/null <span class=o>&amp;&amp;</span> <span class=nb>pwd</span> <span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#===============================================================================================</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;In 5 seconds, will run the following script on each remote host:&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;====================&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$REMOTE_SCRIPT_DEPLOY</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;====================&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> 
</span></span><span class=line><span class=cl>  sleep <span class=m>5</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Reading host logins from </span><span class=nv>$HOSTS_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Starting.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> DST in <span class=sb>`</span>cat <span class=s2>&#34;</span><span class=nv>$DIR</span><span class=s2>/</span><span class=nv>$HOSTS_FILE</span><span class=s2>&#34;</span><span class=sb>`</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;---------------------------&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Installing to </span><span class=nv>$DST</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Initial UF deployment&#34;</span>
</span></span><span class=line><span class=cl>    sudo ssh -t <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$REMOTE_SCRIPT_DEPLOY</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>done</span>  
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;---------------------------&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Done&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Please use the following app folder name to override deploymentclient.conf options: </span><span class=nv>$DEPLOY_APP_FOLDER_NAME</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 id=3-run-the-install-script>3. Run the install script</h3><p>We will run the install script now. You will see some Warnings at the end. This is totally normal. The script is built for use on remote machines, however for todays lab you will be using localhost.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install.sh</span></span></code></pre></div><p>You will be asked <code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code>
Answer Yes.</p><p>Enter your ssh password when prompted.</p><h3 id=4-verify-installation-of-the-universal-forwarader>4. Verify installation of the Universal Forwarader</h3><ul><li>We need to verify that the Splunk Universal Forwarder is installed and running.<ul><li>You should see a couple PID&rsquo;s return and a &ldquo;Splunk is currently running.&rdquo; message.</li></ul></li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/opt/splunkforwarder/bin/splunk status</span></span></code></pre></div><h4 id=5-configure-the-universal-forwarder-to-send-data-to-splunk-enterprise>5. Configure the Universal Forwarder to Send Data to Splunk Enterprise</h4><ul><li>We will be able to send the data to our Splunk Enterprise environment easily by entering one line into the cli.<ul><li><a href=https://docs.splunk.com/Documentation/Forwarder/9.0.3/Forwarder/Configuretheuniversalforwarder rel=external target=_blank>Universal Forwarder Config Guide</a></li></ul></li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/opt/splunkforwarder/bin/splunk add forward-server &lt;your_splunk_enterprise_ip&gt;:9997</span></span></code></pre></div><h4 id=6-verify-the-data-in-your-splunk-enterprise-environment>6. Verify the Data in Your Splunk Enterprise Environment</h4><ul><li><p>We are now going to take a look at the Splunk Enterprise environment to verify logs are coming in.</p><ul><li>Logs will be coming into <code>index=main</code></li></ul></li><li><p>Open your web browser and navigate to: <code>http://&lt;your_splunk_enterprise_ip:8000</code></p><ul><li>You will use the credentials <code>admin:&lt;your_ssh_password></code></li></ul></li><li><p>In the search bar, type in the following:</p></li><li><p><code>index=main host=&lt;your_host_name></code></p></li><li><p>You should see data from your host. Take note of the interesting fields and the different data sources flowing in.</p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-oncall>Splunk OnCall</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 hour 30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Geoff Higginbottom</span></span><h2 id=aim>Aim</h2><p>This module is simply to ensure you have access to the Splunk On-Call UI (formerly known as VictorOps), Splunk Infrastructure Monitoring UI (formerly known as SignalFx) and the EC2 Instance which has been allocated to you.</p><p>Once you have access to each platform, keep them open for the duration of the workshop as you will be switching between them and the workshop instructions.</p><h2 id=1-activate-your-splunk-on-call-login>1. Activate your Splunk On-Call Login</h2><p>You should have received an invitation to Activate your Splunk On-Call account via e-mail, if you have not already done so, click the <em>Activate Account</em> link and follow the prompts.</p><p>If you did not receive an invitation it is probably because you already have a Splunk On-Call login, linked to a different organization.</p><p>If so log in to that Org, then use the organization dropdown next to your username in the top left to switch to the Observability Workshop Org.</p><p><a href=#R-image-476d14454b54c98b3f0b1dc84a04a96d class=lightbox-link><img alt="Switch Org" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/switch-org.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-476d14454b54c98b3f0b1dc84a04a96d><img alt="Switch Org" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/switch-org.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>If you do not see the Organisation dropdown menu item next to your name with Observability Workshop EMEA that is OK, it simply means you only have access to a single Org so that menu is not visible to you.</p><p>If you have forgotten your password go to the <a href=https://portal.victorops.com/membership/#/ rel=external target=_blank>https://portal.victorops.com/membership/#/</a> page and use the forgotten password link to reset your password.</p><p><a href=#R-image-e36d4d642024aa7d272098f75a5facad class=lightbox-link><img alt="Reset Pwd" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/reset-password.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e36d4d642024aa7d272098f75a5facad><img alt="Reset Pwd" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/reset-password.png></a></p></div></details><h2 id=2-activate-your-splunk-infrastructure-monitoring-login>2. Activate your Splunk Infrastructure Monitoring Login</h2><p>You should have received an invitation to join the Splunk Infrastructure Monitoring - Observability Workshop. If you have not already done so click the <span class="btn cstyle transparent"><span><span class=title>JOIN NOW</span></span></span> button and follow the prompts to set a password and activate your login.</p><h2 id=3-access-your-ec2-instance>3. Access your EC2 Instance</h2><p>Splunk has provided you with a dedicated EC2 Instance which you can use during this workshop for triggering Incidents the same way the instructor did during the introductory demo. This VM has Splunk Infrastructure Monitoring deployed and has an associated Detector configured. The Detector will pass Alerts to Splunk On-Call which will then create Incidents and page the on-call user.</p><p>The welcome e-mail you received providing you all the details for this Workshop contain the instructions for accessing your allocated EC2 Instance.</p><h3 id=ssh-mac-oslinux>SSH (Mac OS/Linux)</h3><p>Most attendees will be able to connect to the workshop by using SSH from their Mac or Linux device.</p><p>To use SSH, open a terminal on your system and type <code>ssh splunk@x.x.x.x</code> (replacing x.x.x.x with the IP address found in your welcome e-mail).</p><p><a href=#R-image-8c092f500a2616051838cf37eb840822 class=lightbox-link><img alt="ssh login" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8c092f500a2616051838cf37eb840822><img alt="ssh login" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-1.png></a></p><p>When prompted <strong><code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></strong> please type <strong><code>yes</code></strong>.</p><p><a href=#R-image-7c6696f08934daa38e87d707cb11d9e4 class=lightbox-link><img alt="ssh password" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7c6696f08934daa38e87d707cb11d9e4><img alt="ssh password" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-2.png></a></p><p>Enter the password provided in the welcome e-mail.</p><p>Upon successful login you will be presented with the Splunk logo and the Linux prompt.</p><p><a href=#R-image-085565eddc94c8d9de62c1e4e8fb3c83 class=lightbox-link><img alt="ssh connected" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-085565eddc94c8d9de62c1e4e8fb3c83><img alt="ssh connected" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/ssh-3.png></a></p><p>At this point you are ready to <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><hr><h3 id=putty-windows-users-only>Putty (Windows users only)</h3><p>If you do not have ssh pre-installed or if you are on a Windows system, the best option is to install putty, you can find the downloads <a href=https://www.putty.org/ rel=external target=_blank>here</a>.</p><p>!!! important
If you <strong>cannot</strong> install Putty, please go to <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/index.html#web-browser-all>Web Browser (All)</a>.</p><p>Open Putty and in the <strong>Host Name (or IP address)</strong> field enter the IP address provided in the welcome e-mail.</p><p>You can optionally save your settings by providing a name and pressing <strong>Save</strong>.</p><p><a href=#R-image-1931665b612174082e4acaed45ec3476 class=lightbox-link><img alt=putty-2 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1931665b612174082e4acaed45ec3476><img alt=putty-2 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-settings.png></a></p><p>To then login to your instance click on the <strong>Open</strong> button as shown above.</p><p>If this is the first time connecting to your EC2 instance, you will be presented with a security dialogue, please click <strong>Yes</strong>.</p><p><a href=#R-image-4179131e3afdd1a8dd44f21923e790ef class=lightbox-link><img alt=putty-3 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4179131e3afdd1a8dd44f21923e790ef><img alt=putty-3 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-security.png></a></p><p>Once connected, login in as <strong>splunk</strong> using the password provided in the welcome e-mail.</p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-edf55e77ab0af469cee30e196a833dfc class=lightbox-link><img alt=putty-4 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-edf55e77ab0af469cee30e196a833dfc><img alt=putty-4 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/putty-loggedin.png></a></p><p>At this point you are ready to <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><hr><h3 id=web-browser-all>Web Browser (All)</h3><p>If you are blocked from using SSH (Port 22) or unable to install Putty you may be able to connect to the workshop instance by using a web browser.</p><p>!!! note
This assumes that access to port 6501 is not restricted by your company&rsquo;s firewall.</p><p>Open your web browser and type <code>http://x.x.x.x:650</code> (where <code>x.x.x.x</code> is the IP address from the welcome e-mail).</p><p><a href=#R-image-e477893bde38b19f08117c56154ec111 class=lightbox-link><img alt=http-6501 class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-url.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e477893bde38b19f08117c56154ec111><img alt=http-6501 class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-url.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the welcome e-mail.</p><p><a href=#R-image-60d1a99280a51fc06ee89b9ebfc4a1aa class=lightbox-link><img alt=http-connect class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-60d1a99280a51fc06ee89b9ebfc4a1aa><img alt=http-connect class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-connect.png></a></p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-d67860bc99bf51b89bfbe2913f9b24d2 class=lightbox-link><img alt="web login" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d67860bc99bf51b89bfbe2913f9b24d2><img alt="web login" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-login.png></a></p><hr><h3 id=copy--paste-in-browser>Copy & Paste in browser</h3><p>Unlike when you are using regular SSH, <em>copy and paste</em> does require a few extra steps to complete when using a browser session. This is due to cross browser restrictions.</p><p>When the workshop asks you to copy instructions into your terminal, please do the following:</p><p><em>Copy the instruction as normal, but when ready to paste it in the web terminal, choose <strong>Paste from browser</strong> as show below:</em></p><p><a href=#R-image-59f410f02c4d30d5e224f32ea22e2e5c class=lightbox-link><img alt="web paste 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-paste-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-59f410f02c4d30d5e224f32ea22e2e5c><img alt="web paste 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-paste-browser.png></a></p><p>This will open a dialogue box asking for the text to be pasted into the web terminal:</p><p><a href=#R-image-95b79498a96e07c5fe472b4d3c4ed484 class=lightbox-link><img alt="web paste 3" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-example-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95b79498a96e07c5fe472b4d3c4ed484><img alt="web paste 3" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/images/shellinabox-example-1.png></a></p><p>Paste the text in the text box as show, then press <strong>OK</strong> to complete the copy and paste process.</p><details open class="box cstyle notices primary"><summary class="box-label a11y-only"><span class=a11y-only>Details</span></summary><div class=box-content><p>Unlike regular SSH connection, the web browser has a 60 second time out, and you will be disconnected, and a <strong>Connect</strong> button will be shown in the center of the web terminal.</p><p>Simply click the <strong>Connect</strong> button and you will be reconnected and will be able to continue.</p></div></details><p>At this point you are ready to <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk OnCall</h1><article class=default><header class=headline></header><h1 id=user-profile>User Profile</h1><h2 id=aim>Aim</h2><p>The aim of this module is for you to configure your personal profile which controls how you will be notified by Splunk On-Call whenever you get paged.</p><h2 id=1-contact-methods>1. Contact Methods</h2><p>Switch to the Splunk On-Call UI and click on your login name in the top right hand corner and chose <strong>Profile</strong> from the drop down. Confirm your contact methods are listed correctly and add any additional phone numbers and e-mail address you wish to use.</p><h2 id=2-mobile-devices>2. Mobile Devices</h2><p>To install the Splunk On-Call app for your smartphone search your phones App Store for Splunk On-Call to find the appropriate version of the app. The publisher should be listed as VictorOps Inc.</p><p><a href=https://apps.apple.com/us/app/victorops/id696974262 rel=external target=_blank>Apple Store</a></p><p><a href="https://play.google.com/store/apps/details?id=com.victorops.androidclient&hl=en" rel=external target=_blank>Google Play</a></p><p>Configuration help guides are available:</p><ul><li><a href=https://help.victorops.com/knowledge-base/ios-application/ rel=external target=_blank>Apple</a></li><li><a href=https://help.victorops.com/knowledge-base/android-devices-victorops/ rel=external target=_blank>Android</a></li></ul><p>Install the App and login, then refresh the Profile page and your device should now be listed under the devices section. Click the <strong>Test push notification</strong> button and confirm you receive the test message.</p><h2 id=3-personal-calendar>3. Personal Calendar</h2><p>This link will enable you to sync your on-call schedule with your calendar, however as you do not have any allocated shifts yet this will currently be empty. You can add it to your calendar by copying the link into your preferred application and setting it up as a new subscription.</p><h2 id=4-paging-policies>4. Paging Policies</h2><p>Paging Polices specify how you will be contacted when on-call. The Primary Paging Policy will have defaulted to sending you an SMS assuming you added your phone number when activating your account. We will now configure this policy into a three tier multi-stage policy similar to the image below.</p><p><a href=#R-image-0559974e8643ee7fbad311aecf62948e class=lightbox-link><img alt="Paging Policy" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/primary-paging-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0559974e8643ee7fbad311aecf62948e><img alt="Paging Policy" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/primary-paging-policy.png></a></p><h3 id=41-send-a-push-notification>4.1 Send a push notification</h3><p>Click the edit policy button in the top right corner for the Primary Paging Policy.</p><ul><li>Send a push notification to all my devices</li><li>Execute the next step if I have not responded within 5 minutes</li></ul><p><a href=#R-image-bdde3ff326b213be66d3732f70bb2784 class=lightbox-link><img alt="Step 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/pri-page-step1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bdde3ff326b213be66d3732f70bb2784><img alt="Step 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/pri-page-step1.png></a></p><p>Click <strong>Add a Step</strong></p><h3 id=42-send-an-e-mail>4.2 Send an e-mail</h3><ul><li>Send an e-mail to [your email address]</li><li>Execute the next step if I have not responded within 5 minutes</li></ul><p><a href=#R-image-fadb485b6ac2ab956c08528972dfa0f2 class=lightbox-link><img alt="Step 2" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/pri-page-step2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fadb485b6ac2ab956c08528972dfa0f2><img alt="Step 2" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/pri-page-step2.png></a></p><p>Click <strong>Add a Step</strong></p><h3 id=43-call-your-number>4.3 Call your number</h3><ul><li>Every 5 minutes until we have reached you</li><li>Make a phone call to [your phone number]</li></ul><p>Click <span class="btn cstyle default" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy.</p><p><a href=#R-image-31b3da85c81889d337bcaf1e9ce35c6b class=lightbox-link><img alt="Step 3" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/pri-page-step3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31b3da85c81889d337bcaf1e9ce35c6b><img alt="Step 3" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/pri-page-step3.png></a></p><p>When you are on-call or in the escalation path of an incident, you will receive notifications in this order following these time delays.</p><p>To cease the paging you must acknowledge the incident. Acknowledgements can occur in one of the following ways:</p><ul><li>Expanding the Push Notification on your device and selecting Acknowledge</li><li>Responding to the SMS with the 5 digit code included</li><li>Pressing 4 during the Phone Call</li><li>Slack Button</li></ul><p>For more information on Notification Types, see <a href=https://help.victorops.com/knowledge-base/notification-types/ rel=external target=_blank>here</a>.</p><h2 id=5-custom-paging-policies>5. Custom Paging Policies</h2><p>Custom paging polices enable you to override the primary policy based on the time and day of the week. A good example would be to get the system to immediately phone you whenever you get a page during the evening or weekends as this is more likely to get your attention than a push notification.</p><p>Create a new Custom Policy by clicking <strong>Add a Policy</strong> and configure with the following settings:</p><h3 id=51-custom-evening-policy>5.1 Custom evening policy</h3><p>Policy Name: Evening</p><ul><li>Every 5 minutes until we have reached you<ul><li>Make a phone call to [your phone number]</li><li>Time Period: All 7 Days</li><li>Time zone<ul><li>Between 7pm and 9am</li></ul></li></ul></li></ul><p><a href=#R-image-123161b6b6ff1500771946ae020fca30 class=lightbox-link><img alt=Evening class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/evening.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-123161b6b6ff1500771946ae020fca30><img alt=Evening class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/evening.png></a></p><p>Click <span class="btn cstyle default" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy then add one more.</p><h3 id=52-custom-weekend-policy>5.2 Custom weekend policy</h3><p>Policy Name: Weekend</p><ul><li>Every 5 minutes until we have reached you<ul><li>Make a phone call to [your phone number]</li><li>Time Period: Sat & Sun</li><li>Time zone<ul><li>Between 9am and 7pm</li></ul></li></ul></li></ul><p>Click <span class="btn cstyle default" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy.</p><p><a href=#R-image-6a8c01358f479605c4f947c85b5423bd class=lightbox-link><img alt=Weekends class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/weekends.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6a8c01358f479605c4f947c85b5423bd><img alt=Weekends class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/weekends.png></a></p><p>These custom paging policies will be used during the specified times in place of the Primary Policy. However, admins do have the ability to ignore these custom policies, and we will highlight how this is achieved in a later module.</p><p>The final option here is the setting for Recovery Notifications. These are typically low priority, will default to Push, but can also be email, sms or phone call. Your profile is now fully configured using these example configurations.</p><p>Organizations will have different views on how profiles should be configured and will typically issue guidelines for paging policies and times between escalations etc.</p><p>Please wait for the instructor before proceeding to the Teams module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=teams>Teams</h1><h2 id=aim>Aim</h2><p>The aim of this module is for you to complete the first step of Team configuration by adding users to your Team.</p><h2 id=1-find-your-team>1. Find your Team</h2><p>Navigate to the <strong>Teams</strong> tab on the main toolbar, you should find you that a Team has been created for you as part of the workshop pre-setup and you would have been informed of your Team Name via e-mail.</p><p>If you have found your pre-configured Team, <strong>skip Step 2.</strong> and proceed to <strong><a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/team/index.html#3-configure-your-team>Step 3. Configure Your Team</a></strong>. However, if you cannot find your allocated Team, you will need to create a new one, so proceed with <strong>Step 2. Create Team</strong></p><h2 id=2-create-team>2. Create Team</h2><p>Only complete this step if you <strong>cannot</strong> find your pre-allocated Team as detailed in your workshop e-mail. Select <strong>Add Team</strong>, then enter your allocated team name, this will typically be in the format of &ldquo;AttendeeID Workshop&rdquo; and then save by clicking the <strong>Add Team</strong> button.</p><h2 id=3-configure-your-team>3. Configure Your Team</h2><p>You now need to add other users to your team. If you are running this workshop using the Splunk provided environment, the following accounts are available for testing. If you are running this lab in your own environment, you will have been provided a list of usernames you can use in place of the table below.</p><p>These users are dummy accounts who will not receive notifications when they are on call.</p><table><thead><tr><th>Name</th><th>Username</th><th>Shift</th></tr></thead><tbody><tr><td>Duane Chow</td><td>duanechow</td><td>Europe</td></tr><tr><td>Steven Gomez</td><td>gomez</td><td>Europe</td></tr><tr><td>Walter White</td><td>heisenberg</td><td>Europe</td></tr><tr><td>Jim Halpert</td><td>jimhalpert</td><td>Asia</td></tr><tr><td>Lydia Rodarte-Quayle</td><td>lydia</td><td>Asia</td></tr><tr><td>Marie Schrader</td><td>marie</td><td>Asia</td></tr><tr><td>Maximo Arciniega</td><td>maximo</td><td>West Coast</td></tr><tr><td>Michael Scott</td><td>michaelscott</td><td>West Coast</td></tr><tr><td>Tuco Salamanca</td><td>tuco</td><td>West Coast</td></tr><tr><td>Jack Welker</td><td>jackwelker</td><td>24/7</td></tr><tr><td>Hank Schrader</td><td>hank</td><td>24/7</td></tr><tr><td>Pam Beesly</td><td>pambeesly</td><td>24/7</td></tr></tbody></table><p>Add the users to your team, using either the above list or the alternate one provided to you. The value in the <strong>Shift</strong> column can be ignored for now, but will be required for a later step.</p><p>Click <span class="btn cstyle default" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Invite User</span></span></span> button on the right hand side, then either start typing the usernames (this will filter the list), or copy and paste them into the dialogue box. Once all users are added to the list click the <strong>Add User</strong> button.</p><p><a href=#R-image-22087cd0197dcde5e500b64889ac16f6 class=lightbox-link><img alt="Add Team Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/add-team-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-22087cd0197dcde5e500b64889ac16f6><img alt="Add Team Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/add-team-members.png></a></p><p>To make a team member a Team Admin, simply click the :fontawesome-regular-edit: icon in the right hand column, pick any user and make them an Admin.</p><p><a href=#R-image-dd45040fdf37ffa4d2239aeef572e40d class=lightbox-link><img alt="Add Admin" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/team-admin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dd45040fdf37ffa4d2239aeef572e40d><img alt="Add Admin" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/team-admin.png></a></p><details open class="box cstyle notices default" style=--VARIABLE-BOX-color:info><summary class=box-label>Tip</summary><div class=box-content><p>For large team management you can use the APIs to streamline this process.</p></div></details><p>Continue and also complete the <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/rotations/index.html>Configure Rotations</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-rotations>Configure Rotations</h1><h2 id=aim>Aim</h2><p>A rotation is a recurring schedule, that consists of one or more shifts, with members who rotate through a shift.</p><p>The aim of this module is for you to configure two example Rotations, and assign Team Members to the Rotations.</p><hr><p>Navigate to the <strong>Rotations</strong> tab on the <strong>Teams</strong> sub menu, you should have no existing Rotations so we need to create some.</p><p>The 1st Rotation you will create is for a follow the sun support pattern where the members of each shift provide cover during their normal working hours within their time zone.</p><p>The 2nd will be a Rotation used to provide escalation support by more experienced senior members of the team, based on a 24/7, 1 week shift pattern.</p><h2 id=1-follow-the-sun-support---business-hours>1. Follow the Sun Support - Business Hours</h2><p>Click <strong>Add Rotation</strong></p><p><a href=#R-image-3cf161eb2794aa591783263b8441a5f7 class=lightbox-link><img alt="Add Rotation" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/add-rotation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3cf161eb2794aa591783263b8441a5f7><img alt="Add Rotation" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/add-rotation.png></a></p><p>Enter a name of &ldquo;<em>Follow the Sun Support - Business Hours</em>&rdquo; and Select <strong>Partial day</strong> from the three available shift templates.</p><p><a href=#R-image-4a5b43f9b612e7e463b5c27ee8684cec class=lightbox-link><img alt="Follow the Sun" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/follow-the-sun.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4a5b43f9b612e7e463b5c27ee8684cec><img alt="Follow the Sun" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/follow-the-sun.png></a></p><ul><li>Enter a Shift name of &ldquo;<em>Asia</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Asia/Tokyo</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Rotation</strong></li></ul><p><a href=#R-image-e21291fa5110b29eba409e13a761a765 class=lightbox-link><img alt="Asia Shift" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/asia-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e21291fa5110b29eba409e13a761a765><img alt="Asia Shift" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/asia-shift.png></a></p><p>You will now be prompted to add Members to this shift; add the Asia members who are <strong>Jim Halpert, Lydie Rodarte-Quayle and Marie Schrader</strong>, but only if you&rsquo;re using the Splunk provided environment for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-34c350cd1ad4120b9d60448c470e53ba class=lightbox-link><img alt="Asia Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/asia-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34c350cd1ad4120b9d60448c470e53ba><img alt="Asia Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/asia-members.png></a></p><p>Now add an 2nd shift for Europe by again clicking <strong>+Add a shift → Partial Day</strong></p><ul><li>Enter a Shift name of &ldquo;<em>Europe</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Europe/London</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Shift</strong></li></ul><p><a href=#R-image-ca7d4abd041a82c623ceb02a83177f02 class=lightbox-link><img alt="Europe Shift" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/europe-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ca7d4abd041a82c623ceb02a83177f02><img alt="Europe Shift" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/europe-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the Europe members who are <strong>Duane Chow, Steven Gomez and Walter White</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-b0c708c4f4d1744279c35232803147e7 class=lightbox-link><img alt="Europe Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/europe-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b0c708c4f4d1744279c35232803147e7><img alt="Europe Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/europe-members.png></a></p><p>Now add a 3rd shift for West Coast USA by again clicking <code>+Add a shift</code> - <code>Partial Day</code></p><ul><li>Enter a Shift name of &ldquo;<em>West Coast</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>US/Pacific</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Shift</strong></li></ul><p><a href=#R-image-ae1ac72ec3d16ba608cf32ee909926f1 class=lightbox-link><img alt="West Coast Shift" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/west-coast-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae1ac72ec3d16ba608cf32ee909926f1><img alt="West Coast Shift" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/west-coast-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the West Coast members who are <strong>Maximo Arciniega, Michael Scott and Tuco Salamanca</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-0eed2a5891f13596cbf07f41bc6c54eb class=lightbox-link><img alt="West Coast Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/west-coast-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0eed2a5891f13596cbf07f41bc6c54eb><img alt="West Coast Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/west-coast-members.png></a></p><p>The first user added will be the &lsquo;current&rsquo; user for that shift.</p><p>You can re-order the shifts by simply dragging the users up and down, and you can change the current user by clicking <code>Set Current</code> on an alternate user</p><p>You will now have three different Shift patterns, that provide cover 24hr hours, Mon - Fri, but with no cover at weekends.</p><p>We will now add another Rotation for our Senior SRE Escalation cover.</p><hr><h2 id=2-senior-sre-escalation>2. Senior SRE Escalation</h2><ul><li>Click <strong>Add Rotation</strong></li><li>Enter a name of &ldquo;<em>Senior SRE Escalation</em>&rdquo;</li><li>Select <code>24/7</code> from the three available shift templates</li><li>Enter a Shift name of &ldquo;<em>Senior SRE Escalation</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Asia/Tokyo</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>7 days at 9.00am</em>&rdquo;</li><li>The next handoff happens [select the next Monday from the date picker]</li><li>Click <strong>Save Rotation</strong></li></ul><p><a href=#R-image-8788d07a4fc5c4adefd049009d760d14 class=lightbox-link><img alt="24/7 Shift" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/24-7-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8788d07a4fc5c4adefd049009d760d14><img alt="24/7 Shift" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/24-7-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the 24/7 members who are <strong>Jack Welker, Hank Schrader and Pam Beesly</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-a09369e9fe81b45c5ed8cea612d1ec9e class=lightbox-link><img alt="24/7 Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/24-7-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a09369e9fe81b45c5ed8cea612d1ec9e><img alt="24/7 Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/24-7-members.png></a></p><hr><p>Please wait for the instructor before proceeding to the Configuring Escalation Policies module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-escalation-policies>Configure Escalation Policies</h1><h2 id=aim>Aim</h2><p>Escalation policies determine who is actually on-call for a given team and are the link to utilizing any rotations that have been created.</p><p>The aim of this module is for you to create three different Escalation Policies to demonstrate a number of different features and operating models.</p><p>The instructor will start by explaining the concepts before you proceed with the configuration.</p><hr><p>Navigate to the Escalation Polices tab on the Teams sub menu, you should have no existing Polices so we need to create some.</p><p><a href=#R-image-55dc422f28a5fef8c335fa44d2173655 class=lightbox-link><img alt="No Escalation Policies" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/no-escalation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-55dc422f28a5fef8c335fa44d2173655><img alt="No Escalation Policies" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/no-escalation.png></a></p><p>We are going to create the following Polices to cover off three typical use cases.</p><p><a href=#R-image-6717a6dba609a6da4045911666956d79 class=lightbox-link><img alt="Escalation Policies" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/escalation-policies.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6717a6dba609a6da4045911666956d79><img alt="Escalation Policies" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/escalation-policies.png></a></p><h2 id=1-247-policy>1. 24/7 Policy</h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: 24/7</li><li>Step 1</li><li>Immediately<ul><li>Notify the on-duty user(s) in rotation → Senior SRE Escalation</li><li>Click <strong>Save</strong></li></ul></li></ul><p><a href=#R-image-31e4cdee96e4a990c33dd1153da044aa class=lightbox-link><img alt="24/7 Escalation Policy " class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/24-7-escalation-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31e4cdee96e4a990c33dd1153da044aa><img alt="24/7 Escalation Policy " class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/24-7-escalation-policy.png></a></p><h2 id=2-primary-policy>2. Primary Policy</h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: Primary</li><li>Step 1</li><li>Immediately</li><li>Notify the on-duty user(s) in rotation → Follow the Sun Support - Business Hours</li><li>Click <strong>Add Step</strong></li></ul><p><a href=#R-image-32fe6f180f809e2d3e9102fecf134b14 class=lightbox-link><img alt="Pri Escalation Policy Step 1" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/pri-escalation-policy-step-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-32fe6f180f809e2d3e9102fecf134b14><img alt="Pri Escalation Policy Step 1" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-1.png></a></p><ul><li>Step 2</li><li>If still un-acknowledged after 15 minutes</li><li>Notify the next user(s) in the current on-duty shift → Follow the Sun Support - Business Hours</li><li>Click <strong>Add Step</strong></li></ul><p><a href=#R-image-63b788bbdb5147f3a0ac541589338ab3 class=lightbox-link><img alt="Pri Escalation Policy Step 2" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/pri-escalation-policy-step-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-63b788bbdb5147f3a0ac541589338ab3><img alt="Pri Escalation Policy Step 2" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-2.png></a></p><ul><li>Step 3</li><li>If still un-acknowledged after 15 more minutes</li><li>Execute Policy → [Your Team Name] : 24/7</li><li>Click <strong>Save</strong></li></ul><p><a href=#R-image-ad1805c6aa890dd2ed3f7a1dc15ec301 class=lightbox-link><img alt="Pri Escalation Policy Step 3" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/pri-escalation-policy-step-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ad1805c6aa890dd2ed3f7a1dc15ec301><img alt="Pri Escalation Policy Step 3" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-3.png></a></p><h2 id=3-waiting-room-policy>3. Waiting Room Policy</h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: Waiting Room</li><li>Step 1</li><li>If still un-acknowledged after 10 more minutes</li><li>Execute Policy → [Your Team Name] : Primary</li><li>Click <strong>Save</strong></li></ul><p><a href=#R-image-f5b5aefa65cff9180148b0d28ee243c4 class=lightbox-link><img alt="WR Escalation Policy" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/wr-escalation-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5b5aefa65cff9180148b0d28ee243c4><img alt="WR Escalation Policy" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/wr-escalation-policy.png></a></p><p>You should now have the following three escalation polices:</p><p><a href=#R-image-4589039fa4ca6d07f30bf37e803da24c class=lightbox-link><img alt="Escalation Policies" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/escalation-policies.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4589039fa4ca6d07f30bf37e803da24c><img alt="Escalation Policies" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/escalation-policies.png></a></p><p>You may have noticed that when we created each policy there was the following warning message:</p><details open class="box cstyle notices warning"><summary class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>There are no routing keys for this policy - it will only receive incidents via manual reroute or when on another escalation policy</p></div></details><p>This is because there are no Routing Keys linked to these Escalation Polices, so now that we have these polices configured we can create the Routing Keys and link them to our Polices..</p><hr><p>Continue and also complete the <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/getting_started/routing/index.html>Creating Routing Keys</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=creating-routing-keys>Creating Routing Keys</h1><h2 id=aim>Aim</h2><p>Routing Keys map the incoming alert messages from your monitoring system to an Escalation Policy which in turn sends the notifications to the appropriate team.</p><p>Note that routing keys are case insensitive and should only be composed of letters, numbers, hyphens, and underscores.</p><p>The aim of this module is for you to create some routing keys and then link them to your Escalation Policies you have created in the previous exercise.</p><hr><h2 id=1-instance-id>1. Instance ID</h2><p>Each participant requires a unique Routing Key so we use the Hostname of the EC2 Instance you were allocated. We are only doing this to ensure your Routing Key is unique and we know all Hostnames are unique. In a production deployment the Routing Key would typically reflect the name of a System or Service being monitored, or a Team such as 1st Line Support etc.</p><p>Your welcome e-mail informed you of the details of your EC2 Instance that has been provided for you to use during this workshop and you should have logged into this as part of the 1st exercise.</p><p>The e-mail also contained the Hostname of the Instance, but you can also obtain it from the Instance directly. To get your Hostname from within the shell session connected to your Instance run the following command:</p><div class=tab-panel data-tab-group=8f9fad3243816cfe39e829381a38ccf9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=export-hostname class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8f9fad3243816cfe39e829381a38ccf9","export-hostname")'>
<span class=tab-nav-text>Export Hostname</span>
</button>
<button data-tab-item=example-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("8f9fad3243816cfe39e829381a38ccf9","example-output")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=export-hostname class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>HOSTNAME</span><span class=si>}</span></span></span></code></pre></div></div></div><div data-tab-item=example-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>zevn</span></span></code></pre></div></div></div></div></div><p>It is very important that when creating the Routing Keys you use the 4 letter hostname allocated to you as a Detector has been configured within Splunk Infrastructure Monitoring using this hostname, so any deviation will cause future exercises to fail.</p><h2 id=2-create-routing-keys>2 Create Routing Keys</h2><p>Navigate to <strong>Settings</strong> on the main menu bar, you should now be at the <strong>Routing Keys</strong> page.</p><p>You are going to create the following two Routing Keys using the naming conventions listed in the following table, but replacing {==HOSTNAME==} with the value from above and replace <strong><code>TEAM_NAME</code></strong> with the team you were allocated or created earlier.</p><table><thead><tr><th>Routing Key</th><th>Escalation Policies</th></tr></thead><tbody><tr><td><strong><code>HOSTNAME</code></strong>_PRI</td><td><strong><code>TEAM_NAME</code></strong> : Primary</td></tr><tr><td><strong><code>HOSTNAME</code></strong>_WR</td><td><strong><code>TEAM_NAME</code></strong> : Waiting Room</td></tr></tbody></table><p>There will probably already be a number of Routing Keys configured, but to add a new one simply scroll to the bottom of the page and then click <strong>Add Key</strong></p><p>In the left hand box, enter the name for the key as per the table above. In the <strong>Routing Key</strong> column, select your Teams <strong>Primary</strong> policy from the drop down in the <strong>Escalation Polices</strong> column. You can start typing your Team Name to filter the results.</p><p><a href=#R-image-b3ae7e7098ab11b2fd3ad17771265fee class=lightbox-link><img alt="Add Routing Key" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/routing-key-add.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b3ae7e7098ab11b2fd3ad17771265fee><img alt="Add Routing Key" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/routing-key-add.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>If there are a large number of participants on the workshop, resulting in an unusually large number of Escalation Policies sometimes the search filter does not list all the Policies under your Team Name. If this happens instead of using the search feature, simply scroll down to your team name, all the policies will then be listed.</p></div></details><p>Repeat the above steps for both Keys, <strong><code>xxxx_PRI</code></strong> and <strong><code>xxxx_WR</code></strong>, mapping them to your Teams Primary and Waiting Room policies.</p><p>You should now have two Routing Keys configured, similar to the following:</p><p><a href=#R-image-6436a894c82cef59f82e8e6d8221f5e8 class=lightbox-link><img alt="Routing Keys" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/routing-keys.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6436a894c82cef59f82e8e6d8221f5e8><img alt="Routing Keys" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/routing-keys.png></a></p><details open class="box cstyle notices tip"><summary class=box-label><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can assign a Routing Key to multiple Escalation Policies if required by simply selecting more from the list</p></div></details><p>If you now navigate back to <strong>Teams → [Your Team Name] → Escalation Policies</strong> and look at the settings for your <strong>Primary</strong> and <strong>Waiting Room</strong> polices you will see that these now have <strong>Routes</strong> assigned to them.</p><p><a href=#R-image-bc287afc98023679aa2a8b1973c2c6e1 class=lightbox-link><img alt="Routing Keys Assigned" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/routing-keys-assigned.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bc287afc98023679aa2a8b1973c2c6e1><img alt="Routing Keys Assigned" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/routing-keys-assigned.png></a></p><p>The <strong>24/7</strong> policy does not have a Route assigned as this will only be triggered via an <strong>Execute Policy</strong> escalation from the <strong>Primary</strong> policy.</p><hr><p>Please wait for the instructor before proceeding to the Incident Lifecycle/Overview module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=incident-lifecycle>Incident Lifecycle</h1><h2 id=aim>Aim</h2><p>The aim of this module is for you to get more familiar with the Timeline Tab and the filtering features.</p><h2 id=1-timeline>1. Timeline</h2><p>The aim of Splunk On-Call is to make being on call more bearable, and it does this by getting the critical data, to the right people, at the right time.</p><p>The key to making it work for you is to centralize all your alerting sources, sending them all to the Splunk On-Call platform, then you have a single pane of glass in which to manage all of your alerting.</p><p>Login to the Splunk On-Call UI and select the <strong>Timeline</strong> tab on the main menu bar, you should have a screen similar to the following image:</p><p><a href=#R-image-faeb46fa3d0e3b4553e16b8ddcfceeb1 class=lightbox-link><img alt="Splunk On-Call UI" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/m7-vo-ui.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-faeb46fa3d0e3b4553e16b8ddcfceeb1><img alt="Splunk On-Call UI" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/m7-vo-ui.png></a></p><h2 id=2-people>2. People</h2><p>On the left we have the <strong>People</strong> section with the <strong>Teams</strong> and <strong>Users</strong> sub tabs. On the <strong>Teams</strong> tab, click on <strong>All Teams</strong> then expand <em><strong>[Your Team name]</strong></em>.</p><p>Users with the Splunk On-Call Logo against their name are currently on call. Here you can see who is on call within a particular Team, or across all Teams via <strong>Users → On-Call</strong>.</p><p>If you click into one of the currently on call users, you can see their status. It shows which Rotation they are on call for, when their current Shift ends and their next Shift starts (times are displayed in your time zone), what contact methods they have and which Teams they belong to (dummy users such as Hank do not have Contact Methods configured).</p><p><a href=#R-image-bb272c1e2aa967578a3374e3de186152 class=lightbox-link><img alt="User Detail" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/m7-user-detail.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bb272c1e2aa967578a3374e3de186152><img alt="User Detail" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/m7-user-detail.png></a></p><h2 id=3-timeline>3. Timeline</h2><p>In the centre <strong>Timeline</strong> section you get a realtime view of what is happening within your environment with the newest messages at the top. Here you can quickly post update messages to make your colleagues aware of important developments etc.</p><p>You can filter the view using the buttons on the top toolbar showing only update messages, GitHub integrations, or apply more advanced filters.</p><p>Lets change the Filters settings to streamline your view. Click the <strong>Filters</strong> button then within the <strong>Routing Keys</strong> tab change the <strong>Show</strong> setting from <strong>all routing keys</strong> to <strong>selected routing keys</strong>. Change the <strong>My Keys</strong> value to <strong>all</strong> and the <strong>Other Keys</strong> value to <strong>selected</strong> and deselect all keys under the Other Keys section.</p><p>Click anywhere outside of the dialogue box to close it.</p><p><a href=#R-image-3bd13c199858ff95203c0a12c1bdf27c class=lightbox-link><img alt="Timeline Filters" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/m7-timeline-filters.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3bd13c199858ff95203c0a12c1bdf27c><img alt="Timeline Filters" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/m7-timeline-filters.png></a></p><p>You will probably now have a much simpler view as you will not currently have Incidents created using your Routing Keys, so you are left with the other types of messages that the Timeline can display.</p><p>Click on <strong>Filters</strong> again, but this time switch to the <strong>Message Types</strong> tab. Here you control the types of messages that are displayed.</p><p>For example, deselect <strong>On-call Changes</strong> and <strong>Escalations</strong>, this will reduce the amount of messages displayed.</p><p><a href=#R-image-4b45fbc46ceccb96717232ea4241a4bf class=lightbox-link><img alt="Timeline Filters Message Types" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/m7-timeline-filters-message-types.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4b45fbc46ceccb96717232ea4241a4bf><img alt="Timeline Filters Message Types" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/m7-timeline-filters-message-types.png></a></p><h2 id=4-incidents>4. Incidents</h2><p>On the right we have the <strong>Incidents</strong> section. Here we get a list of all the incidents within the platform, or we can view a more specific list such as incidents you are specifically assigned to, or for any of the Teams you are a member of.</p><p>Select the <strong>Team Incidents</strong> tab you should find that the <strong>Triggered</strong>, <strong>Acknowledged</strong> & <strong>Resolved</strong> tabs are currently all empty as you have had no incidents logged.</p><p>Let&rsquo;s change that by generating your first incident!</p><p>Continue with the <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/incident_lifecycle/create_incidents/index.html>Create Incidents</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Incident Lifecycle</h1><article class=default><header class=headline></header><h1 id=create-incidents>Create Incidents</h1><h2 id=aim>Aim</h2><p>The aim of this module is for you to place yourself &lsquo;On-Call&rsquo; then generate an Incident using the supplied EC2 Instance so you can then work through the lifecycle of an Incident.</p><hr><h2 id=1-on-call>1. On-Call</h2><p>Before generating any incidents you should assign yourself to the current Shift within your <strong>Follow the Sun Support - Business Hours</strong> Rotation and also place yourself <strong>On-Call</strong>.</p><ul><li>Click on the <strong>Schedule</strong> link within your <strong>Team</strong> in the <strong>People</strong> section on the left, or navigate to <strong>Teams → [Your Team] → Rotations</strong></li><li>Expand the <strong>Follow the Sun Support - Business Hours</strong> Rotation</li><li>Click on the <strong>Manage members</strong> icon (the figures) for the current active shift depending on your time zone
<a href=#R-image-cf617204ef705c5e616ed894b92f2a9a class=lightbox-link><img alt="Manage Members" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/manage-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cf617204ef705c5e616ed894b92f2a9a><img alt="Manage Members" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/manage-members.png></a></li><li>Use the <strong>Select a user to add&mldr;</strong> dropdown to add yourself to the shift</li><li>Then click on <strong>Set Current</strong> next to your name to make yourself the current <strong>on-call</strong> user within the shift</li><li>You should now get a <strong>Push Notification</strong> to your phone informing you that <strong>You Are Now On-Call</strong>
<a href=#R-image-faccbafe8e7933c787f6b7db37929c9f class=lightbox-link><img alt="On Duty" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/on-duty.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-faccbafe8e7933c787f6b7db37929c9f><img alt="On Duty" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/on-duty.png></a></li></ul><h2 id=2-trigger-alert>2. Trigger Alert</h2><p>Switch back to your shell session connected to your EC2 Instance; all of the following commands will be executed from your Instance.</p><p>Force the CPU to spike to 100% by running the following command:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>openssl speed -multi $(grep -ci processor /proc/cpuinfo)</span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Forked child 0
</span></span><span class=line><span class=cl>+DT:md4:3:16
</span></span><span class=line><span class=cl>+R:19357020:md4:3.000000
</span></span><span class=line><span class=cl>+DT:md4:3:64
</span></span><span class=line><span class=cl>+R:14706608:md4:3.010000
</span></span><span class=line><span class=cl>+DT:md4:3:256
</span></span><span class=line><span class=cl>+R:8262960:md4:3.000000
</span></span><span class=line><span class=cl>+DT:md4:3:1024</span></span></code></pre></div><p>This will result in an Alert being generated by Splunk Infrastructure Monitoring which in turn will generate an Incident within Splunk On-Call within a maximum of 10 seconds. This is the default polling time for the OpenTelemetry Collector installed on your instance (note it can be reduced to 1 second).</p><hr><p>Continue with the <a href=/observability-workshop/v5.92/en/unsupported-field-workshops/10-oncall/incident_lifecycle/manage_incidents/index.html>Manage Incidents</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=manage-incidents>Manage Incidents</h1><h2 id=1-acknowledge>1. Acknowledge</h2><p>Use your Splunk On-Call App on your phone to acknowledge the Incident by clicking on the <strong>push notification</strong> &mldr;</p><p><a href=#R-image-25dd3b39f1a76e73c21ea0bdb5992341 class=lightbox-link><img alt="Push Notification" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/mobile-notification.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-25dd3b39f1a76e73c21ea0bdb5992341><img alt="Push Notification" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/mobile-notification.png></a></p><p>&mldr;to open the alert in the Splunk On-Call mobile app, then clicking on either the <strong>single tick</strong> in the top right hand corner, or the <strong>Acknowledge</strong> link to acknowledge the incident and stop the escalation process.</p><p>The :fontawesome-solid-check: will then transform into a :fontawesome-solid-check::fontawesome-solid-check:, and the status will change from <strong>TRIGGERED</strong> to <strong>ACKNOWLEDGED</strong>.</p><table><thead><tr><th>Triggered Incident</th><th>Acknowledge Incident</th></tr></thead><tbody><tr><td><a href=#R-image-7b7684fe1578986bca154e5f30f2ff58 class=lightbox-link><img alt="Acknowledge Alert" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/phone-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7b7684fe1578986bca154e5f30f2ff58><img alt="Acknowledge Alert" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/phone-annotations.png></a></td><td><a href=#R-image-341feaa11284eff9c753843ebba9bec9 class=lightbox-link><img alt="Alert Acknowledged" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/phone-alert-acknowledged.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-341feaa11284eff9c753843ebba9bec9><img alt="Alert Acknowledged" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/phone-alert-acknowledged.png></a></td></tr></tbody></table><h2 id=2-details-and-annotations>2. Details and Annotations</h2><p>Still on your phone, select the Alert Details tab. Then on the Web UI, navigate back to <strong>Timeline</strong>, select <strong>Team Incidents</strong> on the right, then select <strong>Acknowledged</strong> and click into the new <strong>Incident</strong>, this will open up the War Room Dashboard view of the Incident.</p><p>You should now have the <strong>Details</strong> tab displayed on both your Phone and the Web UI. Notice how they both show the exact same information.</p><p>Now select the <strong>Annotations</strong> tab on both the Phone and the Web UI, you should have a <strong>Graph</strong> displayed in the UI which is generated by Splunk Infrastructure Monitoring.</p><p><a href=#R-image-3a229e9b3721689cf680cb7735e08816 class=lightbox-link><img alt="UI Annotations" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/ui-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3a229e9b3721689cf680cb7735e08816><img alt="UI Annotations" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/ui-annotations.png></a></p><p>On your phone you should get the same image displayed (sometimes it&rsquo;s a simple hyperlink depending on the image size)</p><p><a href=#R-image-178b28674dac38b659a5bf54503df70c class=lightbox-link><img alt="Phone Link" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/phone-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-178b28674dac38b659a5bf54503df70c><img alt="Phone Link" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/phone-annotations.png></a></p><p>Splunk On-Call is a &lsquo;Mobile First&rsquo; platform meaning the phone app is full functionality and you can manage an incident directly from your phone.</p><p>For the remainder of this module we will focus on the Web UI however please spend some time later exploring the phone app features.</p><h2 id=3-link-to-alerting-system>3. Link to Alerting System</h2><p>Sticking with the Web UI, click the <strong>2. Alert Details in SignalFx</strong> link.</p><p><a href=#R-image-b86ea7880a678658fb2abffd06c65e7c class=lightbox-link><img alt="Alert Details" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/alert-details-in-sfx.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b86ea7880a678658fb2abffd06c65e7c><img alt="Alert Details" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/alert-details-in-sfx.png></a></p><p>This will open a new browser tab and take you directly to the Alert within Splunk Infrastructure Monitoring where you could then progress your troubleshooting using the powerful tools built into its UI.</p><p><a href=#R-image-715b010cff56fbbad65ed19b0c8c3b12 class=lightbox-link><img alt="SFX Alert Details" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/sfx-alert-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-715b010cff56fbbad65ed19b0c8c3b12><img alt="SFX Alert Details" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/sfx-alert-details.png></a></p><p>However, we are focussing on Splunk On-Call so close this tab and return to the Splunk On-Call UI.</p><h2 id=4-similar-incidents>4. Similar Incidents</h2><p>What if Splunk On-Call could identify previous incidents within the system which may give you a clue to the best way to tackle this incident.</p><p>The <strong>Similar Incidents</strong> tab does exactly that, surfacing previous incidents allowing you to look at them and see what actions were taken to resolve them, actions which could be easily repeated for this incident.</p><p><a href=#R-image-1db6b70fc1db6ec96daf30b658de26a5 class=lightbox-link><img alt="Similar Incidents" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/similar-incidents.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1db6b70fc1db6ec96daf30b658de26a5><img alt="Similar Incidents" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/similar-incidents.png></a></p><h2 id=5-timeline>5 Timeline</h2><p>On right we have a Time Line view where you can add messages and see the history of previous alerts and interactions.</p><p><a href=#R-image-7fcd6dc5eda9f69b1b3ce43665246ada class=lightbox-link><img alt="Incident View" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/war-room-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7fcd6dc5eda9f69b1b3ce43665246ada><img alt="Incident View" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/war-room-dashboard.png></a></p><h2 id=6-add-responders>6 Add Responders</h2><p>On the far left you have the option of allocating additional resources to this incident by clicking on the <strong>Add Responders</strong> link.</p><p><a href=#R-image-4347ab281c95228e8e3bc22e90a7e69a class=lightbox-link><img alt=add-responders class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/add-responders.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4347ab281c95228e8e3bc22e90a7e69a><img alt=add-responders class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/add-responders.png></a></p><p>This allows you build a virtual team specific to this incident by adding other Teams or individual Users, and also share details of a <strong>Conference Bridge</strong> where you can all get together and collaborate.</p><p><a href=#R-image-40839e3b97fb0cc306fa034251ee7b1b class=lightbox-link><img alt="Conference Bridge" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/conference-bridge.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-40839e3b97fb0cc306fa034251ee7b1b><img alt="Conference Bridge" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/conference-bridge.png></a></p><p>Once the system has built up some incident data history, it will use Machine Learning to suggest Teams and Users who have historically worked on similar incidents, as they may be best placed to help resolve this incident quickly.</p><p>You can select different Teams and/or Users and also choose from a pre-configured conference bridge, or populate the details of a new bridge from your preferred provider.</p><p>We do not need to add any Responders in this exercise so close the <strong>Add Responders</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=7-reroute>7 Reroute</h2><p>If it&rsquo;s decided that maybe the incident could be better dealt with by a different Team, the call can be <strong>Rerouted</strong> by clicking the <strong>Reroute</strong> Button at the top of the left hand panel.</p><p><a href=#R-image-8eab96a3942419bcc5c47390edc41bf0 class=lightbox-link><img alt=Reroute class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/reroute1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8eab96a3942419bcc5c47390edc41bf0><img alt=Reroute class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/reroute1.png></a></p><p>In a similar method to that used in the Add Responders dialogue, you can select Teams or Users to Reroute the Incident to.</p><p><a href=#R-image-0bc18cc6afbb0c7bc7a0d38abdf86904 class=lightbox-link><img alt="Reroute Incident" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/reroute2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0bc18cc6afbb0c7bc7a0d38abdf86904><img alt="Reroute Incident" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/reroute2.png></a></p><p>We do not need to actually Reroute in this exercise so close the <strong>Reroute Incident</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=8-snooze>8 Snooze</h2><p>You can also <strong>snooze</strong> this incident by clicking on the <strong>alarm clock</strong> Button at the top of the left hand panel.</p><p><a href=#R-image-570737f4dd52b93f2c6b28153dc49496 class=lightbox-link><img alt=Snnoze class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/snooze1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-570737f4dd52b93f2c6b28153dc49496><img alt=Snnoze class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/snooze1.png></a></p><p>You can enter an amount of time upto 24 hours to snooze the incident. This action will be tracked in the Timeline, and when the time expires the paging will restart.</p><p>This is useful for low priority incidents, enabling you to put them on a back burner for a few hours, but it ensures they do not get forgotten thanks to the paging process starting again.</p><p><a href=#R-image-772dd68cff8de6c941d0651221231c1c class=lightbox-link><img alt="Snooze Incident" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/snooze2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-772dd68cff8de6c941d0651221231c1c><img alt="Snooze Incident" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/snooze2.png></a></p><p>We do not need to actually Snooze in this exercise so close the <strong>Snooze Incident</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=9-action-tracking>9 Action Tracking</h2><p>Now lets fix this issue and update the Incident with what we did. Add a new message at the top of the right hand panel such as <strong>Discovered rogue process, terminated it</strong>.</p><p><a href=#R-image-850f8dc718d0dfcbf1ad3823f5b0ff9c class=lightbox-link><img alt="Add Message" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/time-line-update-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-850f8dc718d0dfcbf1ad3823f5b0ff9c><img alt="Add Message" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/time-line-update-message.png></a></p><p>All the actions related to the Incident will be recorded here, and can then be summarized is a <strong>Post Incident Review Report</strong> available from the <strong>Reports</strong> tab</p><h2 id=10-resolution>10 Resolution</h2><p>Now kill off the process we started in the VM to max out the CPU by switching back the Shell session for the VM and pressing <strong>ctrl+c</strong></p><p>Within no more than 10 seconds SignalFx should detect the new CPU value, clear the alert state in SignalFx, then automatically update the Incident in VictorOps marking it as <strong>Resolved</strong>.</p><p><a href=#R-image-a2048b3abff0573f7bb5062389e8d071 class=lightbox-link><img alt=Resolved class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/m7-resolved.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a2048b3abff0573f7bb5062389e8d071><img alt=Resolved class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/m7-resolved.png></a></p><p>As we have two way integration between Splunk Infrastructure Monitoring and Splunk On-Call we could have also marked the incident as Resolved in Splunk On-Call, and this would have resulted in the alert in Splunk Infrastructure Monitoring being resolved as well.</p><hr><p>That completes this introduction to Splunk On-Call!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section></section></section></div></main></div><script src=/observability-workshop/v5.92/js/clipboard.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/perfect-scrollbar.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-color.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-dispatch.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-drag.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-ease.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-interpolate.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-selection.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-timer.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-transition.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/d3/d3-zoom.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/js-yaml.min.js?1748466275 defer></script><script src=/observability-workshop/v5.92/js/mermaid.min.js?1748466275 defer></script><script>window.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/v5.92/js/theme.js?1748466275 defer></script></body></html>